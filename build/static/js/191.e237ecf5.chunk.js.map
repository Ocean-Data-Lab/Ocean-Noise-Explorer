{"version":3,"sources":["../node_modules/@arcgis/core/portal/support/portalLayers.js"],"names":["u","e","portalItem","t","load","then","l","y","i","r","properties","constructor","type","c","url","tileInfo","M","className","j","id","layerId","p","L","a","Array","isArray","typeKeywords","length","IntegratedMesh","Point","PointCloud","Building","Object","keys","includes","layerType","f","d","Promise","reject","o","fetchData","map","toLowerCase","cacheType","match","resolve","v","n","s"],"mappings":"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","file":"static/js/191.e237ecf5.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{layerLookupMap as r}from\"../../layers/support/lazyLayerLoader.js\";import t from\"../PortalItem.js\";import{getNumLayersAndTables as a,preprocessFSItemData as n,getFirstLayerOrTableId as s}from\"./layersLoader.js\";import{hasTypeKeyword as o}from\"./portalItemUtils.js\";import{requestArcGISServiceJSON as c}from\"../../support/requestPresets.js\";function u(e){return!e.portalItem||e.portalItem instanceof t||(e={...e,portalItem:new t(e.portalItem)}),i(e.portalItem).then((r=>{const t={portalItem:e.portalItem,...r.properties};return new(0,r.constructor)(t)}))}function i(e){return e.load().then(l).then(y)}function l(r){switch(r.type){case\"Map Service\":return m(r);case\"Feature Service\":return p(r);case\"Feature Collection\":return L(r);case\"Scene Service\":return f(r);case\"Image Service\":return d(r);case\"Stream Service\":return N();case\"Vector Tile Service\":return S();case\"KML\":return I();case\"WFS\":return h();case\"WMTS\":return w();case\"WMS\":return g();case\"Feed\":return T();default:return Promise.reject(new e(\"portal:unknown-item-type\",\"Unknown item type '${type}'\",{type:r.type}))}}function y(e){return(0,r[e.className])().then((r=>({constructor:r,properties:e.properties})))}function m(e){return M(e).then((e=>e?{className:\"TileLayer\"}:{className:\"MapImageLayer\"}))}function p(e){return j(e).then((e=>{if(\"object\"==typeof e){const r={};return null!=e.id&&(r.layerId=e.id),{className:\"FeatureLayer\",properties:r}}return{className:\"GroupLayer\"}}))}function f(e){return j(e).then((r=>{if(\"object\"==typeof r){const t={};let a;if(null!=r.id?(t.layerId=r.id,a=`${e.url}/layers/${r.id}`):a=e.url,Array.isArray(e.typeKeywords)&&e.typeKeywords.length>0){const r={IntegratedMesh:\"IntegratedMeshLayer\",\"3DObject\":\"SceneLayer\",Point:\"SceneLayer\",PointCloud:\"PointCloudLayer\",Building:\"BuildingSceneLayer\"};for(const t of Object.keys(r))if(e.typeKeywords.includes(t))return{className:r[t]}}return c(a).then((e=>{let r=\"SceneLayer\";const a={Point:\"SceneLayer\",\"3DObject\":\"SceneLayer\",IntegratedMesh:\"IntegratedMeshLayer\",PointCloud:\"PointCloudLayer\",Building:\"BuildingSceneLayer\"};return e&&e.layerType&&a[e.layerType]&&(r=a[e.layerType]),{className:r,properties:t}}))}return!1===r?c(e.url).then((e=>\"Voxel\"===e?.layerType?{className:\"VoxelLayer\"}:{className:\"GroupLayer\"})):{className:\"GroupLayer\"}}))}async function L(e){await e.load();if(o(e,\"Map Notes\"))return{className:\"MapNotesLayer\"};if(o(e,\"Route Layer\"))return{className:\"RouteLayer\"};const r=await e.fetchData();return 1===a(r)?{className:\"FeatureLayer\"}:{className:\"GroupLayer\"}}async function d(e){await e.load();const r=e.typeKeywords?.map((e=>e.toLowerCase()))??[];if(r.includes(\"elevation 3d layer\"))return{className:\"ElevationLayer\"};if(r.includes(\"tiled imagery\"))return{className:\"ImageryTileLayer\"};const t=(await e.fetchData())?.layerType;if(\"ArcGISTiledImageServiceLayer\"===t)return{className:\"ImageryTileLayer\"};if(\"ArcGISImageServiceLayer\"===t)return{className:\"ImageryLayer\"};const a=(await c(e.url)).cacheType?.toLowerCase();return\"map\"===a?{className:\"ImageryTileLayer\"}:{className:\"ImageryLayer\"}}function N(){return{className:\"StreamLayer\"}}function S(){return{className:\"VectorTileLayer\"}}function I(){return{className:\"KMLLayer\"}}function h(){return{className:\"WFSLayer\"}}function g(){return{className:\"WMSLayer\"}}function w(){return{className:\"WMTSLayer\"}}function T(){return{className:\"StreamLayer\"}}function M(e){return c(e.url).then((e=>e.tileInfo))}function j(e){return!e.url||e.url.match(/\\/\\d+$/)?Promise.resolve({}):e.load().then((()=>e.fetchData())).then((async r=>{if(\"Feature Service\"===e.type)return v(r=await n(r,e.url));return a(r)>0?v(r):c(e.url).then(v)}))}function v(e){return 1===a(e)&&{id:s(e)}}export{u as fromItem,l as selectLayerClassPath};\n"],"sourceRoot":""}