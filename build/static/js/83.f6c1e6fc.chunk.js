(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[83],{1089:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return X}));var n=r(60),a=r(155),i=r(142),o=r(143),s=r(209),u=r(164),c=r(163),l=r(144),p=r(145),d=r(154),f=r.n(d),y=r(148),b=(r(177),r(282)),v=(r(384),r(442),r(454),r(455),r(453),r(362),r(429),r(402),r(420),r(463)),h=r(272),j=r(151),m=(r(152),r(147),r(150),r(149)),g=r(383),O=r(286),w=r(14),k=r(159),x=r(346),S=r(146),F=r(854),I=r(288),T=r(185),R=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.apply(this,arguments)).featureDefinition=null,e.type="ogc-feature",e}return Object(o.a)(r,[{key:"load",value:function(e){return this.addResolvingPromise(this._loadOGCServices(this.layer,e)),this.when()}},{key:"getFeatureDefinition",value:function(){var e=this.featureDefinition,t=e.collection,r=e.layerDefinition,n=e.spatialReference,a=e.supportedCrs,i=this.layer,o=i.apiKey;return{capabilities:i.capabilities,collection:t,layerDefinition:r,queryParameters:{apiKey:o,customParameters:i.customParameters},spatialReference:n,supportedCrs:a}}},{key:"queryExtent",value:function(e){return null}},{key:"queryFeatureCount",value:function(e){return null}},{key:"queryFeatures",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.queryFeaturesJSON(e,t).then((function(e){return I.default.fromJSON(e)}))}},{key:"queryFeaturesJSON",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getFeatureDefinition();return this.load(t).then((function(){return Object(F.i)(r,e,t)}))}},{key:"queryObjectIds",value:function(e){return null}},{key:"serviceSupportsSpatialReference",value:function(e){return!(!e.isWGS84&&!e.isWebMercator)||!!this.featureDefinition.supportedCrs[e.wkid]}},{key:"_conformsToType",value:function(e,t){var r,n=new RegExp("^".concat(t,"$"),"i");return null!==(r=e.conformsTo.some((function(e){return n.test(e)})))&&void 0!==r&&r}},{key:"_getCapabilities",value:function(e,t){var r,n,a,i,o,s,u,c=Object(S.k)(t)?null===(r=t.components)||void 0===r?void 0:r.parameters:null;return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},query:{maxRecordCount:null!==(n=null!==(a=null===c||void 0===c||null===(i=c.limit)||void 0===i||null===(o=i.schema)||void 0===o?void 0:o.maximum)&&void 0!==a?a:null===c||void 0===c||null===(s=c.limitFeatures)||void 0===s||null===(u=s.schema)||void 0===u?void 0:u.maximum)&&void 0!==n?n:5e3,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,supportsSqlExpression:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1}}}},{key:"_getExtent",value:function(e){var t,r=null===(t=e.extent)||void 0===t?void 0:t.spatial;if(!r)return null;var n=r.bbox[0],a=4===n.length,i=n[0],o=n[1],s=a?void 0:n[2];return{xmin:i,ymin:o,xmax:a?n[2]:n[3],ymax:a?n[3]:n[4],zmin:s,zmax:a?void 0:n[5],spatialReference:T.a.WGS84.toJSON()}}},{key:"_getStorageSpatialReference",value:function(e){var t,r=null!==(t=e.storageCrs)&&void 0!==t?t:F.a,n=Object(F.h)(r);return Object(S.j)(n)?T.a.WGS84:new T.a({wkid:n})}},{key:"_getSupportedSpatialReferences",value:function(e,t){var r,n="#/crs",a=null!==(r=e.crs)&&void 0!==r?r:[F.a],i=a.includes(n)?a.filter((function(e){return e!==n})).concat(t.crs):a,o=/^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;return i.filter((function(e){return!o.test(e)}))}},{key:"_loadOGCServices",value:function(){var e=Object(a.a)(f.a.mark((function e(t,r){var a,i,o,s,u,c,l,p,d,y,b,v,h,j,m,O,x,I,T,R,C,P,D,G,M,E,q,A,N,Q;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(S.k)(r)?r.signal:null,i=t.apiKey,o=t.collectionId,s=t.customParameters,u=t.fields,c=t.geometryType,l=t.hasZ,p=t.objectIdField,d=t.timeInfo,y=t.url,b={fields:null===u||void 0===u?void 0:u.map((function(e){return e.toJSON()})),geometryType:g.c.toJSON(c),hasZ:l,objectIdField:p,timeInfo:null===d||void 0===d?void 0:d.toJSON()},v={apiKey:i,customParameters:s,signal:a},e.next=14,Object(F.f)(y,v);case 14:return h=e.sent,e.next=17,Promise.all([Object(F.e)(h,v),Object(F.d)(h,v)]);case 17:if(j=e.sent,m=Object(w.a)(j,2),O=m[0],x=m[1],this._conformsToType(O,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson")){e.next=23;break}throw new k.a("ogc-feature-layer:no-geojson-support","Server does not support geojson");case 23:if(I=x.collections.find((function(e){return e.id===o})),I){e.next=26;break}throw new k.a("ogc-feature-layer:collection-not-found","Server does not contain the named collection");case 26:if(!this._conformsToType(O,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30")){e.next=32;break}return e.next=29,Object(F.g)(h,v);case 29:e.t0=e.sent,e.next=33;break;case 32:e.t0=null;case 33:return T=e.t0,e.next=36,Object(F.c)(I,b,v);case 36:R=e.sent,C=this._getCapabilities(R.hasZ,T),P=this._getExtent(I),D=this._getStorageSpatialReference(I).toJSON(),G=this._getSupportedSpatialReferences(I,x),M=new RegExp("^".concat(F.b),"i"),E={},q=Object(n.a)(G);try{for(q.s();!(A=q.n()).done;)N=A.value,Q=Object(F.h)(N),Object(S.k)(Q)&&(E[Q]||(E[Q]=N.replace(M,"")))}catch(f){q.e(f)}finally{q.f()}R.extent=P,this.featureDefinition={capabilities:C,collection:I,layerDefinition:R,queryParameters:{},spatialReference:D,supportedCrs:E};case 46:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(x.a);Object(y.a)([Object(j.b)()],R.prototype,"featureDefinition",void 0),Object(y.a)([Object(j.b)({constructOnly:!0})],R.prototype,"layer",void 0),Object(y.a)([Object(j.b)()],R.prototype,"type",void 0),R=Object(y.a)([Object(m.a)("esri.layers.graphics.sources.OGCFeatureSource")],R);var C=r(479),P=r(336),D=r(480),G=r(616),M=r(304),E=r(767),q=r(306),A=r(398),N=r(307),Q=r(494),_=r(259),L=r(656),B=r(620),Z=r(356),W=r(518),J=r(238),H=r(489),z=r(574),U=r(254),K=r(464),$=r(176),V=Object(W.a)(),Y=function(e){Object(l.a)(r,e);var t=Object(p.a)(r);function r(e){var n;return Object(i.a)(this,r),(n=t.call(this,e)).collectionId=null,n.copyright=null,n.definitionExpression=null,n.description=null,n.displayField=null,n.elevationInfo=null,n.featureReduction=null,n.fields=null,n.fieldsIndex=null,n.fullExtent=null,n.geometryType=null,n.hasZ=void 0,n.labelingInfo=null,n.labelsVisible=!0,n.legendEnabled=!0,n.objectIdField=null,n.operationalLayerType="OGCFeatureLayer",n.popupEnabled=!0,n.popupTemplate=null,n.screenSizePerspectiveEnabled=!0,n.source=new R({layer:Object(s.a)(n)}),n.spatialReference=null,n.title=null,n.type="ogc-feature",n.typeIdField=null,n.types=null,n.url=null,n}return Object(o.a)(r,[{key:"destroy",value:function(){var e;null===(e=this.source)||void 0===e||e.destroy()}},{key:"load",value:function(e){var t=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["OGCFeatureServer"]},e).then((function(){return t._fetchService(e)}))),this.when()}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"isTable",get:function(){return this.loaded&&null==this.geometryType}},{key:"renderer",set:function(e){Object(J.k)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"on",value:function(e,t){return Object(u.a)(Object(c.a)(r.prototype),"on",this).call(this,e,t)}},{key:"createPopupTemplate",value:function(e){return Object(K.a)(this,e)}},{key:"createQuery",value:function(){return new U.a}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFieldDomain",value:function(e,t){var r,n,a=this,i=!1,o=null===t||void 0===t||null===(r=t.feature)||void 0===r?void 0:r.attributes,s=this.typeIdField&&(null===o||void 0===o?void 0:o[this.typeIdField]);return null!=s&&this.types&&(i=this.types.some((function(t){var r,i;return t.id==s&&("inherited"===(null===(i=n=null===(r=t.domains)||void 0===r?void 0:r[e])||void 0===i?void 0:i.type)&&(n=a._getLayerDomain(e)),!0)}))),i||n||(n=this._getLayerDomain(e)),n}},{key:"queryFeatures",value:function(e,t){var r=this;return this.load().then((function(){return r.source.queryFeatures(U.a.from(e)||r.createQuery(),t)})).then((function(e){var t;return null!==e&&void 0!==e&&null!==(t=e.features)&&void 0!==t&&t.forEach((function(e){e.layer=e.sourceLayer=r})),e}))}},{key:"serviceSupportsSpatialReference",value:function(e){var t,r;return null!==(t=null===(r=this.source)||void 0===r?void 0:r.serviceSupportsSpatialReference(e))&&void 0!==t&&t}},{key:"_fetchService",value:function(){var e=Object(a.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.source.load(t);case 2:this.read(this.source.featureDefinition,{origin:"service"}),Object(J.k)(this.renderer,this.fieldsIndex),Object(J.l)(this.timeInfo,this.fieldsIndex);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getLayerDomain",value:function(e){if(!this.fields)return null;var t,r=Object(n.a)(this.fields);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.name===e&&a.domain)return a.domain}}catch(i){r.e(i)}finally{r.f()}return null}}]),r}(Object(C.a)(Object(D.a)(Object(G.a)(Object(P.a)(Object(E.a)(Object(Q.a)(Object(N.a)(Object(M.a)(Object(q.a)(Object(A.a)(Object(h.a)(O.a))))))))))));Object(y.a)([Object(j.b)({readOnly:!0,json:{origins:{service:{read:!0}}}})],Y.prototype,"capabilities",void 0),Object(y.a)([Object(j.b)({type:String,json:{write:!0}})],Y.prototype,"collectionId",void 0),Object(y.a)([Object(j.b)({type:String})],Y.prototype,"copyright",void 0),Object(y.a)([Object(j.b)({readOnly:!0})],Y.prototype,"defaultPopupTemplate",null),Object(y.a)([Object(j.b)({type:String})],Y.prototype,"definitionExpression",void 0),Object(y.a)([Object(j.b)({readOnly:!0,type:String,json:{origins:{service:{name:"collection.description"}}}})],Y.prototype,"description",void 0),Object(y.a)([Object(j.b)({type:String})],Y.prototype,"displayField",void 0),Object(y.a)([Object(j.b)(_.b)],Y.prototype,"elevationInfo",void 0),Object(y.a)([Object(j.b)(L.a)],Y.prototype,"featureReduction",void 0),Object(y.a)([Object(j.b)({type:[Z.a],json:{origins:{service:{name:"layerDefinition.fields"}}}})],Y.prototype,"fields",void 0),Object(y.a)([Object(j.b)(V.fieldsIndex)],Y.prototype,"fieldsIndex",void 0),Object(y.a)([Object(j.b)({readOnly:!0,type:$.a,json:{origins:{service:{name:"layerDefinition.extent"}}}})],Y.prototype,"fullExtent",void 0),Object(y.a)([Object(j.b)({type:g.a.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:g.a.read}}}}})],Y.prototype,"geometryType",void 0),Object(y.a)([Object(j.b)({type:Boolean,json:{origins:{service:{name:"layerDefinition.hasZ"}}}})],Y.prototype,"hasZ",void 0),Object(y.a)([Object(j.b)({type:Boolean,readOnly:!0})],Y.prototype,"isTable",null),Object(y.a)([Object(j.b)({type:[H.a],json:{origins:{"web-document":{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:z.a},write:!0}}}})],Y.prototype,"labelingInfo",void 0),Object(y.a)([Object(j.b)(_.d)],Y.prototype,"labelsVisible",void 0),Object(y.a)([Object(j.b)(_.e)],Y.prototype,"legendEnabled",void 0),Object(y.a)([Object(j.b)({type:String,json:{origins:{service:{name:"layerDefinition.objectIdField"}}}})],Y.prototype,"objectIdField",void 0),Object(y.a)([Object(j.b)({type:["OGCFeatureLayer"]})],Y.prototype,"operationalLayerType",void 0),Object(y.a)([Object(j.b)(_.k)],Y.prototype,"popupEnabled",void 0),Object(y.a)([Object(j.b)({type:b.a,json:{name:"popupInfo",write:!0}})],Y.prototype,"popupTemplate",void 0),Object(y.a)([Object(j.b)({types:v.a,json:{origins:{service:{name:"layerDefinition.drawingInfo.renderer",write:!1},"web-scene":{types:v.b,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:!0}})],Y.prototype,"renderer",null),Object(y.a)([Object(j.b)(_.n)],Y.prototype,"screenSizePerspectiveEnabled",void 0),Object(y.a)([Object(j.b)({readOnly:!0})],Y.prototype,"source",void 0),Object(y.a)([Object(j.b)({readOnly:!0,type:T.a,json:{origins:{service:{read:!0}}}})],Y.prototype,"spatialReference",void 0),Object(y.a)([Object(j.b)({type:String,json:{write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"collection.title"}}}})],Y.prototype,"title",void 0),Object(y.a)([Object(j.b)({readOnly:!0,json:{read:!1}})],Y.prototype,"type",void 0),Object(y.a)([Object(j.b)({type:String,readOnly:!0})],Y.prototype,"typeIdField",void 0),Object(y.a)([Object(j.b)({type:[B.a]})],Y.prototype,"types",void 0),Object(y.a)([Object(j.b)(_.o)],Y.prototype,"url",void 0);var X=Y=Object(y.a)([Object(m.a)("esri.layers.OGCFeatureLayer")],Y)},386:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return f})),r.d(t,"d",(function(){return c}));var n=r(7),a=r(5),i=r(147),o=r(161),s=r(387),u=r(365);function c(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?u.a:"esriGeometryPolyline"===e?u.c:u.b}}}var l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,p=1;function d(e,t){if(Object(i.a)("esri-csp-restrictions"))return function(){return Object(a.a)(Object(n.a)({},t,null),e)};try{var r="this.".concat(t," = null;");for(var o in e)r+="this".concat(l.test(o)?".".concat(o):'["'.concat(o,'"]')," = ").concat(JSON.stringify(e[o]),";");var s=new Function("\n      return class AttributesClass$".concat(p++," {\n        constructor() {\n          ").concat(r,";\n        }\n      }\n    "))();return function(){return new s}}catch(u){return function(){return Object(a.a)(Object(n.a)({},t,null),e)}}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:Object(o.a)(e)}}]}function y(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:s.a,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},387:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},485:function(e,t,r){"use strict";r.d(t,"a",(function(){return P})),r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return C})),r.d(t,"d",(function(){return R}));var n=r(14),a=r(60),i=r(154),o=r.n(i),s=r(159),u=r(350),c=r(216),l=r(238),p=o.a.mark(v),d=o.a.mark(h),f=o.a.mark(j),y={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function b(e){return y[e]}function v(e){var t,r,n;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:i.t0=e.type,i.next="Feature"===i.t0?3:"FeatureCollection"===i.t0?6:25;break;case 3:return i.next=5,e;case 5:return i.abrupt("break",25);case 6:t=Object(a.a)(e.features),i.prev=7,t.s();case 9:if((r=t.n()).done){i.next=17;break}if(n=r.value,i.t1=n,!i.t1){i.next=15;break}return i.next=15,n;case 15:i.next=9;break;case 17:i.next=22;break;case 19:i.prev=19,i.t2=i.catch(7),t.e(i.t2);case 22:return i.prev=22,t.f(),i.finish(22);case 25:case"end":return i.stop()}}),p,null,[[7,19,22,25]])}function h(e){var t,r,n,i,s,u,c,l,p;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e){o.next=2;break}return o.abrupt("return",null);case 2:o.t0=e.type,o.next="Point"===o.t0?5:"LineString"===o.t0||"MultiPoint"===o.t0?8:"MultiLineString"===o.t0||"Polygon"===o.t0?10:"MultiPolygon"===o.t0?27:58;break;case 5:return o.next=7,e.coordinates;case 7:return o.abrupt("break",58);case 8:return o.delegateYield(e.coordinates,"t1",9);case 9:return o.abrupt("break",58);case 10:t=Object(a.a)(e.coordinates),o.prev=11,t.s();case 13:if((r=t.n()).done){o.next=18;break}return n=r.value,o.delegateYield(n,"t2",16);case 16:o.next=13;break;case 18:o.next=23;break;case 20:o.prev=20,o.t3=o.catch(11),t.e(o.t3);case 23:return o.prev=23,t.f(),o.finish(23);case 26:return o.abrupt("break",58);case 27:i=Object(a.a)(e.coordinates),o.prev=28,i.s();case 30:if((s=i.n()).done){o.next=50;break}u=s.value,c=Object(a.a)(u),o.prev=33,c.s();case 35:if((l=c.n()).done){o.next=40;break}return p=l.value,o.delegateYield(p,"t4",38);case 38:o.next=35;break;case 40:o.next=45;break;case 42:o.prev=42,o.t5=o.catch(33),c.e(o.t5);case 45:return o.prev=45,c.f(),o.finish(45);case 48:o.next=30;break;case 50:o.next=55;break;case 52:o.prev=52,o.t6=o.catch(28),i.e(o.t6);case 55:return o.prev=55,i.f(),o.finish(55);case 58:case"end":return o.stop()}}),d,null,[[11,20,23,26],[28,52,55,58],[33,42,45,48]])}function j(e){var t,r,n,i,s,l,p,d,y,v,h,j,m,g=arguments;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:t=g.length>1&&void 0!==g[1]?g[1]:{},r=t.geometryType,n=t.objectIdField,i=Object(a.a)(e),o.prev=3,i.s();case 5:if((s=i.n()).done){o.next=18;break}if(p=s.value,d=p.geometry,y=p.properties,v=p.id,!d||b(d.type)===r){o.next=10;break}return o.abrupt("continue",16);case 10:return j=null!==(l=(h=y||{})[n])&&void 0!==l?l:null,n&&null!=v&&!h[n]&&(h[n]=j=v),m=new u.a(d?w(new c.a,d,t):null,h,null,j),o.next=16,m;case 16:o.next=5;break;case 18:o.next=23;break;case 20:o.prev=20,o.t0=o.catch(3),i.e(o.t0);case 23:return o.prev=23,i.f(),o.finish(23);case 26:case"end":return o.stop()}}),f,null,[[3,20,23,26]])}function m(e){var t,r=Object(a.a)(e);try{for(r.s();!(t=r.n()).done;){if(t.value.length>2)return!0}}catch(n){r.e(n)}finally{r.f()}return!1}function g(e){for(var t=0,r=0;r<e.length;r++){var n=e[r],a=e[(r+1)%e.length];t+=n[0]*a[1]-a[0]*n[1]}return t<=0}function O(e){var t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]||e.push(t),e}function w(e,t,r){switch(t.type){case"LineString":case"MultiPoint":return function(e,t,r){return S(e,t.coordinates,r),e}(e,t,r);case"MultiLineString":return function(e,t,r){var n,i=Object(a.a)(t.coordinates);try{for(i.s();!(n=i.n()).done;){S(e,n.value,r)}}catch(o){i.e(o)}finally{i.f()}return e}(e,t,r);case"MultiPolygon":return function(e,t,r){var n,i=Object(a.a)(t.coordinates);try{for(i.s();!(n=i.n()).done;){var o=n.value;k(e,o[0],r);for(var s=1;s<o.length;s++)x(e,o[s],r)}}catch(u){i.e(u)}finally{i.f()}return e}(e,t,r);case"Point":return function(e,t,r){return I(e,t.coordinates,r),e}(e,t,r);case"Polygon":return function(e,t,r){var n=t.coordinates;k(e,n[0],r);for(var a=1;a<n.length;a++)x(e,n[a],r);return e}(e,t,r)}}function k(e,t,r){var n=O(t);!function(e){return!g(e)}(n)?S(e,n,r):F(e,n,r)}function x(e,t,r){var n=O(t);!function(e){return g(e)}(n)?S(e,n,r):F(e,n,r)}function S(e,t,r){var n,i=Object(a.a)(t);try{for(i.s();!(n=i.n()).done;){I(e,n.value,r)}}catch(o){i.e(o)}finally{i.f()}e.lengths.push(t.length)}function F(e,t,r){for(var n=t.length-1;n>=0;n--)I(e,t[n],r);e.lengths.push(t.length)}function I(e,t,r){var a=Object(n.a)(t,3),i=a[0],o=a[1],s=a[2];e.coords.push(i,o),r.hasZ&&e.coords.push(s||0)}function T(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function R(e){if(!e)throw new s.a("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new s.a("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});var t=e.crs;if(t){var r="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,n=new RegExp(".*(CRS84H?|4326)$","i");if(!r||!n.test(r))throw new s.a("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}}function C(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[],o=new Set,s=new Set,u=!1,c=null,p=!1,d=n.geometryType,f=void 0===d?null:d,y=!1,j=Object(a.a)(v(e));try{var g=function(){var e=r.value,n=e.geometry,a=e.properties,l=e.id;if((!n||(f||(f=b(n.type)),b(n.type)===f))&&(u||(u=m(h(n))),p||(p=null!=l)&&(t=typeof l,c=Object.keys(a).filter((function(e){return a[e]===l}))),p&&null!=l&&(c.length>1?c=c.filter((function(e){return a[e]===l})):1===c.length&&(c=a[c[0]]===l?c:[])),!y&&a)){var d=!0;for(var v in a)if(!o.has(v)){var j=a[v];if(null!=j){var g=T(j);"unknown"!==g?(s.delete(v),o.add(v),i.push({name:v,alias:v,type:g})):s.add(v)}else d=!1,s.add(v)}y=d}};for(j.s();!(r=j.n()).done;)g()}catch(S){j.e(S)}finally{j.f()}var O=c&&1===c.length&&c[0]||null;if(O){var w,k=Object(a.a)(i);try{for(k.s();!(w=k.n()).done;){var x=w.value;if(x.name===O&&Object(l.p)(x)){x.type="esriFieldTypeOID";break}}}catch(S){k.e(S)}finally{k.f()}}return{fields:i,geometryType:f,hasZ:u,objectIdFieldName:O,objectIdFieldType:t,unknownFields:Array.from(s)}}function P(e,t){return Array.from(j(v(e),t))}},499:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(425),a=r(510),i=r(144);function o(){o=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,i){var o=new RegExp(e,n);return t.set(o,i||t.get(e)),Object(a.a)(o,r.prototype)}function s(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){return t[r]=e[n[r]],t}),Object.create(null))}return Object(i.a)(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);return r&&(r.groups=s(r,this)),r},r.prototype[Symbol.replace]=function(r,a){if("string"==typeof a){var i=t.get(this);return e[Symbol.replace].call(this,r,a.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+i[t]})))}if("function"==typeof a){var o=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=Object(n.a)(e[e.length-1])&&(e=[].slice.call(e)).push(s(e,o)),a.apply(this,e)}))}return e[Symbol.replace].call(this,r,a)},o.apply(this,arguments)}},854:function(e,t,r){"use strict";r.d(t,"a",(function(){return x})),r.d(t,"b",(function(){return k})),r.d(t,"c",(function(){return S})),r.d(t,"d",(function(){return I})),r.d(t,"e",(function(){return R})),r.d(t,"f",(function(){return P})),r.d(t,"g",(function(){return G})),r.d(t,"h",(function(){return E})),r.d(t,"i",(function(){return q})),r.d(t,"j",(function(){return N}));var n=r(60),a=r(5),i=r(499),o=r(155),s=r(154),u=r.n(s),c=(r(177),r(186)),l=r(159),p=r(156),d=r(146),f=r(182),y=r(318),b=r(188),v=r(724),h=r(485),j=r(386),m=r(329),g=r(544),O=r(185),w=p.a.getLogger("esri.layers.graphics.sources.ogcfeature"),k="http://www.opengis.net/def/crs/",x="".concat(k,"OGC/1.3/CRS84");function S(e,t){return F.apply(this,arguments)}function F(){return F=Object(o.a)(u.a.mark((function e(t,r){var i,o,s,p,f,y,b,v,O,k,x,S,F,I,T,R,C,P,D,G,M,E=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=E.length>2&&void 0!==E[2]?E[2]:{},o=E.length>3&&void 0!==E[3]?E[3]:5,s=t.links,p=J(s,"items","application/geo+json")||J(s,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json"),!Object(d.j)(p)){e.next=5;break}throw new l.a("ogc-feature-layer:missing-items-page","Missing items url");case 5:return e.next=7,Object(c.default)(p.href,{signal:i.signal,query:Object(a.a)(Object(a.a)({limit:o},i.customParameters),{},{token:i.apiKey}),headers:{accept:"application/geo+json"}});case 7:return f=e.sent,y=f.data,e.next=11,Object(h.d)(y);case 11:if(b=Object(h.c)(y,{geometryType:r.geometryType}),v=r.fields||b.fields||[],O=null!=r.hasZ?r.hasZ:b.hasZ,k=b.geometryType,x=r.objectIdField||b.objectIdFieldName||"OBJECTID",S=r.timeInfo,F=v.find((function(e){return e.name===x}))){e.next=20;break}if(b.objectIdFieldType){e.next=17;break}throw new l.a("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");case 17:v.unshift({name:x,alias:x,type:"esriFieldTypeOID",editable:!1,nullable:!1}),e.next=21;break;case 20:F.type="esriFieldTypeOID",F.editable=!1,F.nullable=!1;case 21:x!==b.objectIdFieldName&&(I=v.find((function(e){return e.name===b.objectIdFieldName})))&&(I.type="esriFieldTypeInteger"),v===b.fields&&b.unknownFields.length>0&&w.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:b.unknownFields}}),T=Object(n.a)(v),e.prev=24,T.s();case 26:if((R=T.n()).done){e.next=34;break}if(null==(C=R.value).name&&(C.name=C.alias),null==C.alias&&(C.alias=C.name),"esriFieldTypeOID"!==C.type&&"esriFieldTypeGlobalID"!==C.type&&(C.editable=null==C.editable||!!C.editable,C.nullable=null==C.nullable||!!C.nullable),C.name){e.next=30;break}throw new l.a("ogc-feature-layer:invalid-field-name","field name is missing",{field:C});case 30:if(g.a.jsonValues.includes(C.type)){e.next=32;break}throw new l.a("ogc-feature-layer:invalid-field-type",'invalid type for field "'.concat(C.name,'"'),{field:C});case 32:e.next=26;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(24),T.e(e.t0);case 39:return e.prev=39,T.f(),e.finish(39);case 42:return S&&(P=new m.a(v),S.startTimeField&&((D=P.get(S.startTimeField))?(S.startTimeField=D.name,D.type="esriFieldTypeDate"):S.startTimeField=null),S.endTimeField&&((G=P.get(S.endTimeField))?(S.endTimeField=G.name,G.type="esriFieldTypeDate"):S.endTimeField=null),S.trackIdField&&((M=P.get(S.trackIdField))?S.trackIdField=M.name:(S.trackIdField=null,w.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:S}}))),S.startTimeField||S.endTimeField||(w.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:S}}),S=null)),e.abrupt("return",{drawingInfo:k?Object(j.d)(k):null,geometryType:k,fields:v,hasZ:!!O,objectIdField:x,timeInfo:S});case 44:case"end":return e.stop()}}),e,null,[[24,36,39,42]])}))),F.apply(this,arguments)}function I(e){return T.apply(this,arguments)}function T(){return T=Object(o.a)(u.a.mark((function e(t){var r,n,i,o,s,p,f,y,b=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=b.length>1&&void 0!==b[1]?b[1]:{},n=t.links,i=J(n,"data","application/json")||J(n,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json"),!Object(d.j)(i)){e.next=4;break}throw new l.a("ogc-feature-layer:missing-collections-page","Missing collections url");case 4:return o=r.apiKey,s=r.customParameters,p=r.signal,e.next=9,Object(c.default)(i.href,{signal:p,headers:{accept:"application/json"},query:Object(a.a)(Object(a.a)({},s),{},{token:o})});case 9:return f=e.sent,y=f.data,e.abrupt("return",y);case 12:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function R(e){return C.apply(this,arguments)}function C(){return C=Object(o.a)(u.a.mark((function e(t){var r,n,i,o,s,p,f,y,b=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=b.length>1&&void 0!==b[1]?b[1]:{},n=t.links,i=J(n,"conformance","application/json")||J(n,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json"),!Object(d.j)(i)){e.next=4;break}throw new l.a("ogc-feature-layer:missing-conformance-page","Missing conformance url");case 4:return o=r.apiKey,s=r.customParameters,p=r.signal,e.next=9,Object(c.default)(i.href,{signal:p,headers:{accept:"application/json"},query:Object(a.a)(Object(a.a)({},s),{},{token:o})});case 9:return f=e.sent,y=f.data,e.abrupt("return",y);case 12:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function P(e){return D.apply(this,arguments)}function D(){return D=Object(o.a)(u.a.mark((function e(t){var r,n,i,o,s,l,p=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:{},n=r.apiKey,i=r.customParameters,o=r.signal,e.next=6,Object(c.default)(t,{signal:o,headers:{accept:"application/json"},query:Object(a.a)(Object(a.a)({},i),{},{token:n})});case 6:return s=e.sent,l=s.data,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function G(e){return M.apply(this,arguments)}function M(){return M=Object(o.a)(u.a.mark((function e(t){var r,n,i,o,s,l,p,f,y=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.length>1&&void 0!==y[1]?y[1]:{},n="application/vnd.oai.openapi+json;version=3.0",i=J(t.links,"service-desc",n),!Object(d.j)(i)){e.next=4;break}return e.abrupt("return",(w.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null));case 4:return o=r.apiKey,s=r.customParameters,l=r.signal,e.next=9,Object(c.default)(i.href,{signal:l,headers:{accept:n},query:Object(a.a)(Object(a.a)({},s),{},{token:o})});case 9:return p=e.sent,f=p.data,e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function E(e){var t,r=null===(t=Object(i.a)(/^http:\/\/www\.opengis.net\/def\/crs\/(.*)\/(.*)\/(.*)$/i,{authority:1,version:2,code:3}).exec(e))||void 0===t?void 0:t.groups;if(!r)return null;var n=r.authority,a=r.code;switch(n.toLowerCase()){case"ogc":switch(a.toLowerCase()){case"crs27":return O.a.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return O.a.WGS84.wkid;default:return null}case"esri":case"epsg":var o=Number.parseInt(a,10);return Number.isNaN(o)?null:o;default:return null}}function q(e,t,r){return A.apply(this,arguments)}function A(){return(A=Object(o.a)(u.a.mark((function e(t,r,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,r,n);case 2:return a=e.sent,e.abrupt("return",Object(b.j)(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,r){return Q.apply(this,arguments)}function Q(){return Q=Object(o.a)(u.a.mark((function e(t,r,i){var o,s,p,j,m,g,w,k,x,S,F,I,T,R,C,P,D,G,M,E,q,A,N,Q,L,H,z,U,K,$,V,Y,X,ee,te,re,ne,ae,ie,oe,se,ue;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.capabilities.query.maxRecordCount,s=t.collection,p=t.layerDefinition,j=t.queryParameters,m=j.apiKey,g=j.customParameters,w=t.spatialReference,k=t.supportedCrs,x=s.links,S=J(x,"items","application/geo+json")||J(x,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json"),!Object(d.j)(S)){e.next=3;break}throw new l.a("ogc-feature-layer:missing-items-page","Missing items url");case 3:if(F=r.geometry,I=r.num,T=r.start,R=r.timeExtent,C=r.where,!r.objectIds){e.next=6;break}throw new l.a("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");case 6:return P=O.a.fromJSON(w),D=Object(d.r)(r.outSpatialReference,P),G=D.isWGS84?null:_(D,k),M=W(F,k),E=B(R),q=Z(C),A=null!==I&&void 0!==I?I:null!=T&&void 0!==T?10:o,e.next=15,Object(c.default)(S.href,Object(a.a)(Object(a.a)({},i),{},{query:Object(a.a)(Object(a.a)(Object(a.a)({},g),M),{},{crs:G,datetime:E,query:q,limit:A,startindex:T,token:m}),headers:{accept:"application/geo+json"}}));case 15:if(N=e.sent,Q=N.data,L=!1,Q.links&&(H=Q.links.find((function(e){return"next"===e.rel})),L=!!H),!L&&Number.isInteger(Q.numberMatched)&&Number.isInteger(Q.numberReturned)&&(L=Q.numberReturned<Q.numberMatched),z=p.fields,U=p.globalIdField,K=p.hasM,$=p.hasZ,V=p.objectIdField,Y=p.geometryType,X=Object(h.a)(Q,{geometryType:Y,hasZ:$,objectIdField:V}),!G&&D.isWebMercator){ee=Object(n.a)(X);try{for(ee.s();!(te=ee.n()).done;)re=te.value,Object(d.k)(re.geometry)&&((ne=Object(b.k)(re.geometry,Y,$,!1)).spatialReference=O.a.WGS84,re.geometry=Object(b.d)(Object(y.d)(ne,D)))}catch(u){ee.e(u)}finally{ee.f()}}ae=Object(n.a)(X);try{for(ae.s();!(ie=ae.n()).done;)(oe=ie.value).objectId=oe.attributes[V]}catch(u){ae.e(u)}finally{ae.f()}return se=G||!G&&D.isWebMercator?D.toJSON():f.b,ue=new v.a,e.abrupt("return",(ue.exceededTransferLimit=L,ue.features=X,ue.fields=z,ue.geometryType=Y,ue.globalIdFieldName=U,ue.hasM=K,ue.hasZ=$,ue.objectIdFieldName=V,ue.spatialReference=se,ue));case 26:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function _(e,t){var r,n,a,i=e.isWebMercator;if(!e.wkid)return null;var o=i?null!==(r=null!==(n=null!==(a=t[3857])&&void 0!==a?a:t[102100])&&void 0!==n?n:t[102113])&&void 0!==r?r:t[900913]:t[e.wkid];return o?"".concat(k).concat(o):null}function L(e){if(Object(d.j)(e))return"";var t=e.xmin,r=e.ymin,n=e.xmax,a=e.ymax;return"".concat(t,",").concat(r,",").concat(n,",").concat(a)}function B(e){if(Object(d.j)(e))return null;var t=e.start,r=e.end;return"".concat(Object(d.k)(t)?t.toISOString():"..","/").concat(Object(d.k)(r)?r.toISOString():"..")}function Z(e){return Object(d.j)(e)||!e||"1=1"===e?null:e}function W(e,t){if(!function(e){return Object(d.k)(e)&&"extent"===e.type}(e))return null;var r=e.spatialReference;if(!r||r.isWGS84)return{bbox:L(e)};var n=_(r,t);return Object(d.k)(n)?{bbox:L(e),"bbox-crs":n}:r.isWebMercator?{bbox:L(Object(y.d)(e,O.a.WGS84))}:null}function J(e,t,r){return e.find((function(e){return e.rel===t&&e.type===r}))||e.find((function(e){return e.rel===t&&!e.type}))}}}]);