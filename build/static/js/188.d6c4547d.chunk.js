(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[188],{1333:function(e,r,t){"use strict";t.r(r),t.d(r,"createLabelFunction",(function(){return x})),t.d(r,"formatField",(function(){return g}));var n=t(60),a=t(155),u=t(154),i=t.n(u),c=t(159),l=t(156),s=t(476),o=t(492),p=t(238),f=t(823),b=t(260),d=l.a.getLogger("esri.layers.support.labelFormatUtils"),v={type:"simple",evaluate:function(){return null}},h={getAttribute:function(e,r){return e.field(r)}};function x(e,r,t){return y.apply(this,arguments)}function y(){return y=Object(a.a)(i.a.mark((function e(r,n,a){var u,l,s,o,p,x,y;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&r.symbol){e.next=2;break}return e.abrupt("return",v);case 2:if(u=r.where,l=Object(f.b)(r),!u){e.next=10;break}return e.next=7,t.e(4).then(t.bind(null,433));case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=null;case 11:if(s=e.t0,"arcade"!==l.type){e.next=19;break}return e.next=15,Object(b.c)(l.expression,a,n);case 15:p=e.sent,o={type:"arcade",evaluate:function(e){try{var r=p.evaluate({$feature:"attributes"in e?p.repurposeFeature(e):e});if(null!=r)return r.toString()}catch(a){d.error(new c.a("arcade-expression-error","Encountered an error when evaluating label expression for feature",{feature:e,expression:l}))}return null},needsHydrationToEvaluate:function(){return null==Object(f.e)(l.expression)}},e.next=20;break;case 19:o={type:"simple",evaluate:function(e){return l.expression.replace(/{[^}]*}/g,(function(r){var t=r.slice(1,-1),a=n.get(t);if(!a)return r;var u=null;return"attributes"in e?e&&e.attributes&&(u=e.attributes[a.name]):u=e.field(a.name),null==u?"":g(u,a)}))}};case 20:if(!u){e.next=30;break}e.prev=21,x=s.WhereClause.create(u,n),e.next=28;break;case 25:return e.prev=25,e.t1=e.catch(21),e.abrupt("return",(d.error(new c.a("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:u,error:e.t1})),v));case 28:y=o.evaluate,o.evaluate=function(e){var r="attributes"in e?void 0:h;try{if(x.testFeature(e,r))return y(e)}catch(t){d.error(new c.a("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:u,feature:e,error:t}))}return null};case 30:return e.abrupt("return",o);case 31:case"end":return e.stop()}}),e,null,[[21,25]])}))),y.apply(this,arguments)}function g(e,r){if(null==e)return"";var t=r.domain;if(t)if("codedValue"===t.type||"coded-value"===t.type){var a,u=e,i=Object(n.a)(t.codedValues);try{for(i.s();!(a=i.n()).done;){var c=a.value;if(c.code===u)return c.name}}catch(v){i.e(v)}finally{i.f()}}else if("range"===t.type){var l=+e,f="range"in t?t.range[0]:t.minValue,b="range"in t?t.range[1]:t.maxValue;if(f<=l&&l<=b)return t.name}var d=e;return"date"===r.type||"esriFieldTypeDate"===r.type?d=Object(s.b)(d,Object(s.a)("short-date")):Object(p.p)(r)&&(d=Object(o.b)(+d)),d||""}}}]);