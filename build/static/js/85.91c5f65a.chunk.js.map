{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js","../node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js","../node_modules/@babel/runtime/helpers/esm/wrapRegExp.js","../node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js","../node_modules/@arcgis/core/layers/ogc/xmlUtils.js","../node_modules/@arcgis/core/layers/ogc/dateUtils.js","../node_modules/@arcgis/core/layers/ogc/wfsUtils.js"],"names":["E","this","_queryEngine","_customParameters","_snapshotFeatures","e","a","t","objectIdField","d","_getFeatureUrl","_featureType","typeName","_getFeatureOutputFormat","customParameters","dateFields","fieldsIndex","map","name","signal","s","g","i","_","geometryType","hasZ","n","spatialReference","u","r","geometry","p","c","h","o","f","_fieldsIndex","attributes","objectId","destroy","getFeatureUrl","getFeatureOutputFormat","fields","featureType","w","_checkProjection","l","hasM","timeInfo","featureStore","y","m","addMany","extent","fullExtent","_waitSnapshotComplete","executeQuery","executeQueryForCount","executeQueryForIds","executeQueryForExtent","executeQueryForSnapping","_snapshotTask","abort","promise","then","clear","getLogger","error","finished","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","type","features","coordinates","properties","id","length","push","F","j","S","M","P","b","G","lengths","coords","k","O","data","crs","code","RegExp","test","T","Set","Object","keys","filter","has","delete","add","alias","objectIdFieldName","objectIdFieldType","unknownFields","Array","from","L","_wrapRegExp","re","groups","BabelRegExp","_super","prototype","_groups","WeakMap","flags","_this","set","get","buildGroups","result","reduce","create","exec","str","call","Symbol","replace","substitution","args","arguments","slice","apply","description","globalId","success","uniqueId","message","details","field","originalValue","sanitizedValue","editable","requiredFields","parseFloat","String","TypeError","simplify","children","localName","year","month","day","hours","minutes","seconds","ms","padEnd","substring","isUTC","Date","UTC","offsetSign","offsetHours","offsetMinutes","getTime","Number","isNaN","x","C","N","A","v","U","D","I","responseType","query","SERVICE","REQUEST","VERSION","$","te","firstElementChild","getAttribute","ne","ae","FeatureTypeList","FeatureType","title","namespacePrefix","namespaceUri","supportedSpatialReferences","parseInt","textContent","match","wkid","Name","prefix","lookupNamespaceURI","Abstract","Title","WGS84BoundingBox","split","xmin","ymin","xmax","ymax","V","DefaultSRS","DefaultCRS","OtherSRS","OtherCRS","operations","featureTypes","readFeatureTypes","GetCapabilities","url","DescribeFeatureType","GetFeature","outputFormat","supportsPagination","OperationsMetadata","Operation","DCP","HTTP","Get","Parameter","AllowedValues","Value","toLowerCase","Constraint","DefaultValue","W","X","Y","q","swapXY","geometryField","WGS84","wfsCapabilities","next","value","J","errors","z","find","unshift","Promise","all","K","count","Z","fromJSON","toFixed","Q","TYPENAME","element","complexType","complexContent","extension","sequence","hasAttribute","simpleType","restriction","maxLength","nullable","XMLSerializer","serializeToString","H","B","document","JSON","parse","response","TYPENAMES","OUTPUTFORMAT","SRSNAME","STARTINDEX","startIndex","COUNT","DOMParser","parseFromString","trim","Exception","ExceptionText"],"mappings":"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","file":"static/js/85.91c5f65a.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Logger.js\";import{isSome as r,unwrap as s}from\"../../../core/maybe.js\";import{throwIfAborted as a,createTask as i,isAbortError as o}from\"../../../core/promiseUtils.js\";import{equals as n,WGS84 as u}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as p,convertToGeometry as h}from\"../featureConversionUtils.js\";import y from\"../data/FeatureStore.js\";import{project as c,checkProjectionSupport as m}from\"../data/projectionSupport.js\";import{QueryEngine as l}from\"../data/QueryEngine.js\";import{validateGeoJSON as g,createOptimizedFeatures as _}from\"./geojson/geojson.js\";import{mixAttributes as f}from\"./support/sourceUtils.js\";import{getFeature as d}from\"../../ogc/wfsUtils.js\";import w from\"../../support/FieldsIndex.js\";class E{constructor(){this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=async e=>{const{objectIdField:t}=this._queryEngine,s=await d(this._getFeatureUrl,this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map((e=>e.name)),signal:e});await g(s),a(e);const i=_(s,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:t});if(!n(this._queryEngine.spatialReference,u))for(const a of i)r(a.geometry)&&(a.geometry=p(c(h(a.geometry,this._queryEngine.geometryType,!1,!1),u,this._queryEngine.spatialReference)));let o=1;for(const r of i){const e={};f(this._fieldsIndex,e,r.attributes,!0),r.attributes=e,null==r.attributes[t]&&(r.objectId=r.attributes[t]=o++)}return i}}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,t){const{getFeatureUrl:r,getFeatureOutputFormat:i,spatialReference:o,fields:n,geometryType:u,featureType:p,objectIdField:h,customParameters:c}=e;this._featureType=p,this._customParameters=c,this._getFeatureUrl=r,this._getFeatureOutputFormat=i,this._fieldsIndex=new w(n),await this._checkProjection(o),a(t),this._queryEngine=new l({fields:n,geometryType:u,hasM:!1,hasZ:!1,objectIdField:h,spatialReference:o,timeInfo:null,featureStore:new y({geometryType:u,hasM:!1,hasZ:!1})});const m=await this._snapshotFeatures(s(t.signal));return this._queryEngine.featureStore.addMany(m),{extent:this._queryEngine.fullExtent}}async applyEdits(){throw new e(\"wfs-source:editing-not-supported\",\"applyEdits() is not supported on WFSLayer\")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(r){return this._customParameters=r,this._snapshotTask?.abort(),this._snapshotTask=i(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(r=>{this._queryEngine.featureStore.clear(),o(r)||t.getLogger(\"esri.layers.WFSLayer\").error(new e(\"wfs-layer:getfeature-error\",\"An error occurred during the GetFeature request\",{error:r}))})),await this._waitSnapshotComplete(),{extent:this._queryEngine.fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _checkProjection(t){try{await m(u,t)}catch{throw new e(\"unsupported-projection\",\"Projection not supported\",{spatialReference:t})}}}export{E as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{OptimizedFeature as t}from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";import{isNumericField as o}from\"../../../support/fieldUtils.js\";const r={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function i(e){return r[e]}function*s(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*c(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*u(e,o={}){const{geometryType:r,objectIdField:s}=o;for(const c of e){const{geometry:e,properties:u,id:l}=c;if(e&&i(e.type)!==r)continue;const f=u||{};let a=f[s]??null;s&&null!=l&&!f[s]&&(f[s]=a=l);const y=new t(e?d(new n,e,o):null,f,null,a);yield y}}function l(e){for(const t of e)if(t.length>2)return!0;return!1}function f(e){return!y(e)}function a(e){return y(e)}function y(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function p(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function d(e,t,n){switch(t.type){case\"LineString\":return g(e,t,n);case\"MultiLineString\":return m(e,t,n);case\"MultiPoint\":return h(e,t,n);case\"MultiPolygon\":return w(e,t,n);case\"Point\":return P(e,t,n);case\"Polygon\":return b(e,t,n)}}function g(e,t,n){return F(e,t.coordinates,n),e}function m(e,t,n){for(const o of t.coordinates)F(e,o,n);return e}function h(e,t,n){return F(e,t.coordinates,n),e}function w(e,t,n){for(const o of t.coordinates){j(e,o[0],n);for(let t=1;t<o.length;t++)S(e,o[t],n)}return e}function P(e,t,n){return M(e,t.coordinates,n),e}function b(e,t,n){const o=t.coordinates;j(e,o[0],n);for(let r=1;r<o.length;r++)S(e,o[r],n);return e}function j(e,t,n){const o=p(t);f(o)?G(e,o,n):F(e,o,n)}function S(e,t,n){const o=p(t);a(o)?G(e,o,n):F(e,o,n)}function F(e,t,n){for(const o of t)M(e,o,n);e.lengths.push(t.length)}function G(e,t,n){for(let o=t.length-1;o>=0;o--)M(e,t[o],n);e.lengths.push(t.length)}function M(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function k(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function O(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:\"EPSG\"===n.type?n.properties.code:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function T(e,t={}){const n=[],r=new Set,u=new Set;let f,a=!1,y=null,p=!1,{geometryType:d=null}=t,g=!1;for(const o of s(e)){const{geometry:e,properties:t,id:s}=o;if(!e||(d||(d=i(e.type)),i(e.type)===d)){if(!a){a=l(c(e))}if(p||(p=null!=s,p&&(f=typeof s,y=Object.keys(t).filter((e=>t[e]===s)))),p&&null!=s&&(y.length>1?y=y.filter((e=>t[e]===s)):1===y.length&&(y=t[y[0]]===s?y:[])),!g&&t){let e=!0;for(const o in t){if(r.has(o))continue;const i=t[o];if(null==i){e=!1,u.add(o);continue}const s=k(i);\"unknown\"!==s?(u.delete(o),r.add(o),n.push({name:o,alias:o,type:s})):u.add(o)}g=e}}}const m=y&&1===y.length&&y[0]||null;if(m)for(const i of n)if(i.name===m&&o(i)){i.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:d,hasZ:a,objectIdFieldName:m,objectIdFieldType:f,unknownFields:Array.from(u)}}function L(e,t){return Array.from(u(s(e),t))}export{L as createOptimizedFeatures,i as getGeometryType,T as inferLayerProperties,O as validateGeoJSON};\n","import _typeof from \"./typeof.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport inherits from \"./inherits.js\";\nexport default function _wrapRegExp() {\n  _wrapRegExp = function _wrapRegExp(re, groups) {\n    return new BabelRegExp(re, void 0, groups);\n  };\n\n  var _super = RegExp.prototype,\n      _groups = new WeakMap();\n\n  function BabelRegExp(re, flags, groups) {\n    var _this = new RegExp(re, flags);\n\n    return _groups.set(_this, groups || _groups.get(re)), setPrototypeOf(_this, BabelRegExp.prototype);\n  }\n\n  function buildGroups(result, re) {\n    var g = _groups.get(re);\n\n    return Object.keys(g).reduce(function (groups, name) {\n      return groups[name] = result[g[name]], groups;\n    }, Object.create(null));\n  }\n\n  return inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (str) {\n    var result = _super.exec.call(this, str);\n\n    return result && (result.groups = buildGroups(result, this)), result;\n  }, BabelRegExp.prototype[Symbol.replace] = function (str, substitution) {\n    if (\"string\" == typeof substitution) {\n      var groups = _groups.get(this);\n\n      return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) {\n        return \"$\" + groups[name];\n      }));\n    }\n\n    if (\"function\" == typeof substitution) {\n      var _this = this;\n\n      return _super[Symbol.replace].call(this, str, function () {\n        var args = arguments;\n        return \"object\" != _typeof(args[args.length - 1]) && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args);\n      });\n    }\n\n    return _super[Symbol.replace].call(this, str, substitution);\n  }, _wrapRegExp.apply(this, arguments);\n}","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../core/maybe.js\";import{isValid as t}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{sanitizeNullFieldValue as n,validateFieldValue as i,validationErrorToString as r,isNumericField as s,isStringField as o}from\"../../../support/fieldUtils.js\";class l{constructor(){this.code=null,this.description=null}}class u{constructor(e){this.error=new l,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function a(e){return new u(e)}class c{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function f(e){return new c(e)}const d=new Set;function m(e,t,n,s=!1,o){d.clear();for(const l in n){const u=e.get(l);if(!u)continue;const c=n[l],f=p(u,c);if(f!==c&&o&&o.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:u,originalValue:c,sanitizedValue:f}}),d.add(u.name),u&&(s||u.editable)){const e=i(u,f);if(e)return a(r(e,u,f));t[u.name]=f}}for(const i of e.requiredFields)if(!d.has(i.name))return a(`missing required field \"${i.name}\"`);return null}function p(e,t){let i=t;return\"string\"==typeof t&&s(e)?i=parseFloat(t):null!=t&&o(e)&&\"string\"!=typeof t&&(i=String(t)),n(i)}let h;function g(n,i){if(!n||!t(i))return n;if(\"rings\"in n||\"paths\"in n){if(e(h))throw new TypeError(\"geometry engine not loaded\");return h.simplify(i,n)}return n}async function y(){return e(h)&&(h=await import(\"../../../../geometry/geometryEngineJSON.js\")),h}async function w(e,n){!t(e)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await y()}export{a as createFeatureEditErrorResult,f as createFeatureEditSuccessResult,y as loadGeometryEngine,w as loadGeometryEngineForSimplify,m as mixAttributes,g as simplify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nfunction o(n,c){for(const e of n.children)if(e.localName in c){const n=c[e.localName];if(\"function\"==typeof n){const c=n(e);c&&o(e,c)}else o(e,n)}}function*n(o,c){for(const e of o.children)if(e.localName in c){const o=c[e.localName];\"function\"==typeof o?yield o(e):yield*n(e,o)}}export{n as iterateXML,o as visitXML};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nfunction e(e){return t(e)??n(e)}function n(e){const n=new Date(e).getTime();return Number.isNaN(n)?null:n}function t(e){const n=s.exec(e);if(!n)return null;const t=n.groups,u=+t.year,o=+t.month-1,r=+t.day,f=+(t.hours??\"0\"),i=+(t.minutes??\"0\"),d=+(t.seconds??\"0\");if(f>23)return null;if(i>59)return null;if(d>59)return null;const l=t.ms??\"0\",c=l?+l.padEnd(3,\"0\").substring(0,3):0;let a;if(t.isUTC)a=Date.UTC(u,o,r,f,i,d,c);else if(t.offsetSign){const e=+t.offsetHours,n=+t.offsetMinutes;a=6e4*(\"+\"===t.offsetSign?-1:1)*(60*e+n)+Date.UTC(u,o,r,f,i,d,c)}else a=new Date(u,o,r,f,i,d,c).getTime();return Number.isNaN(a)?null:a}const s=/^(?:(?<year>-?\\d{4,})-(?<month>\\d{2})-(?<day>\\d{2}))(?:T(?<hours>\\d{2}):(?<minutes>\\d{2}):(?<seconds>\\d{2})(?:\\.(?<ms>\\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\\+|-)(?<offsetHours>\\d{2}):(?<offsetMinutes>\\d{2})))?$/;export{e as parseDate,n as parseJSDate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import e from\"../../request.js\";import t from\"../../core/Error.js\";import{find as r,cache as n}from\"../../core/iteratorUtils.js\";import{isNone as a,isSome as o}from\"../../core/maybe.js\";import{eachAlways as s}from\"../../core/promiseUtils.js\";import{isHTTPSProtocol as i,hasSameOrigin as p,toHTTPS as u}from\"../../core/urlUtils.js\";import{initializeProjection as c,project as l}from\"../../geometry/projection.js\";import{WGS84 as m,equals as y}from\"../../geometry/support/spatialReferenceUtils.js\";import{featureGeometryTypeKebabDictionary as f}from\"../../geometry/support/typeUtils.js\";import{getGeometryType as d}from\"../graphics/sources/geojson/geojson.js\";import{parseDate as g}from\"./dateUtils.js\";import{iterateXML as w,visitXML as b}from\"./xmlUtils.js\";import h from\"../support/Field.js\";import T from\"../../geometry/SpatialReference.js\";import F from\"../../geometry/Extent.js\";const S=\"xlink:href\",x=\"2.0.0\",C=\"__esri_wfs_id__\",E=\"wfs-layer:getWFSLayerTypeInfo-error\",N=\"wfs-layer:empty-service\",P=\"wfs-layer:feature-type-not-found\",R=\"wfs-layer:geojson-not-supported\",j=\"wfs-layer:kvp-encoding-not-supported\",A=\"wfs-layer:malformed-json\",G=\"wfs-layer:unknown-geometry-type\",k=\"wfs-layer:unknown-field-type\",v=\"wfs-layer:unsupported-spatial-reference\",U=\"wfs-layer:unsupported-wfs-version\";async function D(t,r){const n=I((await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"GetCapabilities\",VERSION:x,...r?.customParameters},signal:r?.signal})).data);return $(t,n),n}function I(e){const t=te(e);ne(t),ae(t);const r=t.firstElementChild,a=n(M(r));return{operations:L(r),get featureTypes(){return Array.from(a())},readFeatureTypes:a}}const O=new Set([\"json\",\"application/json\",\"geojson\",\"application/json; subtype=geojson\"]);function L(e){let r=!1;const n={GetCapabilities:{url:\"\"},DescribeFeatureType:{url:\"\"},GetFeature:{url:\"\",outputFormat:null,supportsPagination:!1}};if(b(e,{OperationsMetadata:{Operation:e=>{switch(e.getAttribute(\"name\")){case\"GetCapabilities\":return{DCP:{HTTP:{Get:e=>{n.GetCapabilities.url=e.getAttribute(S)}}}};case\"DescribeFeatureType\":return{DCP:{HTTP:{Get:e=>{n.DescribeFeatureType.url=e.getAttribute(S)}}}};case\"GetFeature\":return{DCP:{HTTP:{Get:e=>{n.GetFeature.url=e.getAttribute(S)}}},Parameter:e=>{if(\"outputFormat\"===e.getAttribute(\"name\"))return{AllowedValues:{Value:e=>{const t=e.textContent;O.has(t.toLowerCase())&&(n.GetFeature.outputFormat=t)}}}}}}},Constraint:e=>{switch(e.getAttribute(\"name\")){case\"KVPEncoding\":return{DefaultValue:e=>{r=\"true\"===e.textContent.toLowerCase()}};case\"ImplementsResultPaging\":return{DefaultValue:e=>{n.GetFeature.supportsPagination=\"true\"===e.textContent.toLowerCase()}}}}}}),!r)throw new t(j,\"WFS service doesn't support key/value pair (KVP) encoding\");if(a(n.GetFeature.outputFormat))throw new t(R,\"WFS service doesn't support GeoJSON output format\");return n}function $(e,t){i(e)&&(p(e,t.operations.DescribeFeatureType.url,!0)&&(t.operations.DescribeFeatureType.url=u(t.operations.DescribeFeatureType.url)),p(e,t.operations.GetFeature.url,!0)&&(t.operations.GetFeature.url=u(t.operations.GetFeature.url)))}function M(e){return w(e,{FeatureTypeList:{FeatureType:e=>{const t={typeName:\"undefined:undefined\",name:\"\",title:\"\",description:\"\",extent:null,namespacePrefix:\"\",namespaceUri:\"\",supportedSpatialReferences:[]},r=new Set([4326]),n=e=>{const t=parseInt(e.textContent.match(/(?<wkid>\\d+$)/i)?.groups?.wkid,10);Number.isNaN(t)||r.add(t)};return b(e,{Name:e=>{const{name:r,prefix:n}=re(e.textContent);t.typeName=`${n}:${r}`,t.name=r,t.namespacePrefix=n,t.namespaceUri=e.lookupNamespaceURI(n)},Abstract:e=>{t.description=e.textContent},Title:e=>{t.title=e.textContent},WGS84BoundingBox:e=>{t.extent=V(e)},DefaultSRS:n,DefaultCRS:n,OtherSRS:n,OtherCRS:n}),t.title||(t.title=t.name),t.supportedSpatialReferences.push(...r),t}}})}function V(e){let t,r,n,a;for(const o of e.children)switch(o.localName){case\"LowerCorner\":[t,r]=o.textContent.split(\" \").map((e=>Number.parseFloat(e)));break;case\"UpperCorner\":[n,a]=o.textContent.split(\" \").map((e=>Number.parseFloat(e)))}return{xmin:t,ymin:r,xmax:n,ymax:a,spatialReference:m}}function W(e,t,n){return r(e,(e=>n?e.name===t&&e.namespaceUri===n:e.typeName===t||e.name===t))}async function X(e,t,r,n={}){const{featureType:a,extent:o}=await Y(e,t,r,n),{fields:s,geometryType:i,swapXY:p,objectIdField:u,geometryField:c}=await q(e,a.typeName,n);return{url:e.operations.GetCapabilities.url,name:a.name,namespaceUri:a.namespaceUri,fields:s,geometryField:c,geometryType:i,objectIdField:u,spatialReference:n.spatialReference??T.WGS84,extent:o,swapXY:p,wfsCapabilities:e,customParameters:n.customParameters}}async function Y(e,r,n,o={}){const{spatialReference:s=T.WGS84}=o,i=e.readFeatureTypes(),p=r?W(i,r,n):i.next().value;if(a(p))throw r?new t(P,`The type '${r}' could not be found in the service`):new t(N,\"The service is empty\");let u=new F({...p.extent,spatialReference:s});if(!y(s,m))try{await c(m,s,void 0,o),u=l(u,m)}catch{throw new t(v,\"Projection not supported\")}return{extent:u,spatialReference:s,featureType:p}}async function q(e,r,n={}){const[o,i]=await s([J(e.operations.DescribeFeatureType.url,r,n),_(e,r,n)]);if(o.error||i.error)throw new t(E,`An error occurred while getting info about the feature type '${r}'`,{error:o.error||i.error});const{fields:p,errors:u}=o.value,c=o.value.geometryType||i.value.geometryType,l=i.value.swapXY;if(a(c))throw new t(G,`The geometry type could not be determined for type '${r}`,{typeName:r,geometryType:c,fields:p,errors:u});return{...z(p),geometryType:c,swapXY:l}}function z(e){const t=e.find((e=>\"geometry\"===e.type));let r=e.find((e=>\"oid\"===e.type));return e=e.filter((e=>\"geometry\"!==e.type)),r||(r=new h({name:C,type:\"oid\",alias:C}),e.unshift(r)),{geometryField:t?.name??null,objectIdField:r.name,fields:e}}async function _(t,r,n={}){let a,o=!1;const[s,i]=await Promise.all([K(t.operations.GetFeature.url,r,t.operations.GetFeature.outputFormat,{...n,count:1}),e(t.operations.GetFeature.url,{responseType:\"text\",query:Z(r,void 0,{...n,count:1}),signal:n?.signal})]),p=\"FeatureCollection\"===s.type&&s.features[0]?.geometry;if(p){let e;switch(a=f.fromJSON(d(p.type)),p.type){case\"Point\":e=p.coordinates;break;case\"LineString\":case\"MultiPoint\":e=p.coordinates[0];break;case\"MultiLineString\":case\"Polygon\":e=p.coordinates[0][0];break;case\"MultiPolygon\":e=p.coordinates[0][0][0]}const t=/<[^>]*pos[^>]*> *(-?\\d+(?:\\.\\d+)?) (-?\\d+(?:\\.\\d+)?)/.exec(i.data);if(t){const r=e[0].toFixed(3),n=e[1].toFixed(3),a=parseFloat(t[1]).toFixed(3);r===parseFloat(t[2]).toFixed(3)&&n===a&&(o=!0)}}return{geometryType:a,swapXY:o}}async function J(t,r,n){return Q(r,(await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"DescribeFeatureType\",VERSION:x,TYPENAME:r,...n?.customParameters},signal:n?.signal})).data)}function Q(e,n){const{name:a}=re(e),s=te(n);ae(s);const i=r(w(s.firstElementChild,{element:e=>({name:e.getAttribute(\"name\"),typeName:re(e.getAttribute(\"type\")).name})}),(({name:e})=>e===a));if(o(i)){const e=r(w(s.firstElementChild,{complexType:e=>e}),(e=>e.getAttribute(\"name\")===i.typeName));if(o(e))return B(e)}throw new t(P,`Type '${e}' not found in document`,{document:(new XMLSerializer).serializeToString(s)})}const H=new Set([\"objectid\",\"fid\"]);function B(e){const r=[],n=[];let a;const o=w(e,{complexContent:{extension:{sequence:{element:e=>e}}}});for(const s of o){const o=s.getAttribute(\"name\");if(!o)continue;let i,p;if(s.hasAttribute(\"type\")?i=re(s.getAttribute(\"type\")).name:b(s,{simpleType:{restriction:e=>(i=re(e.getAttribute(\"base\")).name,{maxLength:e=>{p=+e.getAttribute(\"value\")}})}}),!i)continue;const u=\"true\"===s.getAttribute(\"nillable\");let c=!1;switch(i.toLowerCase()){case\"integer\":case\"nonpositiveinteger\":case\"negativeinteger\":case\"long\":case\"int\":case\"short\":case\"byte\":case\"nonnegativeinteger\":case\"unsignedlong\":case\"unsignedint\":case\"unsignedshort\":case\"unsignedbyte\":case\"positiveinteger\":n.push(new h({name:o,alias:o,type:\"integer\",nullable:u}));break;case\"float\":case\"double\":case\"decimal\":n.push(new h({name:o,alias:o,type:\"double\",nullable:u}));break;case\"boolean\":case\"string\":case\"gyearmonth\":case\"gyear\":case\"gmonthday\":case\"gday\":case\"gmonth\":case\"anyuri\":case\"qname\":case\"notation\":case\"normalizedstring\":case\"token\":case\"language\":case\"idrefs\":case\"entities\":case\"nmtoken\":case\"nmtokens\":case\"name\":case\"ncname\":case\"id\":case\"idref\":case\"entity\":case\"duration\":case\"time\":n.push(new h({name:o,alias:o,type:\"string\",nullable:u,length:p??255}));break;case\"datetime\":case\"date\":n.push(new h({name:o,alias:o,type:\"date\",nullable:u,length:p??36}));break;case\"pointpropertytype\":a=\"point\",c=!0;break;case\"multipointpropertytype\":a=\"multipoint\",c=!0;break;case\"curvepropertytype\":case\"multicurvepropertytype\":case\"multilinestringpropertytype\":a=\"polyline\",c=!0;break;case\"surfacepropertytype\":case\"multisurfacepropertytype\":case\"multipolygonpropertytype\":a=\"polygon\",c=!0;break;case\"geometrypropertytype\":case\"multigeometrypropertytype\":c=!0,r.push(new t(G,`geometry type '${i}' is not supported`,{type:(new XMLSerializer).serializeToString(e)}));break;default:r.push(new t(k,`Unknown field type '${i}'`,{type:(new XMLSerializer).serializeToString(e)}))}c&&n.push(new h({name:o,alias:o,type:\"geometry\",nullable:u}))}for(const t of n)if(\"integer\"===t.type&&!t.nullable&&H.has(t.name.toLowerCase())){t.type=\"oid\";break}return{geometryType:a,fields:n,errors:r}}async function K(r,n,a,o){let{data:s}=await e(r,{responseType:\"text\",query:Z(n,a,o),signal:o?.signal});s=s.replace(/\": +(-?\\d+),(\\d+)(,)?/g,'\": $1.$2$3');try{if(o?.dateFields?.length){const e=new Set(o.dateFields);return JSON.parse(s,((t,r)=>e.has(t)?g(r):r))}return JSON.parse(s)}catch(i){throw new t(A,\"Error while parsing theresponse\",{response:s,error:i})}}function Z(e,t,r){return{SERVICE:\"WFS\",REQUEST:\"GetFeature\",VERSION:x,TYPENAMES:e,OUTPUTFORMAT:t,SRSNAME:\"EPSG:4326\",STARTINDEX:r?.startIndex,COUNT:r?.count,...r?.customParameters}}async function ee(t,r,n){const a=te((await e(t,{responseType:\"text\",query:{SERVICE:\"WFS\",REQUEST:\"GetFeature\",VERSION:x,TYPENAMES:r,RESULTTYPE:\"hits\",...n?.customParameters},signal:n?.signal})).data);ae(a);const o=Number.parseFloat(a.firstElementChild.getAttribute(\"numberMatched\"));return Number.isNaN(o)?0:o}function te(e){return(new DOMParser).parseFromString(e.trim(),\"text/xml\")}function re(e){const[t,r]=e.split(\":\");return{prefix:r?t:\"\",name:r??t}}function ne(e){const r=e.firstElementChild.getAttribute(\"version\");if(r&&r!==x)throw new t(U,`Unsupported WFS version ${r}. Supported version: ${x}`)}function ae(e){let r,n;if(b(e.firstElementChild,{Exception:e=>(r=e.getAttribute(\"exceptionCode\"),{ExceptionText:e=>{n=e.textContent}})}),r)throw new t(`wfs-layer:${r}`,n)}export{C as WFS_OID_FIELD_NAME,J as describeFeatureType,W as findFeatureType,D as getCapabilities,K as getFeature,ee as getFeatureCount,Y as getFeatureTypeInfo,X as getWFSLayerInfo,Q as parseDescribeFeatureTypeResponse,I as parseGetCapabilitiesResponse,z as prepareWFSLayerFields};\n"],"sourceRoot":""}