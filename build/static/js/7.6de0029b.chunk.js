(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[7],{173:function(t,e,i){"use strict";i.d(e,"a",(function(){return M})),i.d(e,"b",(function(){return P})),i.d(e,"c",(function(){return l})),i.d(e,"d",(function(){return _})),i.d(e,"e",(function(){return b})),i.d(e,"f",(function(){return O})),i.d(e,"g",(function(){return k})),i.d(e,"h",(function(){return y})),i.d(e,"i",(function(){return g})),i.d(e,"j",(function(){return x}));var r=i(142),n=i(143),a=i(60),s=i(161),o=i(168),h=i(223);function l(t){var e,i=Object(s.a)(t);return(e=i)&&(Object(o.g)(e)?p(e.rings):Object(o.h)(e)?p(e.paths):Object(o.e)(e)&&d(e.points),c(e)),i}function c(t){if(!t)return null;Object(o.f)(t)?t.y=-t.y:Object(o.g)(t)?f(t.rings):Object(o.h)(t)?f(t.paths):Object(o.e)(t)&&u(t.points)}function u(t){if(t)for(var e=t.length,i=0;i<e;i++)t[i][1]=-t[i][1]}function f(t){if(t){var e,i=Object(a.a)(t);try{for(i.s();!(e=i.n()).done;){u(e.value)}}catch(r){i.e(r)}finally{i.f()}}}function v(t){if(t)for(var e=t.length-1;e>0;--e)t[e][0]-=t[e-1][0],t[e][1]-=t[e-1][1]}function m(t){if(t){var e,i=Object(a.a)(t);try{for(i.s();!(e=i.n()).done;){v(e.value)}}catch(r){i.e(r)}finally{i.f()}}}function d(t){if(t)for(var e=t.length,i=1;i<e;++i)t[i][0]+=t[i-1][0],t[i][1]+=t[i-1][1]}function p(t){if(t){var e,i=Object(a.a)(t);try{for(i.s();!(e=i.n()).done;){d(e.value)}}catch(r){i.e(r)}finally{i.f()}}}function _(t){t&&(c(t),Object(o.g)(t)?m(t.rings):Object(o.h)(t)?m(t.paths):Object(o.e)(t)&&v(t.points))}function y(t){if(t){var e,i=Object(a.a)(t);try{for(i.s();!(e=i.n()).done;){g(e.value)}}catch(r){i.e(r)}finally{i.f()}}}function g(t){t&&t.reverse()}function b(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}function k(t){return!(!t||0===t.length)&&t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]}function O(t){return t[4]}function x(t,e){t[4]=e}var P=function(){function t(e,i,n,a){Object(r.a)(this,t),this.acceptPolygon=i,this.acceptPolyline=n,this.geomUnitsPerPoint=a,this.pathCount=-1,this.pathIndex=-1,this.iteratePath=!1,e&&(Object(o.g)(e)?i&&(this.multiPath=e.rings,this.isClosed=!0):Object(o.h)(e)?n&&(this.multiPath=e.paths,this.isClosed=!1):Object(o.d)(e)&&i&&(this.multiPath=j(e).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length)),this.internalPlacement=new h.a}return Object(n.a)(t,[{key:"next",value:function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var t=this.processPath(this.multiPath[this.pathIndex]);if(t)return t}return this.pathCount=-1,this.pathIndex=-1,this.multiPath=null,null}}]),t}(),M=function(){function t(e,i,n,a){Object(r.a)(this,t),this.inputGeometries=e,this.acceptPolygon=i,this.acceptPolyline=n,this.geomUnitsPerPoint=a,this.pathCount=-1,this.pathIndex=-1,this.iteratePath=!1}return Object(n.a)(t,[{key:"next",value:function(){for(;;){if(!this.multiPath){for(var t=this.inputGeometries.next();t;){if(Object(o.g)(t)?this.acceptPolygon&&(this.multiPath=t.rings,this.isClosed=!0):Object(o.h)(t)?this.acceptPolyline&&(this.multiPath=t.paths,this.isClosed=!1):Object(o.d)(t)&&this.acceptPolygon&&(this.multiPath=j(t).rings,this.isClosed=!0),this.multiPath){this.pathCount=this.multiPath.length,this.pathIndex=-1;break}t=this.inputGeometries.next()}if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;var e=this.processPath(this.multiPath[this.pathIndex]);if(e)return e}this.pathCount=-1,this.pathIndex=-1,this.multiPath=null}}}]),t}();function j(t){return{rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}}},221:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var r=new(i(354).a);function n(t){return r.hasBidiChar(t)?(e="rtl"===r.checkContextual(t)?"IDNNN":"ICNNN",[r.bidiTransform(t,e,"VLYSN"),!0]):[t,!1];var e}},223:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var r=i(142),n=i(143),a=function(){function t(){Object(r.a)(this,t),this.setIdentity()}return Object(n.a)(t,[{key:"getAngle",value:function(){return(null==this.rz||0===this.rz&&1!==this.rz_c&&0!==this.rz_s)&&(this.rz=Math.atan2(this.rz_s,this.rz_c)),this.rz}},{key:"setIdentity",value:function(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rz_c=1,this.rz_s=0}},{key:"setTranslate",value:function(t,e){this.tx=t,this.ty=e}},{key:"setTranslateZ",value:function(t){this.tz=t}},{key:"setRotateCS",value:function(t,e){this.rz=void 0,this.rz_c=t,this.rz_s=e}},{key:"setRotate",value:function(t){this.rz=t,this.rz_c=void 0,this.rz_s=void 0}},{key:"setRotateY",value:function(t){this.ry=t}},{key:"setScale",value:function(t){this.s=t}},{key:"setMeasure",value:function(t){this.m=t}}]),t}()},233:function(t,e,i){"use strict";i.d(e,"a",(function(){return k}));var r=i(60),n=i(142),a=i(143),s=i(290),o=i(255),h=i(222),l=i(184),c=i(218),u=i(171),f=i(313),v=function(){function t(e,i,r,a){Object(n.a)(this,t),this.center=Object(l.b)(e,i),this.centerT=Object(l.a)(),this.halfWidth=r/2,this.halfHeight=a/2,this.width=r,this.height=a}return Object(a.a)(t,[{key:"x",get:function(){return this.center[0]},set:function(t){this.center[0]=t}},{key:"y",get:function(){return this.center[1]},set:function(t){this.center[1]=t}},{key:"blX",get:function(){return this.center[0]+this.halfWidth}},{key:"blY",get:function(){return this.center[1]+this.halfHeight}},{key:"trX",get:function(){return this.center[0]-this.halfWidth}},{key:"trY",get:function(){return this.center[1]-this.halfHeight}},{key:"xmin",get:function(){return this.x-this.halfWidth}},{key:"xmax",get:function(){return this.x+this.halfWidth}},{key:"ymin",get:function(){return this.y-this.halfHeight}},{key:"ymax",get:function(){return this.y+this.halfHeight}},{key:"clone",value:function(){return new t(this.x,this.y,this.width,this.height)}},{key:"serialize",value:function(t){return t.writeF32(this.center[0]),t.writeF32(this.center[1]),t.push(this.width),t.push(this.height),t}},{key:"findCollisionDelta",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=Math.abs(t.centerT[0]-this.centerT[0]),r=Math.abs(t.centerT[1]-this.centerT[1]),n=(t.halfWidth+this.halfWidth+e)/i,a=(t.halfHeight+this.halfHeight+e)/r,s=Math.min(n,a);return Math.log2(s)}},{key:"extend",value:function(t){var e=Math.min(this.xmin,t.xmin),i=Math.min(this.ymin,t.ymin),r=Math.max(this.xmax,t.xmax)-e,n=Math.max(this.ymax,t.ymax)-i,a=e+r/2,s=i+n/2;this.width=r,this.height=n,this.halfWidth=r/2,this.halfHeight=n/2,this.x=a,this.y=s}}],[{key:"deserialize",value:function(e){return new t(e.readF32(),e.readF32(),e.readInt32(),e.readInt32())}}]),t}(),m=Math.PI/180,d=function(){function t(e,i,r,a){Object(n.a)(this,t),this._rotationT=Object(o.a)(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;var s=r.rect,h=new Float32Array(8);e*=a,i*=a;var l=r.code?s.width*a:r.metrics.width,c=r.code?s.height*a:r.metrics.height;h[0]=e,h[1]=i,h[2]=e+l,h[3]=i,h[4]=e,h[5]=i+c,h[6]=e+l,h[7]=i+c,this._data=h,this._setTextureCoords(s),this._scale=a,this._mosaic=r,this.x=e,this.y=i,this.maxOffset=Math.max(e+l,i+c)}return Object(a.a)(t,[{key:"width",get:function(){return this._mosaic.metrics.width*this._scale}},{key:"mosaic",get:function(){return this._mosaic}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t,Object(s.c)(this._rotationT,-t),this._setOffsets(this._data)}},{key:"xTopLeft",get:function(){return this._data[0]}},{key:"yTopLeft",get:function(){return this._data[1]}},{key:"xBottomRight",get:function(){return this._data[6]}},{key:"yBottomRight",get:function(){return this._data[7]}},{key:"texcoords",get:function(){return this._texcoords}},{key:"textureBinding",get:function(){return this._mosaic.textureBinding}},{key:"offsets",get:function(){return this._offsets||this._setOffsets(this._data),this._offsets}},{key:"char",get:function(){return String.fromCharCode(this._mosaic.code)}},{key:"code",get:function(){return this._mosaic.code}},{key:"bounds",get:function(){if(!this._bounds){var t=this._mosaic.metrics,e=t.height,i=t.width*this._scale,r=Math.abs(e)*this._scale,n=new Float32Array(8);n[0]=this.x,n[1]=this.y,n[2]=this.x+i,n[3]=this.y,n[4]=this.x,n[5]=this.y+r,n[6]=this.x+i,n[7]=this.y+r;var a=Object(s.f)(Object(o.a)(),this._rotationT,this._T);Object(o.b)(n,n,a);for(var h=1/0,l=1/0,c=0,u=0,f=0;f<4;f++){var m=n[2*f],d=n[2*f+1];h=Math.min(h,m),l=Math.min(l,d),c=Math.max(c,m),u=Math.max(u,d)}var p=c-h,_=u-l,y=h+p/2,g=l+_/2;this._bounds=new v(y,g,p,_)}return this._bounds}},{key:"setTransform",value:function(t){this._T=t,this._offsets=null}},{key:"_setOffsets",value:function(t){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});var e=this._offsets,i=new Float32Array(8),r=Object(s.f)(Object(o.a)(),this._rotationT,this._T);Object(o.b)(i,t,r),e.upperLeft=Object(u.a)(8*i[0],8*i[1]),e.upperRight=Object(u.a)(8*i[2],8*i[3]),e.lowerLeft=Object(u.a)(8*i[4],8*i[5]),e.lowerRight=Object(u.a)(8*i[6],8*i[7])}},{key:"_setTextureCoords",value:function(t){var e=t.x,i=t.y,r=t.width,n=t.height;this._texcoords={upperLeft:Object(u.a)(e,i),upperRight:Object(u.a)(e+r,i),lowerLeft:Object(u.a)(e,i+n),lowerRight:Object(u.a)(e+r,i+n)}}}]),t}(),p=function(t,e){return{code:0,page:0,sdf:!0,rect:new f.a(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}}},_=function(){function t(e,i,a){Object(n.a)(this,t),this._rotation=0,this._decorate(e,i,a),this.glyphs=e,this.bounds=this._createBounds(e),this.isMultiline=i.length>1,this._hasRotation=0!==a.angle,this._T=this._createGlyphTransform(this.bounds,a);var s,o=Object(r.a)(e);try{for(o.s();!(s=o.n()).done;){s.value.setTransform(this._T)}}catch(h){o.e(h)}finally{o.f()}}return Object(a.a)(t,[{key:"setRotation",value:function(t){if(0!==t||0!==this._rotation){this._rotation=t;var e=this._T,i=Object(s.c)(Object(o.a)(),t);Object(s.f)(e,i,e);var n,a=Object(r.a)(this.glyphs);try{for(a.s();!(n=a.n()).done;){n.value.setTransform(this._T)}}catch(h){a.e(h)}finally{a.f()}}}},{key:"_decorate",value:function(t,e,i){if(i.decoration&&"none"!==i.decoration&&t.length){var n,a=i.scale,s="underline"===i.decoration?30:20,o=t[0].textureBinding,h=Object(r.a)(e);try{for(h.s();!(n=h.n()).done;){var l=n.value,c=l.startX*a,u=l.startY*a,f=(l.width+l.glyphWidthEnd)*a;t.push(new d(c,u+s*a,p(f,o),1))}}catch(v){h.e(v)}finally{h.f()}}}},{key:"boundsT",get:function(){var t=this.bounds,e=Object(h.a)(Object(l.a)(),t.x,t.y);if(Object(h.n)(e,e,this._T),this._hasRotation){var i=Math.max(t.width,t.height);return new v(e[0],e[1],i,i)}return new v(e[0],e[1],t.width,t.height)}},{key:"_createBounds",value:function(t){var e,i=1/0,n=1/0,a=0,s=0,o=Object(r.a)(t);try{for(o.s();!(e=o.n()).done;){var h=e.value;i=Math.min(i,h.xTopLeft),n=Math.min(n,h.yTopLeft),a=Math.max(a,h.xTopLeft+h.width),s=Math.max(s,h.yBottomRight)}}catch(u){o.e(u)}finally{o.f()}var l=a-i,c=s-n;return new v(i+l/2,n+c/2,l,c)}},{key:"_createGlyphTransform",value:function(t,e){var i=m*e.angle,r=Object(o.a)(),n=Object(l.a)();return Object(s.i)(r,r,Object(h.a)(n,e.xOffset,-e.yOffset)),e.isCIM?Object(s.g)(r,r,i):(Object(s.i)(r,r,Object(h.a)(n,t.x,t.y)),Object(s.g)(r,r,i),Object(s.i)(r,r,Object(h.a)(n,-t.x,-t.y))),r}}]),t}(),y=Object(a.a)((function t(e,i,r,a,s,o){Object(n.a)(this,t),this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(i,r)),this.end=Math.max(0,Math.max(i,r)),this.end<e.length&&(this.glyphWidthEnd=e[this.end].metrics.width),this.width=a,this.yMin=s,this.yMax=o})),g=function(t){return 10===t},b=function(t){return 32===t};function k(t,e,i){for(var r=i.scale,n=new Array,a=function(t,e,i){for(var r=new Array,n=1/i.scale,a=i.maxLineWidth*n,s=e?t.length-1:0,o=e?-1:t.length,h=e?-1:1,l=s,c=0,u=0,f=l,v=f,m=0,d=1/0,p=0;l!==o;){var _=t[l],k=_.code,O=_.metrics,x=Math.abs(O.top);if(g(k)||b(k)||(d=Math.min(d,x),p=Math.max(p,x+O.height)),g(k))l!==s&&(r.push(new y(t,f,l-h,c,d,p)),d=1/0,p=0),c=0,f=l+h,v=l+h,u=0;else if(b(k))v=l+h,u=0,m=O.advance,c+=O.advance;else if(c>a){if(v!==f){var P=v-2*h;c-=m,r.push(new y(t,f,P,c-u,d,p)),d=1/0,p=0,f=v,c=u}else r.push(new y(t,f,l-h,c,d,p)),d=1/0,p=0,f=l,v=l,c=0;c+=O.advance,u+=O.advance}else c+=O.advance,u+=O.advance;l+=h}var M=new y(t,f,l-h,c,d,p);return M.start>=0&&M.end<t.length&&r.push(M),r}(t,e,i),s=function(t,e){for(var i=0,r=0;r<t.length;r++){var n=t[r].width;i=Math.max(n,i)}var a="underline"===e.decoration?4:0,s=t[0].yMin;return{x:0,y:s,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+a-s,width:i}}(a,i),o=i.vAlign,h=i.hAlign,l=o===c.b.Baseline?1:0,u=l?0:o-1,f=(1-l)*-s.y+u*(s.height/2)+-26*(l?1:0),v=0;v<a.length;v++){var m=a[v],p=m.start,k=m.end,O=-1*(h+1)*(m.width/2)-3,x=v*i.lineHeight+f-3;a[v].startX=O,a[v].startY=x;for(var P=p;P<=k;P++){var M=t[P];if(!g(M.code)){var j=new d(O+M.metrics.left,x-M.metrics.top,M,r);O+=M.metrics.advance,n.push(j)}}}return new _(n,a,i)}},235:function(t,e,i){"use strict";i.d(e,"a",(function(){return N})),i.d(e,"b",(function(){return E})),i.d(e,"c",(function(){return H})),i.d(e,"d",(function(){return G})),i.d(e,"e",(function(){return q})),i.d(e,"f",(function(){return T}));var r=i(16),n=i(5),a=i(14),s=i(142),o=i(143),h=i(60),l=i(202),c=i(221),u=i(295),f=i(161),v=i(156),m=i(190),d=i(146),p=i(247),_=i(167),y=i(180),g=i(205),b=i(223),k=i(314),O=i(170),x=i(289),P=i(312),M=i(158),j=i(233),S=Math.PI,C=S/2,w=96/72,L=Math.PI/180,I=v.a.getLogger("esri.symbols.cim.CIMSymbolHelper");function T(t){if(!t||!t.type)return null;var e;switch(t.type){case"cim":return t.data;case"web-style":return t;case"simple-marker":e=E.fromSimpleMarker(t);break;case"picture-marker":e=E.fromPictureMarker(t);break;case"simple-line":e=E.fromSimpleLineSymbol(t);break;case"simple-fill":e=E.fromSimpleFillSymbol(t);break;case"picture-fill":e=E.fromPictureFillSymbol(t);break;case"text":e=E.fromTextSymbol(t)}return{type:"CIMSymbolReference",symbol:e}}function A(t,e){switch(e.type){case"CIMSymbolReference":return A(t,e.symbol);case"CIMPointSymbol":t.drawSymbol(e,{x:0,y:0});break;case"CIMLineSymbol":t.drawSymbol(e,{paths:[[[0,0],[0,1]]]});break;case"CIMPolygonSymbol":t.drawSymbol(e,{rings:[[[0,0],[0,1],[0,0]]]});break;case"CIMTextSymbol":t.drawSymbol(e,{x:0,y:0});break;case"CIMVectorMarker":var i=new b.a;t.drawMarker(e,i)}return t.envelope()}function z(t){if(!t)return 0;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAtExtremities":case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementAtRatioPositions":case"CIMMarkerPlacementOnLine":case"CIMMarkerPlacementOnVertices":return Math.abs(t.offset);default:return 0}}function F(t){if(!t)return 0;switch(t.type){case"CIMGeometricEffectArrow":return Math.abs(.5*t.width);case"CIMGeometricEffectBuffer":return Math.abs(t.size);case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(t.length);case"CIMGeometricEffectJog":return Math.abs(.5*t.length);case"CIMGeometricEffectMove":return Math.max(Math.abs(Object(x.f)(t.offsetX)),Math.abs(Object(x.f)(t.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(t.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(t.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return.5*Math.max(Math.abs(t.fromWidth),Math.abs(t.toWidth));case"CIMGeometricEffectWave":return Math.abs(t.amplitude)}}function R(t){if(!t)return 0;var e,i=0,r=Object(h.a)(t);try{for(r.s();!(e=r.n()).done;){i+=F(e.value)}}catch(n){r.e(n)}finally{r.f()}return i}var N=function(){function t(){Object(s.a)(this,t)}return Object(o.a)(t,[{key:"getSymbolInflateSize",value:function(t,e,i,r,n){return t||(t=[0,0,0,0]),e?this._getInflateSize(t,e,i,r,n):t}},{key:"_vectorMarkerBounds",value:function(t,e,i,r){var n=!0,a=Object(y.g)();if(e&&e.markerGraphics){var s,o=Object(h.a)(e.markerGraphics);try{for(o.s();!(s=o.n()).done;){var l=s.value,c=[0,0,0,0];l.geometry&&(Object(g.a)(a,l.geometry),c[0]=0,c[1]=0,c[2]=0,c[3]=0,this.getSymbolInflateSize(c,l.symbol,i,0,r),a[0]+=c[0],a[1]+=c[1],a[2]+=c[2],a[3]+=c[3],n?(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],n=!1):(t[0]=Math.min(t[0],a[0]),t[1]=Math.min(t[1],a[1]),t[2]=Math.max(t[2],a[2]),t[3]=Math.max(t[3],a[3])))}}catch(u){o.e(u)}finally{o.f()}}return t}},{key:"_getInflateSize",value:function(t,e,i,r,n){if(function(t){return void 0!==t.symbolLayers}(e)){var a=this._getLayersInflateSize(t,e.symbolLayers,i,r,n),s=R(e.effects);return s>0&&(a[0]-=s,a[1]-=s,a[2]+=s,a[3]+=s),a}return this._getTextInflatedSize(t,e,n)}},{key:"_getLayersInflateSize",value:function(t,e,i,r,n){var a=!0;if(!e)return t;var s,o=Object(h.a)(e);try{for(o.s();!(s=o.n()).done;){var l=s.value;if(l){var c=[0,0,0,0];switch(l.type){case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":var u=l,f=u.width;u.capStyle===O.q.Square||u.joinStyle===O.s.Miter?f/=1.4142135623730951:f/=2,c[0]=-f,c[1]=-f,c[2]=f,c[3]=f;break;case"CIMCharacterMarker":case"CIMVectorMarker":case"CIMPictureMarker":var v=l;if("CIMVectorMarker"===l.type){var m=l;if(c=this._vectorMarkerBounds(c,m,i,n),m.frame){var p=(m.frame.xmin+m.frame.xmax)/2,_=(m.frame.ymin+m.frame.ymax)/2;c[0]-=p,c[1]-=_,c[2]-=p,c[3]-=_;var g=m.size/(m.frame.ymax-m.frame.ymin);c[0]*=g,c[1]*=g,c[2]*=g,c[3]*=g}}else if("CIMPictureMarker"===l.type){var b=l,k=i.getResource(b.url),M=1;Object(d.k)(k)&&k.height&&(M=k.width/k.height);var j=v.size/2,S=v.size*M*b.scaleX/2;c=[-S,-j,S,j]}else{var C=v.size/2;c=[-C,-C,C,C]}if(v.anchorPoint){var w=void 0,I=void 0;"Absolute"===v.anchorPointUnits?(w=v.anchorPoint.x,I=v.anchorPoint.y):(w=v.anchorPoint.x*(c[2]-c[0]),I=v.anchorPoint.y*(c[3]-c[1])),c[0]-=w,c[1]-=I,c[2]-=w,c[3]-=I}var T=Object(x.f)(v.rotation);if(v.rotateClockwise&&(T=-T),r&&(T-=r),T){var A=L*T,F=Math.cos(A),N=Math.sin(A),E=Object(y.g)([P.c,P.c,-P.c,-P.c]);Object(y.j)(E,[c[0]*F-c[1]*N,c[0]*N+c[1]*F]),Object(y.j)(E,[c[0]*F-c[3]*N,c[0]*N+c[3]*F]),Object(y.j)(E,[c[2]*F-c[1]*N,c[2]*N+c[1]*F]),Object(y.j)(E,[c[2]*F-c[3]*N,c[2]*N+c[3]*F]),c=E}var G=Object(x.f)(v.offsetX),H=Object(x.f)(v.offsetY);if(r){var D=L*r,X=Math.cos(D),B=Math.sin(D),Y=G*B+H*X;G=G*X-H*B,H=Y}c[0]+=G,c[1]+=H,c[2]+=G,c[3]+=H;var U=z(v.markerPlacement);U>0&&(c[0]-=U,c[1]-=U,c[2]+=U,c[3]+=U)}var V=R(l.effects);V>0&&(c[0]-=V,c[1]-=V,c[2]+=V,c[3]+=V),a?(t[0]=c[0],t[1]=c[1],t[2]=c[2],t[3]=c[3],a=!1):(t[0]=Math.min(t[0],c[0]),t[1]=Math.min(t[1],c[1]),t[2]=Math.max(t[2],c[2]),t[3]=Math.max(t[3],c[3]))}}}catch(W){o.e(W)}finally{o.f()}return t}},{key:"_getTextInflatedSize",value:function(t,e,i){var r,n,a=null!==(r=e.height)&&void 0!==r?r:10;if(t[0]=-a/2,t[1]=-a/2,t[2]=a/2,t[3]=a/2,!i)return t;var s=i.get(e);if(!s)return t;var o=s.text,h=s.mosaicItem;if(!h||0===h.glyphMosaicItems.length)return t;var l=Object(k.f)(e.lineGapType,null!==(n=e.lineGap)&&void 0!==n?n:0,a),u=Object(c.a)(o)[1],f=h.glyphMosaicItems,v=Object(j.a)(f,u,{scale:a/M.u,angle:Object(x.f)(e.angle),xOffset:Object(x.f)(e.offsetX),yOffset:Object(x.f)(e.offsetY),hAlign:Object(k.e)(e.horizontalAlignment),vAlign:Object(k.g)(e.verticalAlignment),maxLineWidth:512,lineHeight:M.x*Math.max(.25,Math.min(l||1,4)),decoration:e.font.decoration||"none",isCIM:!0}).boundsT;return t[0]=v.x-v.halfWidth,t[1]=-v.y-v.halfHeight,t[2]=v.x+v.halfWidth,t[3]=-v.y+v.halfHeight,t}}],[{key:"safeSize",value:function(t){var e=Math.max(Math.abs(t[0]),Math.abs(t[2])),i=Math.max(Math.abs(t[1]),Math.abs(t[3]));return Math.sqrt(e*e+i*i)}}]),t}(),E=function(){function t(){Object(s.a)(this,t)}return Object(o.a)(t,null,[{key:"getEnvelope",value:function(t,e){var i=new k.b(e);if(Array.isArray(t)){var r,n,a=Object(h.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;r?r.union(A(i,s)):r=A(i,s)}}catch(o){a.e(o)}finally{a.f()}return r}return A(i,t)}},{key:"getTextureAnchor",value:function(t,e){var i=this.getEnvelope(t,e);if(!i)return[0,0,0];var r=(i.x+.5*i.width)*w,n=-(i.y+.5*i.height)*w,a=i.width*w+2,s=i.height*w+2;return[r/a,n/s,s]}},{key:"rasterize",value:function(t,e,i,r){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=i||this.getEnvelope(e,r);if(!a)return[null,0,0,0,0];var s=(a.x+.5*a.width)*w,o=(a.y+.5*a.height)*w;t.width=a.width*w,t.height=a.height*w,i||(t.width+=2,t.height+=2);var h=t.getContext("2d"),l=k.d.createScale(w,-w);l.translate(.5*t.width-s,.5*t.height+o);var c=new k.a(h,r,l);switch(e.type){case"CIMPointSymbol":var u={type:"point",x:0,y:0};c.drawSymbol(e,u);break;case"CIMVectorMarker":var f=new b.a;c.drawMarker(e,f)}var v=h.getImageData(0,0,t.width,t.height),m=new Uint8Array(v.data);if(n)for(var d,p=0;p<m.length;p+=4)d=m[p+3]/255,m[p]=m[p]*d,m[p+1]=m[p+1]*d,m[p+2]=m[p+2]*d;return[m,t.width,t.height,-s/t.width,-o/t.height]}},{key:"fromTextSymbol",value:function(t){var e,i,r,n,a,s=t.angle,o=t.color,h=t.font,l=t.haloColor,u=t.haloSize,f=t.horizontalAlignment,v=t.kerning,m=t.text,d=t.verticalAlignment,p=t.xoffset,_=t.yoffset;h&&(e=h.family,i=h.style,r=h.weight,n=h.size,a=h.decoration);var y=!1;return m&&(y=Object(c.a)(m)[1]),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMTextSymbol",angle:s,blockProgression:O.d.BTT,depth3D:1,extrapolateBaselines:!0,fontEffects:O.g.Normal,fontEncoding:O.h.Unicode,fontFamilyName:e||"Arial",fontStyleName:V(i,r),fontType:O.i.Unspecified,haloSize:u,height:n,hinting:O.o.Default,horizontalAlignment:B(null!==f&&void 0!==f?f:"center"),kerning:v,letterWidth:100,ligatures:!0,lineGapType:"Multiple",offsetX:Object(x.f)(p),offsetY:Object(x.f)(_),strikethrough:"line-through"===a,underline:"underline"===a,symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:U(o)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:U(l)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:y?O.x.RTL:O.x.LTR,verticalAlignment:Y(null!==d&&void 0!==d?d:"baseline"),verticalGlyphOrientation:O.z.Right,wordSpacing:100,billboardMode3D:O.c.FaceNearPlane},textString:m}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}}},{key:"fromPictureFillSymbol",value:function(t){var e=t.height,i=t.outline,r=t.width,n=t.xoffset,a=t.xscale,s=t.yoffset,o=t.yscale,h=[],l={type:"CIMPolygonSymbol",symbolLayers:h};if(i){var c=i.cap,u=i.join,f=i.miterLimit,v=i.width;h.push({type:"CIMSolidStroke",color:U(i.color),capStyle:D(c),joinStyle:X(u),miterLimit:f,width:v})}var m=t.url;"esriPFS"===t.type&&t.imageData&&(m=t.imageData);var d="angle"in t?t.angle:0,p=r*(a||1),_=e*(o||1);return h.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:O.y.Picture,tintColor:null,url:m,height:_,width:p,offsetX:Object(x.f)(n),offsetY:Object(x.f)(s),rotation:Object(x.f)(-d),colorSubstitutions:null}),l}},{key:"fromSimpleFillSymbol",value:function(t){var e=t.color,i=t.style,r=t.outline,n=[],a={type:"CIMPolygonSymbol",symbolLayers:n},s=null;if(r){var o=r.cap,h=r.join,l=r.style;"solid"!==l&&"none"!==l&&"esriSLSSolid"!==l&&"esriSLSNull"!==l&&(s=[{type:"CIMGeometricEffectDashes",dashTemplate:q(l,o),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]),n.push({type:"CIMSolidStroke",color:U(r.color),capStyle:D(o),joinStyle:X(h),miterLimit:r.miterLimit,width:r.width,effects:s})}if(i&&"solid"!==i&&"none"!==i&&"esriSFSSolid"!==i&&"esriSFSNull"!==i){var c={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",color:U(e),capStyle:O.q.Butt,joinStyle:O.s.Miter,width:.75}]},u=0,v=Object(m.k)(Math.ceil(window.devicePixelRatio)),d=Z(i)?8*v:10*v;switch(i){case"vertical":case"esriSFSVertical":u=90;break;case"forward-diagonal":case"esriSFSForwardDiagonal":case"diagonal-cross":case"esriSFSDiagonalCross":u=-45;break;case"backward-diagonal":case"esriSFSBackwardDiagonal":u=45;break;case"cross":case"esriSFSCross":u=0}n.push({type:"CIMHatchFill",lineSymbol:c,offsetX:0,offsetY:0,rotation:u,separation:d}),"cross"===i||"esriSFSCross"===i?n.push({type:"CIMHatchFill",lineSymbol:Object(f.a)(c),offsetX:0,offsetY:0,rotation:90,separation:d}):"diagonal-cross"!==i&&"esriSFSDiagonalCross"!==i||n.push({type:"CIMHatchFill",lineSymbol:Object(f.a)(c),offsetX:0,offsetY:0,rotation:45,separation:d})}else!i||"solid"!==i&&"esriSFSSolid"!==i||n.push({type:"CIMSolidFill",enable:!0,color:U(e)});return a}},{key:"fromSimpleLineSymbol",value:function(e){var i=e.cap,r=e.color,n=e.join,a=e.marker,s=e.miterLimit,o=e.style,h=e.width,l=null;"solid"!==o&&"none"!==o&&"esriSLSSolid"!==o&&"esriSLSNull"!==o&&(l=[{type:"CIMGeometricEffectDashes",dashTemplate:q(o,i),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);var c=[];if(a){var u;switch(a.placement){case"begin-end":u=O.f.Both;break;case"begin":u=O.f.JustBegin;break;case"end":u=O.f.JustEnd;break;default:u=O.f.None}var f=t.fromSimpleMarker(a,h,r).symbolLayers[0];f.markerPlacement={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:u,offsetAlongLine:0},c.push(f)}return"none"!==o&&"esriSLSNull"!==o&&c.push({type:"CIMSolidStroke",color:U(r),capStyle:D(i),joinStyle:X(n),miterLimit:s,width:h,effects:l}),{type:"CIMLineSymbol",symbolLayers:c}}},{key:"fromPictureMarker",value:function(t){var e=t.angle,i=t.height,r=t.width,n=t.xoffset,a=t.yoffset,s=t.url;return"esriPMS"===t.type&&t.imageData&&(s=t.imageData),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:O.y.Picture,tintColor:null,url:s,size:i,width:r,offsetX:Object(x.f)(n),offsetY:Object(x.f)(a),rotation:Object(x.f)(-e)}]}}},{key:"fromSimpleMarker",value:function(t,e,i){var r,n=t.style,s=null!==(r=t.color)&&void 0!==r?r:i;if("path"===n){var o=[];if("outline"in t&&t.outline){var h=t.outline;o.push({type:"CIMSolidStroke",enable:!0,width:Object(_.c)(Math.round(Object(_.d)(h.width))),color:U(h.color)})}o.push({type:"CIMSolidFill",enable:!0,color:U(s),path:t.path});var l=$("square"),c=Object(a.a)(l,2),u=c[0],f=c[1];return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:Object(x.f)(-t.angle),size:Object(x.f)(t.size||6),offsetX:Object(x.f)(t.xoffset),offsetY:Object(x.f)(t.yoffset),frame:u,markerGraphics:[{type:"CIMMarkerGraphic",geometry:f,symbol:{type:"CIMPolygonSymbol",symbolLayers:o}}]}]}}var v,m=$(n),d=Object(a.a)(m,2),p=d[0],y=d[1];if(y&&p){var g=[];if("outline"in t&&t.outline){var b=t.outline;g.push({type:"CIMSolidStroke",enable:!0,width:b.width>.667?Object(_.c)(Math.round(Object(_.d)(b.width))):b.width,color:U(b.color)})}else!e||"line-marker"!==t.type||"cross"!==t.style&&"x"!==t.style||g.push({type:"CIMSolidStroke",enable:!0,width:e,color:U(s)});g.push({type:"CIMSolidFill",enable:!0,color:U(s)});var k={type:"CIMPolygonSymbol",symbolLayers:g};v={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:Object(x.f)(-t.angle),size:Object(x.f)(t.size||6*e),offsetX:Object(x.f)(t.xoffset),offsetY:Object(x.f)(t.yoffset),frame:p,markerGraphics:[{type:"CIMMarkerGraphic",geometry:y,symbol:k}]}]}}return v}},{key:"fromCIMHatchFill",value:function(t){for(var e,i=null!==(e=t.separation)&&void 0!==e?e:4,r=i/2,n=t.lineSymbol,a=this._getLineSymbolPeriod(t.lineSymbol)||4;a<4;)a*=2;var s=a/2;return{type:"CIMVectorMarker",frame:{xmin:-s,xmax:s,ymin:-r,ymax:r},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-s,0],[s,0]]]},symbol:n}],size:i}}},{key:"_getLineSymbolPeriod",value:function(t){if(t){var e=this._getEffectsRepeat(t.effects);if(e)return e;if(t.symbolLayers){var i,r=Object(h.a)(t.symbolLayers);try{for(r.s();!(i=r.n()).done;){var n=i.value;if(n){var a=this._getEffectsRepeat(n.effects);if(a)return a;switch(n.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":var s=this._getPlacementRepeat(n.markerPlacement);if(s)return s}}}}catch(o){r.e(o)}finally{r.f()}}}return 0}},{key:"_getEffectsRepeat",value:function(t){if(t){var e,i=Object(h.a)(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r)switch(r.type){case"CIMGeometricEffectDashes":var n=r.dashTemplate;if(n&&n.length){var a,s=0,o=Object(h.a)(n);try{for(o.s();!(a=o.n()).done;){s+=a.value}}catch(l){o.e(l)}finally{o.f()}return 1&n.length&&(s*=2),s}break;case"CIMGeometricEffectWave":return r.period;default:I.error("unsupported geometric effect type ".concat(r.type))}}}catch(l){i.e(l)}finally{i.f()}}return 0}},{key:"_getPlacementRepeat",value:function(t){if(t)switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":var e=t.placementTemplate;if(e&&e.length){var i,r=0,n=Object(h.a)(e);try{for(n.s();!(i=n.n()).done;){r+=i.value}}catch(a){n.e(a)}finally{n.f()}return 1&e.length&&(r*=2),r}}return 0}},{key:"fromCIMInsidePolygon",value:function(t){var e,i=t.markerPlacement,r=Object(n.a)({type:t.type},t);r.markerPlacement=null,r.anchorPoint=null;var a,s,o,h,l=Math.abs(i.stepX),c=Math.abs(i.stepY),u=(null!==(e=i.randomness)&&void 0!==e?e:100)/100;if("Random"===i.gridType){var f=Object(_.d)(M.D),v=Math.max(Math.floor(f/l),1),m=Math.max(Math.floor(f/c),1);a=v*l/2,o=2*(s=m*c/2);var d=new p.a(i.seed),y=u*l/1.5,g=u*c/1.5;h=[];for(var b=0;b<v;b++)for(var k=0;k<m;k++){var O=b*l-a+y*(.5-d.getFloat()),x=k*c-s+g*(.5-d.getFloat());h.push({x:O,y:x}),0===b&&h.push({x:O+2*a,y:x}),0===k&&h.push({x:O,y:x+2*s})}}else!0===i.shiftOddRows?(o=2*c,h=[{x:-(a=l/2),y:0},{x:a,y:0},{x:0,y:s=c},{x:0,y:-s}]):(a=l/2,s=c/2,o=c,h=[{x:0,y:0}]);return{type:"CIMVectorMarker",frame:{xmin:-a,xmax:a,ymin:-s,ymax:s},markerGraphics:h.map((function(t){return{type:"CIMMarkerGraphic",geometry:t,symbol:{type:"CIMPointSymbol",symbolLayers:[r]}}})),size:o}}},{key:"getFillColor",value:function(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers){var i,r=Object(h.a)(e.symbolLayers);try{for(r.s();!(i=r.n()).done;){var n=i.value,a=t.getFillColor(n);if(null!=a)return a}}catch(s){r.e(s)}finally{r.f()}}break;case"CIMTextSymbol":return t.getFillColor(e.symbol);case"CIMSolidFill":return e.color}}},{key:"getStrokeColor",value:function(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers){var i,r=Object(h.a)(e.symbolLayers);try{for(r.s();!(i=r.n()).done;){var n=i.value,a=t.getStrokeColor(n);if(void 0!==a)return a}}catch(s){r.e(s)}finally{r.f()}}break;case"CIMTextSymbol":return t.getStrokeColor(e.symbol);case"CIMSolidStroke":return e.color}}},{key:"getStrokeWidth",value:function(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers){var i,r=Object(h.a)(e.symbolLayers);try{for(r.s();!(i=r.n()).done;){var n=i.value,a=t.getStrokeWidth(n);if(void 0!==a)return a}}catch(s){r.e(s)}finally{r.f()}}break;case"CIMTextSymbol":return t.getStrokeWidth(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}},{key:"getSize",value:function(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":var e=0;if(t.symbolLayers){var i,r=Object(h.a)(t.symbolLayers);try{for(r.s();!(i=r.n()).done;){var n=i.value;if(n)switch(n.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":var a=n.size;a>e&&(e=a)}}}catch(v){r.e(v)}finally{r.f()}}return e;case"CIMLineSymbol":case"CIMPolygonSymbol":var s=0;if(t.symbolLayers){var o,l=Object(h.a)(t.symbolLayers);try{for(l.s();!(o=l.n()).done;){var c=o.value;if(c)switch(c.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":var u=c.width;u>s&&(s=u);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(Object(x.j)(c.markerPlacement)){var f=c.size;f>s&&(s=f)}}}}catch(v){l.e(v)}finally{l.f()}}return s}}},{key:"getMarkerScaleRatio",value:function(t){if(t&&"CIMVectorMarker"===t.type&&!1!==t.scaleSymbolsProportionally&&t.frame){var e=t.frame.ymax-t.frame.ymin;return t.size/e}return 1}}]),t}(),G=function(){function t(){Object(s.a)(this,t)}return Object(o.a)(t,null,[{key:"rasterizeSimpleFill",value:function(t,e,i){"solid"!==e&&"none"!==e&&"esriSFSSolid"!==e&&"esriSFSNull"!==e||console.error("Unexpected: style does not require rasterization");var r=Object(m.k)(Math.ceil(i)),n=Z(e)?8*r:16*r,a=2*r;t.width=n,t.height=n;var s=t.getContext("2d");s.strokeStyle="#FFFFFF",s.lineWidth=r,s.beginPath(),"vertical"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSVertical"!==e||(s.moveTo(n/2,-a),s.lineTo(n/2,n+a)),"horizontal"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSHorizontal"!==e||(s.moveTo(-a,n/2),s.lineTo(n+a,n/2)),"forward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSDiagonalCross"!==e&&"esriSFSForwardDiagonal"!==e||(s.moveTo(-a,-a),s.lineTo(n+a,n+a),s.moveTo(n-a,-a),s.lineTo(n+a,a),s.moveTo(-a,n-a),s.lineTo(a,n+a)),"backward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSBackwardDiagonal"!==e&&"esriSFSDiagonalCross"!==e||(s.moveTo(n+a,-a),s.lineTo(-a,n+a),s.moveTo(a,-a),s.lineTo(-a,a),s.moveTo(n+a,n-a),s.lineTo(n-a,n+a)),s.stroke();for(var o,h=s.getImageData(0,0,t.width,t.height),l=new Uint8Array(h.data),c=0;c<l.length;c+=4)o=l[c+3]/255,l[c]=l[c]*o,l[c+1]=l[c+1]*o,l[c+2]=l[c+2]*o;return[l,t.width,t.height]}},{key:"rasterizeSimpleLine",value:function(t,e){return this.rasterizeDash(t,e)}},{key:"rasterizeDash",value:function(t,e){var i="Butt"===e,n="Square"===e,a=!i&&!n;t.length%2==1&&(t=[].concat(Object(r.a)(t),Object(r.a)(t)));var s,o=15.5,l=0,c=Object(h.a)(t);try{for(c.s();!(s=c.n()).done;){l+=s.value}}catch(w){c.e(w)}finally{c.f()}var f,v=Math.round(l*o),m=new Float32Array(31*v),d=7.75,p=0,_=0,y=.5,g=!0,b=Object(h.a)(t);try{for(b.s();!(f=b.n()).done;){var k=f.value;for(p=_,_+=k*o;y<=_;){for(var O=.5;O<31;){var x=(O-.5)*v+y-.5,P=a?(O-o)*(O-o):Math.abs(O-o);m[x]=g?i?Math.max(Math.max(p+d-y,P),Math.max(y-_+d,P)):P:a?Math.min((y-p)*(y-p)+P,(y-_)*(y-_)+P):n?Math.min(Math.max(y-p,P),Math.max(_-y,P)):Math.min(Math.max(y-p+d,P),Math.max(_+d-y,P)),O++}y++}g=!g}}catch(w){b.e(w)}finally{b.f()}for(var M=m.length,j=new Uint8Array(4*M),S=0;S<M;++S){var C=(a?Math.sqrt(m[S]):m[S])/o;Object(u.a)(C,j,4*S)}return[j,v,31]}}]),t}(),H=function(){function t(){Object(s.a)(this,t)}return Object(o.a)(t,null,[{key:"findApplicableOverrides",value:function(e,i,r){if(e&&i){if(e.primitiveName){var n,a=!1,s=Object(h.a)(r);try{for(s.s();!(n=s.n()).done;){if(n.value.primitiveName===e.primitiveName){a=!0;break}}}catch(x){s.e(x)}finally{s.f()}if(!a){var o,l=Object(h.a)(i);try{for(l.s();!(o=l.n()).done;){var c=o.value;c.primitiveName===e.primitiveName&&r.push(c)}}catch(x){l.e(x)}finally{l.f()}}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects){var u,f=Object(h.a)(e.effects);try{for(f.s();!(u=f.n()).done;){var v=u.value;t.findApplicableOverrides(v,i,r)}}catch(x){f.e(x)}finally{f.f()}}if(e.symbolLayers){var m,d=Object(h.a)(e.symbolLayers);try{for(d.s();!(m=d.n()).done;){var p=m.value;t.findApplicableOverrides(p,i,r)}}catch(x){d.e(x)}finally{d.f()}}break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects){var _,y=Object(h.a)(e.effects);try{for(y.s();!(_=y.n()).done;){var g=_.value;t.findApplicableOverrides(g,i,r)}}catch(x){y.e(x)}finally{y.f()}}if(e.markerPlacement&&t.findApplicableOverrides(e.markerPlacement,i,r),"CIMVectorMarker"===e.type){if(e.markerGraphics){var b,k=Object(h.a)(e.markerGraphics);try{for(k.s();!(b=k.n()).done;){var O=b.value;t.findApplicableOverrides(O,i,r),t.findApplicableOverrides(O.symbol,i,r)}}catch(x){k.e(x)}finally{k.f()}}}else"CIMCharacterMarker"===e.type?t.findApplicableOverrides(e.symbol,i,r):"CIMHatchFill"===e.type?t.findApplicableOverrides(e.lineSymbol,i,r):"CIMPictureMarker"===e.type&&t.findApplicableOverrides(e.animatedSymbolProperties,i,r)}}}},{key:"findEffectOverrides",value:function(t,e,i){if(e&&t)for(var r=t.length,n=0;n<r;n++){var a,s=null===(a=t[n])||void 0===a?void 0:a.primitiveName;if(s){var o,l=!1,c=Object(h.a)(i);try{for(c.s();!(o=c.n()).done;){if(o.value.primitiveName===s){l=!0;break}}}catch(m){c.e(m)}finally{c.f()}if(!l){var u,f=Object(h.a)(e);try{for(f.s();!(u=f.n()).done;){var v=u.value;v.primitiveName===s&&i.push(v)}}catch(m){f.e(m)}finally{f.f()}}}}}},{key:"applyOverrides",value:function(e,i,r,n){if(i){var a=function(t){return t?t.charAt(0).toLowerCase()+t.substr(1):t};if(e.primitiveName){var s,o=Object(h.a)(i);try{for(o.s();!(s=o.n()).done;){var l=s.value;if(l.primitiveName===e.primitiveName){var c=a(l.propertyName);if(n&&n.push({cim:e,nocapPropertyName:c,value:e[c]}),l.expression&&(l.value=t.toValue(l.propertyName,l.expression)),r){var u,f=!1,v=Object(h.a)(r);try{for(v.s();!(u=v.n()).done;){u.value.primitiveName===e.primitiveName&&(f=!0)}}catch(j){v.e(j)}finally{v.f()}f||r.push(l)}e[c]=l.value}}}catch(j){o.e(j)}finally{o.f()}}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects){var m,d=Object(h.a)(e.effects);try{for(d.s();!(m=d.n()).done;){var p=m.value;t.applyOverrides(p,i,r,n)}}catch(j){d.e(j)}finally{d.f()}}if(e.symbolLayers){var _,y=Object(h.a)(e.symbolLayers);try{for(y.s();!(_=y.n()).done;){var g=_.value;t.applyOverrides(g,i,r,n)}}catch(j){y.e(j)}finally{y.f()}}break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects){var b,k=Object(h.a)(e.effects);try{for(k.s();!(b=k.n()).done;){var O=b.value;t.applyOverrides(O,i,r,n)}}catch(j){k.e(j)}finally{k.f()}}if("CIMVectorMarker"===e.type&&e.markerGraphics){var x,P=Object(h.a)(e.markerGraphics);try{for(P.s();!(x=P.n()).done;){var M=x.value;t.applyOverrides(M,i,r,n),t.applyOverrides(M.symbol,i,r,n)}}catch(j){P.e(j)}finally{P.f()}}}}}},{key:"restoreOverrides",value:function(t){var e,i=Object(h.a)(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;r.cim[r.nocapPropertyName]=r.value}}catch(n){i.e(n)}finally{i.f()}}},{key:"buildOverrideKey",value:function(t){var e,i="",r=Object(h.a)(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;void 0!==n.value&&(i+="".concat(n.primitiveName).concat(n.propertyName).concat(JSON.stringify(n.value)))}}catch(a){r.e(a)}finally{r.f()}return i}},{key:"toValue",value:function(t,e){if("DashTemplate"===t)return e.split(" ").map((function(t){return Number(t)}));if("Color"===t){var i=new l.a(e).toRgba();return i[3]*=255,i}return e}}]),t}(),D=function(t){if(!t)return O.q.Butt;switch(t){case"butt":return O.q.Butt;case"square":return O.q.Square;case"round":return O.q.Round}},X=function(t){if(!t)return O.s.Miter;switch(t){case"miter":return O.s.Miter;case"round":return O.s.Round;case"bevel":return O.s.Bevel}},B=function(t){if(Object(d.j)(t))return"Center";switch(t){case"left":return"Left";case"right":return"Right";case"center":return"Center"}},Y=function(t){if(Object(d.j)(t))return"Center";switch(t){case"baseline":return"Baseline";case"top":return"Top";case"middle":return"Center";case"bottom":return"Bottom"}},U=function(t){return t?[t.r,t.g,t.b,255*t.a]:[0,0,0,0]},V=function(t,e){var i=W(e),r=J(t);return i&&r?"".concat(i,"-").concat(r):"".concat(i).concat(r)},W=function(t){if(!t)return"";switch(t.toLowerCase()){case"bold":case"bolder":return"bold"}return""},J=function(t){if(!t)return"";switch(t.toLowerCase()){case"italic":case"oblique":return"italic"}return""},q=function(t,e){var i="butt"===e;switch(t){case"dash":case"esriSLSDash":return i?[4,3]:[3,4];case"dash-dot":case"esriSLSDashDot":return i?[4,3,1,3]:[3,4,0,4];case"dot":case"esriSLSDot":return i?[1,3]:[0,4];case"long-dash":case"esriSLSLongDash":return i?[8,3]:[7,4];case"long-dash-dot":case"esriSLSLongDashDot":return i?[8,3,1,3]:[7,4,0,4];case"long-dash-dot-dot":case"esriSLSDashDotDot":return i?[8,3,1,3,1,3]:[7,4,0,4,0,4];case"short-dash":case"esriSLSShortDash":return i?[4,1]:[3,2];case"short-dash-dot":case"esriSLSShortDashDot":return i?[4,1,1,1]:[3,2,0,2];case"short-dash-dot-dot":case"esriSLSShortDashDotDot":return i?[4,1,1,1,1,1]:[3,2,0,2,0,2];case"short-dot":case"esriSLSShortDot":return i?[1,1]:[0,2];case"solid":case"esriSLSSolid":case"none":return I.error("Unexpected: style does not require rasterization"),[0,0];default:return I.error("Tried to rasterize SLS, but found an unexpected style: ".concat(t,"!")),[0,0]}};var $=function(t){var e,i,r=50,n=t;if("circle"===n||"esriSMSCircle"===n){var a=Math.acos(.995),s=Math.ceil(S/a/4);0===s&&(s=1),a=C/s,s*=4;var o=[];o.push([r,0]);for(var h=1;h<s;h++)o.push([r*Math.cos(h*a),-r*Math.sin(h*a)]);o.push([r,0]),e={rings:[o]},i={xmin:-r,ymin:-r,xmax:r,ymax:r}}else if("cross"===n||"esriSMSCross"===n){e={rings:[[[0,r],[0,0],[r,0],[r,-0],[0,-0],[0,-r],[-0,-r],[-0,-0],[-r,-0],[-r,0],[-0,0],[-0,r],[0,r]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r}}else if("diamond"===n||"esriSMSDiamond"===n)e={rings:[[[-r,0],[0,r],[r,0],[0,-r],[-r,0]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r};else if("square"===n||"esriSMSSquare"===n)e={rings:[[[-r,-r],[-r,r],[r,r],[r,-r],[-r,-r]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r};else if("x"===n||"esriSMSX"===n){e={rings:[[[0,0],[50,r],[r,50],[0,0],[r,-50],[50,-r],[0,-0],[-50,-r],[-r,-50],[-0,0],[-r,50],[-50,r],[0,0]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r}}else if("triangle"===n||"esriSMSTriangle"===n){var l=57.735026918962575,c=-l,u=2/3*100,f=u-100;e={rings:[[[c,f],[0,u],[l,f],[c,f]]]},i={xmin:c,ymin:f,xmax:l,ymax:u}}else"arrow"===n&&(e={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r});return[i,e]},Z=function(t){return"vertical"===t||"horizontal"===t||"cross"===t||"esriSFSCross"===t||"esriSFSVertical"===t||"esriSFSHorizontal"===t}},251:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var r=i(142),n=i(143),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(r.a)(this,t),this.x=e,this.y=i,this.width=n,this.height=a}return Object(n.a)(t,[{key:"isEmpty",get:function(){return this.width<=0||this.height<=0}},{key:"union",value:function(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}]),t}()},262:function(t,e,i){"use strict";i.d(e,"a",(function(){return _t})),i.d(e,"b",(function(){return yt}));var r=i(60),n=i(142),a=i(143),s=i(161),o=i(168),h=i(173),l=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new c(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();l.instance=null;var c=function(){function t(e,i,r){Object(n.a)(this,t),this._inputGeometries=e,this._angleTolerance=void 0!==i.angleTolerance?i.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.g)(t)){this._isClosed=!0;var e=Object(s.a)(t);return this._processMultipath(e.rings),e}if(Object(o.h)(t)){this._isClosed=!1;var i=Object(s.a)(t);return this._processMultipath(i.paths),i}if(Object(o.d)(t)){if(this._maxCosAngle)return t;this._isClosed=!0;var r=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]];return this._processPath(r),{rings:[r]}}t=this._inputGeometries.next()}return null}},{key:"_processMultipath",value:function(t){if(t){var e,i=Object(r.a)(t);try{for(i.s();!(e=i.n()).done;){var n=e.value;this._processPath(n)}}catch(a){i.e(a)}finally{i.f()}}}},{key:"_processPath",value:function(t){if(t){var e,i,r,n,a,s,o=t.length,l=t[0];this._isClosed&&++o;for(var c=1;c<o;++c){var u,f=(u=this._isClosed&&c===o-1?t[0]:t[c])[0]-l[0],v=u[1]-l[1],m=Math.sqrt(f*f+v*v);c>1&&m>0&&r>0&&(e*f+i*v)/m/r<=this._maxCosAngle&&Object(h.j)(l,1),1===c&&(n=f,a=v,s=m),m>0&&(l=u,e=f,i=v,r=m)}this._isClosed&&r>0&&s>0&&(e*n+i*a)/s/r<=this._maxCosAngle&&Object(h.j)(t[0],1)}}}]),t}(),u=i(144),f=i(145),v=i(170),m=.03,d=function(){function t(){Object(n.a)(this,t),this._path=[]}return Object(a.a)(t,[{key:"path",value:function(){return this._path}},{key:"addPath",value:function(t,e){e||t.reverse(),Array.prototype.push.apply(this._path,t),e||t.reverse()}},{key:"startPath",value:function(t){this._path.push(t)}},{key:"lineTo",value:function(t){this._path.push(t)}},{key:"close",value:function(){var t=this._path;t.length>1&&(t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]))}}],[{key:"mergePath",value:function(t,e){e&&Array.prototype.push.apply(t,e)}}]),t}(),p=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"normalize",value:function(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);0!==e&&(t[0]/=e,t[1]/=e)}},{key:"calculateLength",value:function(t,e){var i=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(i*i+r*r)}},{key:"calculateSegLength",value:function(t,e){return this.calculateLength(t[e],t[e+1])}},{key:"calculatePathLength",value:function(t){for(var e=0,i=t?t.length:0,r=0;r<i-1;++r)e+=this.calculateSegLength(t,r);return e}},{key:"calculatePathArea",value:function(t){for(var e=0,i=t?t.length:0,r=0;r<i-1;++r)e+=(t[r+1][0]-t[r][0])*(t[r+1][1]+t[r][1]);return e/2}},{key:"getCoord2D",value:function(t,e,i){return[t[0]+(e[0]-t[0])*i,t[1]+(e[1]-t[1])*i]}},{key:"getSegCoord2D",value:function(t,e,i){return this.getCoord2D(t[e],t[e+1],i)}},{key:"getAngle",value:function(t,e,i){var r=e[0]-t[0],n=e[1]-t[1];return Math.atan2(n,r)}},{key:"getSegAngle",value:function(t,e,i){return this.getAngle(t[e],t[e+1],i)}},{key:"getAngleCS",value:function(t,e,i){var r=e[0]-t[0],n=e[1]-t[1],a=Math.sqrt(r*r+n*n);return a>0?[r/a,n/a]:[1,0]}},{key:"getSegAngleCS",value:function(t,e,i){return this.getAngleCS(t[e],t[e+1],i)}},{key:"cut",value:function(t,e,i,r){return[i<=0?t[e]:this.getSegCoord2D(t,e,i),r>=1?t[e+1]:this.getSegCoord2D(t,e,r)]}},{key:"addSegment",value:function(t,e,i){i&&t.push(e[0]),t.push(e[1])}},{key:"getSubCurve",value:function(t,e,i){var r=[];return this.appendSubCurve(r,t,e,i)?r:null}},{key:"appendSubCurve",value:function(t,e,i,r){for(var n=e?e.length-1:0,a=0,s=!0,o=0;o<n;){var h=this.calculateSegLength(e,o);if(0!==h){if(s){if(a+h>i){var l=(i-a)/h,c=1,u=!1;a+h>=r&&(c=(r-a)/h,u=!0);var f=this.cut(e,o,l,c);if(f&&this.addSegment(t,f,s),u)break;s=!1}}else{if(a+h>r){var v=this.cut(e,o,0,(r-a)/h);v&&this.addSegment(t,v,s);break}this.addSegment(t,[e[o],e[o+1]],s)}a+=h,++o}else++o}return!0}},{key:"getCIMPointAlong",value:function(t,e){for(var i=t?t.length-1:0,r=0,n=-1;n<i;){++n;var a=this.calculateSegLength(t,n);if(0!==a){if(r+a>e){var s=(e-r)/a;return this.getCoord2D(t[n],t[n+1],s)}r+=a}}return null}},{key:"isEmpty",value:function(t,e){if(!t||t.length<=1)return!0;for(var i=t?t.length-1:0,r=-1;r<i;){if(t[++r+1][0]!==t[r][0]||t[r+1][1]!==t[r][1])return!1;if(e&&t[r+1][2]!==t[r][2])return!1}return!0}},{key:"offset",value:function(t,e,i,r,n){if(!t||t.length<2)return null;for(var a=0,s=t[a++],o=a;a<t.length;){var h=t[a];h[0]===s[0]&&h[1]===s[1]||(a!==o&&(t[o]=t[a]),s=t[o++]),a++}var l=t[0][0]===t[o-1][0]&&t[0][1]===t[o-1][1];if(l&&--o,o<(l?3:2))return null;var c=[];s=l?t[o-1]:null;for(var u=t[0],f=0;f<o;f++){var m=f===o-1?l?t[0]:null:t[f+1];if(s)if(m){var d=[m[0]-u[0],m[1]-u[1]];this.normalize(d);var p=[u[0]-s[0],u[1]-s[1]];this.normalize(p);var _=p[0]*d[1]-p[1]*d[0],y=p[0]*d[0]+p[1]*d[1];if(0===_&&1===y){u=m;continue}if(_>=0==e<=0){if(y<1){var g=[d[0]-p[0],d[1]-p[1]];this.normalize(g);var b=Math.sqrt((1+y)/2);if(b>1/r){var k=-Math.abs(e)/b;c.push([u[0]-g[0]*k,u[1]-g[1]*k])}}}else switch(i){case v.m.Mitered:var O=Math.sqrt((1+y)/2);if(O>0&&1/O<r){var x=[d[0]-p[0],d[1]-p[1]];this.normalize(x);var P=Math.abs(e)/O;c.push([u[0]-x[0]*P,u[1]-x[1]*P]);break}case v.m.Bevelled:c.push([u[0]+p[1]*e,u[1]-p[0]*e]),c.push([u[0]+d[1]*e,u[1]-d[0]*e]);break;case v.m.Rounded:if(y<1){c.push([u[0]+p[1]*e,u[1]-p[0]*e]);var M=Math.floor(2.5*(1-y));if(M>0)for(var j=1/M,S=j,C=1;C<M;C++,S+=j){var w=[p[1]*(1-S)+d[1]*S,-p[0]*(1-S)-d[0]*S];this.normalize(w),c.push([u[0]+w[0]*e,u[1]+w[1]*e])}c.push([u[0]+d[1]*e,u[1]-d[0]*e])}break;case v.m.Square:default:if(_<0)c.push([u[0]+(p[1]+p[0])*e,u[1]+(p[1]-p[0])*e]),c.push([u[0]+(d[1]-d[0])*e,u[1]-(d[0]+d[1])*e]);else{var L=Math.sqrt((1+Math.abs(y))/2),I=[d[0]-p[0],d[1]-p[1]];this.normalize(I);var T=e/L;c.push([u[0]-I[0]*T,u[1]-I[1]*T])}}}else{var A=[u[0]-s[0],u[1]-s[1]];this.normalize(A),c.push([u[0]+A[1]*e,u[1]-A[0]*e])}else{var z=[m[0]-u[0],m[1]-u[1]];this.normalize(z),c.push([u[0]+z[1]*e,u[1]-z[0]*e])}s=u,u=m}return c.length<(l?3:2)?null:(l&&c.push([c[0][0],c[0][1]]),c)}}]),t}(),_=1.7320508075688772,y=v.j.OpenEnded,g=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new b(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();g.instance=null;var b=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,r,a){var s;return Object(n.a)(this,i),(s=e.call(this,t,!1,!0))._curveHelper=new p,s._width=(void 0!==r.width?r.width:5)*a,s._arrowType=void 0!==r.geometricEffectArrowType?r.geometricEffectArrowType:void 0!==r.arrowType?r.arrowType:y,s._offsetFlattenError=m*a,s}return Object(a.a)(i,[{key:"processPath",value:function(t){switch(this._arrowType){case v.j.OpenEnded:default:return this._constructSimpleArrow(t,!0);case v.j.Block:return this._constructSimpleArrow(t,!1);case v.j.Crossed:return this._constructCrossedArrow(t)}}},{key:"_constructSimpleArrow",value:function(t,e){var i=this._curveHelper.calculatePathLength(t),r=this._width;i<2*r&&(r=i/2);var n=this._curveHelper.getSubCurve(t,0,i-r);if(!n)return null;var a=r/2;if(this._curveHelper.isEmpty(n,!1))return null;var s=this._constructOffset(n,-a);if(!s)return null;var o=this._constructOffset(n,a);if(!o)return null;var h=this._constructArrowBasePoint(s,-a/2);if(!h)return null;var l=this._constructArrowBasePoint(o,a/2);if(!l)return null;var c=t[t.length-1];e||(this._makeControlPoint(o,!0),this._makeControlPoint(s,!0));var u=new d;return u.addPath(o,!0),u.lineTo(l),this._makeControlPoint(u.path()),u.lineTo(c),this._makeControlPoint(u.path()),u.lineTo(h),this._makeControlPoint(u.path()),u.addPath(s,!1),e?{paths:[u.path()]}:(u.close(),{rings:[u.path()]})}},{key:"_constructCrossedArrow",value:function(t){var e=this._curveHelper.calculatePathLength(t),i=this._width;e<3.732050807568877*i&&(i=e/3.732050807568877);var r=this._curveHelper.getSubCurve(t,0,e-i*(1+_));if(!r)return null;var n=i/2;if(this._curveHelper.isEmpty(r,!1))return null;var a=this._constructOffset(r,n);if(!a)return null;var s=this._constructOffset(r,-n);if(!s)return null;var o=this._curveHelper.getSubCurve(t,0,e-i);if(!o)return null;if(this._curveHelper.isEmpty(o,!1))return null;var h=this._constructOffset(o,n);if(!h)return null;var l=this._constructOffset(o,-n);if(!l)return null;var c=h[h.length-1],u=this._constructArrowBasePoint(h,n/2);if(!u)return null;var f=l[l.length-1],v=this._constructArrowBasePoint(l,-n/2);if(!v)return null;var m=t[t.length-1];this._makeControlPoint(a,!1),this._makeControlPoint(s,!1);var p=new d;return p.addPath(a,!0),this._makeControlPoint(p.path()),p.lineTo(f),p.lineTo(v),this._makeControlPoint(p.path()),p.lineTo(m),this._makeControlPoint(p.path()),p.lineTo(u),this._makeControlPoint(p.path()),p.lineTo(c),this._makeControlPoint(p.path()),p.addPath(s,!1),{paths:[p.path()]}}},{key:"_constructOffset",value:function(t,e){return this._curveHelper.offset(t,e,v.m.Rounded,4,this._offsetFlattenError)}},{key:"_constructArrowBasePoint",value:function(t,e){if(!t||t.length<2)return null;var i=t[t.length-2],r=t[t.length-1],n=[r[0]-i[0],r[1]-i[1]];return this._curveHelper.normalize(n),[r[0]+n[1]*e,r[1]-n[0]*e]}},{key:"_makeControlPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(h.j)(e?t[0]:t[t.length-1],1)}}]),i}(h.a),k=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new O(t,e,i,r)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();k.instance=null;var O=function(){function t(e,i,r,a){Object(n.a)(this,t),this._inputGeometries=e,this._curveHelper=new p,this._size=(void 0!==i.size?i.size:1)*r,this._offsetFlattenError=m*r}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.d)(t))if(this._size>0){var e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]],i=this._curveHelper.offset(e,this._size,v.m.Rounded,4,this._offsetFlattenError);if(i)return{rings:[i]}}else{if(!(this._size<0))return t;if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._size>0)return{xmin:t.xmin-this._size,xmax:t.xmax+this._size,ymin:t.ymin-this._size,ymax:t.ymax+this._size}}if(Object(o.g)(t)){if(0===this._size)return t;var n,a=[],s=Object(r.a)(t.rings);try{for(s.s();!(n=s.n()).done;){var h=n.value,l=this._curveHelper.offset(h,this._size,v.m.Rounded,4,this._offsetFlattenError);l&&a.push(l)}}catch(y){s.e(y)}finally{s.f()}if(a.length)return{rings:a}}if(Object(o.h)(t)&&this._size>0){var c,u=[],f=Object(r.a)(t.paths);try{for(f.s();!(c=f.n()).done;){var m=c.value;if(m&&m.length>1){var d=this._curveHelper.offset(m,this._size,v.m.Rounded,4,this._offsetFlattenError),p=this._curveHelper.offset(m,-this._size,v.m.Rounded,4,this._offsetFlattenError);if(d&&p){for(var _=p.length-1;_>=0;_--)d.push(p[_]);d.push([d[0][0],d[0][1]]),u.push(d)}}}}catch(y){f.e(y)}finally{f.f()}if(u.length)return{rings:u}}Object(o.f)(t)&&this._size,t=this._inputGeometries.next()}return null}}]),t}(),x=i(14),P=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new M(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();P.instance=null;var M=function(){function t(e,i,r){var a;Object(n.a)(this,t),this._default_point_size=20,this._inputGeometries=e,this._geomUnitsPerPoint=r,this._rule=null!==(a=i.rule)&&void 0!==a?a:v.k.FullGeometry,this._default_size=this._default_point_size*r}return Object(a.a)(t,[{key:"next",value:function(){for(var t;t=this._inputGeometries.next();){var e=void 0;if(Object(o.f)(t)?e=this._processGeom([[[t.x,t.y]]]):Object(o.e)(t)?e=this._processGeom([t.points]):Object(o.h)(t)?e=this._processGeom(t.paths):Object(o.g)(t)&&(e=this._processGeom(t.rings)),e&&e.length)return{paths:e}}return null}},{key:"_clone",value:function(t){return[t[0],t[1]]}},{key:"_mid",value:function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}},{key:"_mix",value:function(t,e,i,r){return[t[0]*e+i[0]*r,t[1]*e+i[1]*r]}},{key:"_add",value:function(t,e){return[t[0]+e[0],t[1]+e[1]]}},{key:"_add2",value:function(t,e,i){return[t[0]+e,t[1]+i]}},{key:"_sub",value:function(t,e){return[t[0]-e[0],t[1]-e[1]]}},{key:"_dist",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"_norm",value:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}},{key:"_normalize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e/this._norm(t);t[0]*=i,t[1]*=i}},{key:"_leftPerpendicular",value:function(t){var e=-t[1],i=t[0];t[0]=e,t[1]=i}},{key:"_leftPerp",value:function(t){return[-t[1],t[0]]}},{key:"_rightPerpendicular",value:function(t){var e=t[1],i=-t[0];t[0]=e,t[1]=i}},{key:"_rightPerp",value:function(t){return[t[1],-t[0]]}},{key:"_dotProduct",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"_crossProduct",value:function(t,e){return t[0]*e[1]-t[1]*e[0]}},{key:"_rotateDirect",value:function(t,e,i){var r=t[0]*e-t[1]*i,n=t[0]*i+t[1]*e;t[0]=r,t[1]=n}},{key:"_makeCtrlPt",value:function(t){var e=[t[0],t[1]];return Object(h.j)(e,1),e}},{key:"_addAngledTicks",value:function(t,e,i,r){var n=this._sub(i,e);this._normalize(n);var a,s=this._crossProduct(n,this._sub(r,e));a=s>0?this._rightPerp(n):this._leftPerp(n);var o=Math.abs(s)/2,h=[];h.push([e[0]+(a[0]-n[0])*o,e[1]+(a[1]-n[1])*o]),h.push(e),h.push(i),h.push([i[0]+(a[0]+n[0])*o,i[1]+(a[1]+n[1])*o]),t.push(h)}},{key:"_addBezier2",value:function(t,e,i,r,n){if(0!=n--){var a=this._mid(e,i),s=this._mid(i,r),o=this._mid(a,s);this._addBezier2(t,e,a,o,n),this._addBezier2(t,o,s,r,n)}else t.push(r)}},{key:"_addBezier3",value:function(t,e,i,r,n,a){if(0!=a--){var s=this._mid(e,i),o=this._mid(i,r),h=this._mid(r,n),l=this._mid(s,o),c=this._mid(o,h),u=this._mid(l,c);this._addBezier3(t,e,s,l,u,a),this._addBezier3(t,u,c,h,n,a)}else t.push(n)}},{key:"_add90DegArc",value:function(t,e,i,r,n){var a=null!==n&&void 0!==n?n:this._crossProduct(this._sub(i,e),this._sub(r,e))>0,s=this._mid(e,i),o=this._sub(s,e);a?this._leftPerpendicular(o):this._rightPerpendicular(o),s[0]+=o[0],s[1]+=o[1],this._addBezier3(t,e,this._mix(e,.33333,s,.66667),this._mix(i,.33333,s,.66667),i,4)}},{key:"_addArrow",value:function(t,e,i){var r=e[0],n=e[1],a=e[e.length-1],s=this._sub(r,n);this._normalize(s);var o=this._crossProduct(s,this._sub(a,n)),h=.5*o,l=this._leftPerp(s),c=[a[0]-l[0]*o,a[1]-l[1]*o],u=e.length-1,f=[];f.push(i?[-l[0],-l[1]]:l);for(var v=[-s[0],-s[1]],m=1;m<u-1;m++){var d=this._sub(e[m+1],e[m]);this._normalize(d);var p=this._dotProduct(d,v),_=this._crossProduct(d,v),y=Math.sqrt((1+p)/2),g=this._sub(d,v);this._normalize(g),g[0]/=y,g[1]/=y,f.push(_<0?[-g[0],-g[1]]:g),v=d}f.push(this._rightPerp(v));for(var b=f.length-1;b>0;b--)t.push([e[b][0]+f[b][0]*h,e[b][1]+f[b][1]*h]);t.push([c[0]+f[0][0]*h,c[1]+f[0][1]*h]),t.push([c[0]+f[0][0]*o,c[1]+f[0][1]*o]),t.push(r),t.push([c[0]-f[0][0]*o,c[1]-f[0][1]*o]),t.push([c[0]-f[0][0]*h,c[1]-f[0][1]*h]);for(var k=1;k<f.length;k++)t.push([e[k][0]-f[k][0]*h,e[k][1]-f[k][1]*h])}},{key:"_cp2",value:function(t,e,i){return t.length>=2?t[1]:this._add2(t[0],e*this._default_size,i*this._default_size)}},{key:"_cp3",value:function(t,e,i,r){if(t.length>=3)return t[2];var n=this._mix(t[0],1-i,e,i),a=this._sub(e,t[0]);return this._normalize(a),this._rightPerpendicular(a),[n[0]+a[0]*r*this._default_size,n[1]+a[1]*r*this._default_size]}},{key:"_arrowPath",value:function(t){if(t.length>2)return t;var e=t[0],i=this._cp2(t,-4,0),r=this._sub(e,i);this._normalize(r);var n=this._rightPerp(r);return[e,i,[e[0]+(n[0]-r[0])*this._default_size,e[1]+(n[1]-r[1])*this._default_size]]}},{key:"_arrowLastSeg",value:function(t){var e,i=t[0],r=this._cp2(t,-4,0);if(t.length>=3)e=t[t.length-1];else{var n=this._sub(i,r);this._normalize(n);var a=this._rightPerp(n);e=[i[0]+(a[0]-n[0])*this._default_size,i[1]+(a[1]-n[1])*this._default_size]}return[r,e]}},{key:"_processGeom",value:function(t){if(!t)return null;var e,i=[],n=Object(r.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a&&0!==a.length){var s=a.length,o=a[0];switch(this._rule){case v.k.PerpendicularFromFirstSegment:var l=this._cp2(a,0,-1),c=this._cp3(a,l,.5,4),u=[];u.push(c),u.push(this._mid(o,l)),i.push(u);break;case v.k.ReversedFirstSegment:var f=this._cp2(a,0,-1);i.push([f,o]);break;case v.k.PerpendicularToSecondSegment:var m=this._cp2(a,-4,1),d=this._cp3(a,m,.882353,-1.94),p=[];p.push(this._mid(m,d)),p.push(o),i.push(p);break;case v.k.SecondSegmentWithTicks:var _=this._cp2(a,-4,1),y=this._cp3(a,_,.882353,-1.94),g=this._sub(y,_),b=void 0;b=this._crossProduct(g,this._sub(o,_))>0?this._rightPerp(b):this._leftPerp(g);var k=[];k.push([_[0]+(b[0]-g[0])/3,_[1]+(b[1]-g[1])/3]),k.push(_),k.push(y),k.push([y[0]+(b[0]+g[0])/3,y[1]+(b[1]+g[1])/3]),i.push(k);break;case v.k.DoublePerpendicular:var O=this._cp2(a,0,-1),P=this._cp3(a,O,.5,3),M=this._mid(o,O),j=this._sub(M,P);this._normalize(j);var S=this._crossProduct(j,this._sub(o,P));this._leftPerpendicular(j);var C=[];C.push(o),C.push([P[0]+j[0]*S,P[1]+j[1]*S]),i.push(C);var w=[];w.push([P[0]-j[0]*S,P[1]-j[1]*S]),w.push(O),i.push(w);break;case v.k.OppositeToFirstSegment:var L=this._cp2(a,0,-1),I=this._cp3(a,L,.5,3),T=this._mid(o,L),A=this._sub(T,I);this._normalize(A);var z=this._crossProduct(A,this._sub(o,I));this._leftPerpendicular(A);var F=[];F.push([I[0]+A[0]*z,I[1]+A[1]*z]),F.push([I[0]-A[0]*z,I[1]-A[1]*z]),i.push(F);break;case v.k.TriplePerpendicular:var R=this._cp2(a,0,-1),N=this._cp3(a,R,.5,4),E=this._mid(o,R),G=this._sub(E,N);this._normalize(G);var H=this._crossProduct(G,this._sub(o,N));this._leftPerpendicular(G);var D=[];D.push([N[0]+G[0]*H*.8,N[1]+G[1]*H*.8]),D.push([E[0]+.8*(o[0]-E[0]),E[1]+.8*(o[1]-E[1])]),i.push(D),i.push([N,E]);var X=[];X.push([N[0]-G[0]*H*.8,N[1]-G[1]*H*.8]),X.push([E[0]+.8*(R[0]-E[0]),E[1]+.8*(R[1]-E[1])]),i.push(X);break;case v.k.HalfCircleFirstSegment:var B=this._cp2(a,0,-1),Y=this._cp3(a,B,.5,4),U=this._mid(o,B),V=this._sub(B,o),W=Math.cos(Math.PI/18),J=Math.sin(Math.PI/18),q=Math.sqrt((1+W)/2),$=Math.sqrt((1-W)/2),Z=[],K=void 0;this._crossProduct(V,this._sub(Y,o))>0?(Z.push(o),V=this._sub(o,U),K=B):(Z.push(B),V=this._sub(B,U),K=o),this._rotateDirect(V,q,$),V[0]/=q,V[1]/=q;for(var Q=1;Q<=18;Q++)Z.push(this._add(U,V)),this._rotateDirect(V,W,J);Z.push(K),i.push(Z);break;case v.k.HalfCircleSecondSegment:var tt=this._cp2(a,0,-1),et=this._cp3(a,tt,1,-1),it=this._sub(o,tt);this._normalize(it);var rt=this._crossProduct(it,this._sub(et,tt))/2;this._leftPerpendicular(it);var nt=[tt[0]+it[0]*rt,tt[1]+it[1]*rt];it=this._sub(tt,nt);var at=Math.cos(Math.PI/18),st=Math.sin(Math.PI/18);rt>0&&(st=-st);for(var ot=[tt],ht=1;ht<=18;ht++)this._rotateDirect(it,at,st),ot.push(this._add(nt,it));i.push(ot);break;case v.k.HalfCircleExtended:var lt=this._cp2(a,0,-2),ct=this._cp3(a,lt,1,-1),ut=void 0;if(s>=4)ut=a[3];else{var ft=this._sub(o,lt);ut=this._add(ct,ft)}var vt=this._dist(lt,ct)/2/.75,mt=this._sub(lt,o);this._normalize(mt,vt);var dt=this._sub(ct,ut);this._normalize(dt,vt);var pt=[ut,ct];i.push(pt);var _t=[this._clone(ct)];this._addBezier3(_t,ct,this._add(ct,dt),this._add(lt,mt),lt,4),_t.push(o),i.push(_t);break;case v.k.OpenCircle:for(var yt=this._cp2(a,-2,0),gt=this._sub(yt,o),bt=Math.cos(Math.PI/18),kt=-Math.sin(Math.PI/18),Ot=[yt],xt=1;xt<=33;xt++)this._rotateDirect(gt,bt,kt),Ot.push(this._add(o,gt));i.push(Ot);break;case v.k.CoverageEdgesWithTicks:var Pt=this._cp2(a,0,-1),Mt=void 0,jt=void 0;if(s>=3)Mt=a[2];else{var St=this._sub(Pt,o),Ct=this._leftPerp(St);Mt=[o[0]+Ct[0]-.25*St[0],o[1]+Ct[1]-.25*St[1]]}if(s>=4)jt=a[3];else{var wt=this._mid(o,Pt),Lt=this._sub(o,Pt);this._normalize(Lt),this._leftPerpendicular(Lt);var It=this._crossProduct(Lt,this._sub(Mt,wt));this._rightPerpendicular(Lt),jt=[Mt[0]+Lt[0]*It*2,Mt[1]+Lt[1]*It*2]}var Tt=this._sub(Pt,o),At=void 0,zt=void 0;At=this._crossProduct(Tt,this._sub(Mt,o))>0?this._rightPerp(Tt):this._leftPerp(Tt),(zt=[]).push(Mt),zt.push(o),zt.push([o[0]+(At[0]-Tt[0])/3,o[1]+(At[1]-Tt[1])/3]),i.push(zt),At=this._crossProduct(Tt,this._sub(jt,Pt))>0?this._rightPerp(At):this._leftPerp(Tt),(zt=[]).push([Pt[0]+(At[0]+Tt[0])/3,Pt[1]+(At[1]+Tt[1])/3]),zt.push(Pt),zt.push(jt),i.push(zt);break;case v.k.GapExtentWithDoubleTicks:var Ft=this._cp2(a,0,2),Rt=this._cp3(a,Ft,0,1),Nt=void 0;if(s>=4)Nt=a[3];else{var Et=this._sub(Ft,o);Nt=this._add(Rt,Et)}this._addAngledTicks(i,o,Ft,this._mid(Rt,Nt)),this._addAngledTicks(i,Rt,Nt,this._mid(o,Ft));break;case v.k.GapExtentMidline:var Gt=this._cp2(a,2,0),Ht=this._cp3(a,Gt,0,1),Dt=void 0;if(s>=4)Dt=a[3];else{var Xt=this._sub(Gt,o);Dt=this._add(Ht,Xt)}var Bt=[];Bt.push(this._mid(o,Ht)),Bt.push(this._mid(Gt,Dt)),i.push(Bt);break;case v.k.Chevron:var Yt=this._cp2(a,-1,-1),Ut=void 0;if(s>=3)Ut=a[2];else{var Vt=this._sub(Yt,o);this._leftPerpendicular(Vt),Ut=this._add(o,Vt)}i.push([Yt,this._makeCtrlPt(o),Ut]);break;case v.k.PerpendicularWithArc:var Wt=this._cp2(a,0,-2),Jt=this._cp3(a,Wt,.5,-1),qt=this._sub(Wt,o),$t=this._norm(qt);qt[0]/=$t,qt[1]/=$t;var Zt=this._crossProduct(qt,this._sub(Jt,o)),Kt=this._dotProduct(qt,this._sub(Jt,o));Kt<.05*$t?Kt=.05*$t:Kt>.95*$t&&(Kt=.95*$t);var Qt=[o[0]+qt[0]*Kt,o[1]+qt[1]*Kt];this._leftPerpendicular(qt);var te=[];te.push([Qt[0]-qt[0]*Zt,Qt[1]-qt[1]*Zt]),te.push([Qt[0]+qt[0]*Zt,Qt[1]+qt[1]*Zt]),i.push(te);var ee=[Wt[0]+qt[0]*Zt,Wt[1]+qt[1]*Zt];qt=this._sub(Wt,ee);var ie=Math.cos(Math.PI/18),re=Math.sin(Math.PI/18);Zt<0&&(re=-re),te=[o,Wt];for(var ne=1;ne<=9;ne++)this._rotateDirect(qt,ie,re),te.push(this._add(ee,qt));i.push(te);break;case v.k.ClosedHalfCircle:for(var ae=this._cp2(a,2,0),se=this._mid(o,ae),oe=this._sub(ae,se),he=Math.cos(Math.PI/18),le=Math.sin(Math.PI/18),ce=[o,ae],ue=1;ue<=18;ue++)this._rotateDirect(oe,he,le),ce.push(this._add(se,oe));i.push(ce);break;case v.k.TripleParallelExtended:var fe=this._cp2(a,0,-2),ve=this._cp3(a,fe,1,-2),me=this._mid(o,fe),de=this._sub(ve,fe);this._normalize(de);var pe=Math.abs(this._crossProduct(de,this._sub(me,fe)))/2,_e=this._dist(fe,ve),ye=[fe,o];ye.push([o[0]+de[0]*_e*.5,o[1]+de[1]*_e*.5]),i.push(ye);var ge=[];ge.push([me[0]-de[0]*pe,me[1]-de[1]*pe]),ge.push([me[0]+de[0]*_e*.375,me[1]+de[1]*_e*.375]),Object(h.j)(ge[ge.length-1],1),ge.push([me[0]+de[0]*_e*.75,me[1]+de[1]*_e*.75]),i.push(ge);var be=[fe,ve];i.push(be);break;case v.k.ParallelWithTicks:var ke=this._cp2(a,3,0),Oe=this._cp3(a,ke,.5,-1),xe=this._sub(Oe,ke);this._normalize(xe);var Pe=this._crossProduct(xe,this._sub(Oe,o));this._leftPerpendicular(xe),this._addAngledTicks(i,o,ke,Oe),this._addAngledTicks(i,this._mix(o,1,xe,Pe),this._mix(ke,1,xe,Pe),this._mid(o,ke));break;case v.k.Parallel:var Me=this._cp2(a,3,0),je=this._cp3(a,Me,.5,-1),Se=this._sub(Me,o);this._normalize(Se);var Ce=this._leftPerp(Se),we=this._crossProduct(Se,this._sub(je,o)),Le=[o,Me];i.push(Le),(Le=[]).push([o[0]+Ce[0]*we,o[1]+Ce[1]*we]),Le.push([Me[0]+Ce[0]*we,Me[1]+Ce[1]*we]),i.push(Le);break;case v.k.PerpendicularToFirstSegment:var Ie=this._cp2(a,3,0),Te=this._cp3(a,Ie,.5,-1),Ae=this._mid(o,Ie),ze=this._sub(Ie,o);this._normalize(ze);var Fe=this._crossProduct(ze,this._sub(Te,o));this._leftPerpendicular(ze);var Re=[];Re.push([Ae[0]-ze[0]*Fe*.25,Ae[1]-ze[1]*Fe*.25]),Re.push([Ae[0]+ze[0]*Fe*1.25,Ae[1]+ze[1]*Fe*1.25]),i.push(Re);break;case v.k.ParallelOffset:var Ne=this._cp2(a,3,0),Ee=this._cp3(a,Ne,.5,-1),Ge=this._sub(Ne,o);this._normalize(Ge);var He=this._crossProduct(Ge,this._sub(Ee,o));this._leftPerpendicular(Ge);var De=[];De.push([o[0]-Ge[0]*He,o[1]-Ge[1]*He]),De.push([Ne[0]-Ge[0]*He,Ne[1]-Ge[1]*He]),i.push(De);var Xe=[];Xe.push([o[0]+Ge[0]*He,o[1]+Ge[1]*He]),Xe.push([Ne[0]+Ge[0]*He,Ne[1]+Ge[1]*He]),i.push(Xe);break;case v.k.OffsetOpposite:var Be=this._cp2(a,3,0),Ye=this._cp3(a,Be,.5,-1),Ue=this._sub(Be,o);this._normalize(Ue);var Ve=this._crossProduct(Ue,this._sub(Ye,o));this._leftPerpendicular(Ue);var We=[];We.push([o[0]-Ue[0]*Ve,o[1]-Ue[1]*Ve]),We.push([Be[0]-Ue[0]*Ve,Be[1]-Ue[1]*Ve]),i.push(We);break;case v.k.OffsetSame:var Je=this._cp2(a,3,0),qe=this._cp3(a,Je,.5,-1),$e=this._sub(Je,o);this._normalize($e);var Ze=this._crossProduct($e,this._sub(qe,o));this._leftPerpendicular($e);var Ke=[];Ke.push([o[0]+$e[0]*Ze,o[1]+$e[1]*Ze]),Ke.push([Je[0]+$e[0]*Ze,Je[1]+$e[1]*Ze]),i.push(Ke);break;case v.k.CircleWithArc:var Qe=this._cp2(a,3,0),ti=this._cp3(a,Qe,.5,-1),ei=void 0,ii=void 0;if(s>=4)ei=a[3],ii=this._crossProduct(this._sub(ei,Qe),this._sub(ti,Qe))>0;else{ei=Qe,ii=this._crossProduct(this._sub(ei,o),this._sub(ti,o))>0;var ri=24*this._geomUnitsPerPoint,ni=this._sub(ei,o);this._normalize(ni,ri);var ai=Math.sqrt(2)/2;this._rotateDirect(ni,ai,ii?ai:-ai),Qe=this._add(o,ni)}for(var si=this._sub(Qe,o),oi=Math.cos(Math.PI/18),hi=Math.sin(Math.PI/18),li=[Qe],ci=1;ci<=36;ci++)this._rotateDirect(si,oi,hi),li.push(this._add(o,si));this._add90DegArc(li,Qe,ei,ti,ii),Object(h.j)(li[li.length-8],1),i.push(li);break;case v.k.DoubleJog:var ui=void 0,fi=void 0,vi=this._cp2(a,-3,1);if(ui=s>=3?a[2]:this._add(o,this._sub(o,vi)),s>=4)fi=a[3];else{var mi=o;o=vi,fi=ui;var di=this._dist(o,mi),pi=this._dist(fi,mi),_i=30*this._geomUnitsPerPoint;.5*di<_i&&(_i=.5*di),.5*pi<_i&&(_i=.5*pi),vi=this._mix(o,_i/di,mi,(di-_i)/di),ui=this._mix(fi,_i/pi,mi,(pi-_i)/pi)}var yi=this._mid(o,vi),gi=this._mid(fi,ui),bi=this._dist(o,vi),ki=this._dist(ui,fi),Oi=Math.min(bi,ki)/8;Oi=Math.min(Oi,24*this._geomUnitsPerPoint);var xi=Math.cos(Math.PI/4),Pi=this._sub(o,vi);this._normalize(Pi,Oi),this._crossProduct(Pi,this._sub(fi,vi))>0?this._rotateDirect(Pi,xi,-xi):this._rotateDirect(Pi,xi,xi);var Mi=[];Mi.push(vi),Mi.push(this._add(yi,Pi)),Mi.push(this._sub(yi,Pi)),Mi.push(o),i.push(Mi),Pi=this._sub(fi,ui),this._normalize(Pi,Oi),this._crossProduct(Pi,this._sub(o,ui))<0?this._rotateDirect(Pi,xi,xi):this._rotateDirect(Pi,xi,-xi),(Mi=[]).push(ui),Mi.push(this._add(gi,Pi)),Mi.push(this._sub(gi,Pi)),Mi.push(fi),i.push(Mi);break;case v.k.PerpendicularOffset:var ji=this._cp2(a,-4,1),Si=this._cp3(a,ji,.882353,-1.94),Ci=this._sub(Si,ji);this._crossProduct(Ci,this._sub(o,ji))>0?this._rightPerpendicular(Ci):this._leftPerpendicular(Ci);var wi=[Ci[0]/8,Ci[1]/8],Li=this._sub(this._mid(ji,Si),wi);i.push([Li,o]);break;case v.k.LineExcludingLastSegment:for(var Ii=this._arrowPath(a),Ti=[],Ai=Ii.length-2;Ai--;)Ti.push(Ii[Ai]);i.push(Ti);break;case v.k.MultivertexArrow:var zi=this._arrowPath(a),Fi=[];this._addArrow(Fi,zi,!1),i.push(Fi);break;case v.k.CrossedArrow:var Ri=this._arrowPath(a),Ni=[];this._addArrow(Ni,Ri,!0),i.push(Ni);break;case v.k.ChevronArrow:var Ei=this._arrowLastSeg(a),Gi=Object(x.a)(Ei,2),Hi=Gi[0],Di=Gi[1],Xi=10*this._geomUnitsPerPoint,Bi=this._sub(o,Hi);this._normalize(Bi);var Yi=this._crossProduct(Bi,this._sub(Di,Hi)),Ui=this._leftPerp(Bi),Vi=[Di[0]-Ui[0]*Yi*2,Di[1]-Ui[1]*Yi*2],Wi=[];Wi.push([Di[0]+Bi[0]*Xi,Di[1]+Bi[1]*Xi]),Wi.push(o),Wi.push([Vi[0]+Bi[0]*Xi,Vi[1]+Bi[1]*Xi]),i.push(Wi);break;case v.k.ChevronArrowOffset:var Ji=this._arrowLastSeg(a),qi=Object(x.a)(Ji,2),$i=qi[0],Zi=qi[1],Ki=this._sub(o,$i);this._normalize(Ki);var Qi=this._crossProduct(Ki,this._sub(Zi,$i));this._leftPerpendicular(Ki);var tr=[Zi[0]-Ki[0]*Qi,Zi[1]-Ki[1]*Qi],er=[];er.push([tr[0]+Ki[0]*Qi*.5,tr[1]+Ki[1]*Qi*.5]),er.push(this._mid(tr,o)),er.push([tr[0]-Ki[0]*Qi*.5,tr[1]-Ki[1]*Qi*.5]),i.push(er);break;case v.k.PartialFirstSegment:var ir=this._arrowLastSeg(a),rr=Object(x.a)(ir,2),nr=rr[0],ar=rr[1],sr=this._sub(o,nr);this._normalize(sr);var or=this._crossProduct(sr,this._sub(ar,nr));this._leftPerpendicular(sr);var hr=[ar[0]-sr[0]*or,ar[1]-sr[1]*or];i.push([nr,hr]);break;case v.k.Arch:var lr=this._cp2(a,0,-1),cr=this._cp3(a,lr,.5,1),ur=this._sub(o,lr),fr=this._mix(cr,1,ur,.55),vr=this._mix(cr,1,ur,-.55),mr=[o];this._addBezier2(mr,o,fr,cr,4),this._addBezier2(mr,cr,vr,lr,4),i.push(mr);break;case v.k.CurvedParallelTicks:var dr=this._cp2(a,-4,1),pr=this._cp3(a,dr,.882353,-1.94),_r=this._sub(pr,dr);this._crossProduct(_r,this._sub(o,dr))>0?this._rightPerpendicular(_r):this._leftPerpendicular(_r);var yr=[_r[0]/8,_r[1]/8],gr=this._sub(this._mid(dr,pr),yr),br=this._sub(this._mix(dr,.75,pr,.25),yr),kr=this._sub(this._mix(dr,.25,pr,.75),yr),Or=[dr];this._addBezier2(Or,dr,br,gr,3),this._addBezier2(Or,gr,kr,pr,3),i.push(Or);for(var xr=0;xr<8;xr++){var Pr=Or[2*xr+1],Mr=[this._clone(Pr)];Mr.push(this._add(Pr,[_r[0]/4,_r[1]/4])),i.push(Mr)}break;case v.k.Arc90Degrees:var jr=this._cp2(a,0,-1),Sr=this._cp3(a,jr,.5,1),Cr=[jr];this._add90DegArc(Cr,jr,o,Sr),i.push(Cr);break;case v.k.FullGeometry:default:i.push(a)}}}}catch(wr){n.e(wr)}finally{n.f()}return i}}]),t}(),j=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new w(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();j.instance=null;var S,C,w=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,r,a){var s;return Object(n.a)(this,i),(s=e.call(this,t,!0,!0))._curveHelper=new p,s._beginCut=(void 0!==r.beginCut?r.beginCut:1)*a,s._endCut=(void 0!==r.endCut?r.endCut:1)*a,s._middleCut=(void 0!==r.middleCut?r.middleCut:0)*a,s._invert=void 0!==r.invert&&r.invert,s._beginCut<0&&(s._beginCut=0),s._endCut<0&&(s._endCut=0),s._middleCut<0&&(s._middleCut=0),s}return Object(a.a)(i,[{key:"processPath",value:function(t){var e=this._beginCut,i=this._endCut,r=this._middleCut,n=this._curveHelper.calculatePathLength(t),a=[];if(this._invert)if(0===e&&0===i&&0===r);else if(e+i+r>=n)a.push(t);else{var s=this._curveHelper.getSubCurve(t,0,e);s&&a.push(s),(s=this._curveHelper.getSubCurve(t,.5*(n-r),.5*(n+r)))&&a.push(s),(s=this._curveHelper.getSubCurve(t,n-i,i))&&a.push(s)}else if(0===e&&0===i&&0===r)a.push(t);else if(e+i+r>=n);else if(0===r){var o=this._curveHelper.getSubCurve(t,e,n-i);o&&a.push(o)}else{var h=this._curveHelper.getSubCurve(t,e,.5*(n-r));h&&a.push(h),(h=this._curveHelper.getSubCurve(t,.5*(n+r),n-i))&&a.push(h)}return 0===a.length?null:{paths:a}}}]),i}(h.a),L=1e-7,I=function(){function t(){Object(n.a)(this,t),this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}return Object(a.a)(t,[{key:"isEmpty",value:function(){return 0===this._values.length}},{key:"size",value:function(){return this._values.length}},{key:"init",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this._setEmpty(),!t||0===t.length)return!1;for(var r=0;r<t.length;r++){var n=Math.abs(t[r]);i&&n<L&&(n=L),this._values.push(n),this._length+=n}return e&&1&t.length&&(this._length*=2),0!==this._length&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}},{key:"scale",value:function(t){for(var e=this._values?this._values.length:0,i=0;i<e;++i)this._values[i]*=t;this._length*=t,this.extPtGap*=t,this.ctrlPtGap*=t}},{key:"addValue",value:function(t){this._length+=t,this._values.push(t)}},{key:"firstValue",value:function(){return this._values[0]}},{key:"lastValue",value:function(){return this._values[this._values.length-1]}},{key:"nextValue",value:function(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}},{key:"reset",value:function(){this._currentValue=-1}},{key:"length",value:function(){return this._length}},{key:"_setEmpty",value:function(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}}]),t}();(C=S||(S={}))[C.FAIL=0]="FAIL",C[C.END=1]="END",C[C.CONTINUE=2]="CONTINUE";var T=function(){function t(){Object(n.a)(this,t),this.reset()}return Object(a.a)(t,[{key:"reset",value:function(){this.segment=-1,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}},{key:"isValid",value:function(){return-1!==this.segment}},{key:"copyTo",value:function(t){t.segment=this.segment,t.segmentLength=this.segmentLength,t.abscissa=this.abscissa,t.isPathEnd=this.isPathEnd,t.isPartEnd=this.isPartEnd}}]),t}(),A=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(n.a)(this,i),(t=e.call(this,r,a))._tolerance=m,t._currentPosition=new T,t}return Object(a.a)(i,[{key:"updateTolerance",value:function(t){this._tolerance=m*t}},{key:"init",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i?(this._patternLength=e.length(),this._partExtPtGap=e.extPtGap,this._partCtrlPtGap=e.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._path=t,this._seg=-1,this._setPosAtNextPart()}},{key:"curPositionIsValid",value:function(){return this._currentPosition.isValid()}},{key:"nextPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.FAIL,i=new T;return!!this._nextPosition(t,i,null,e)&&(i.copyTo(this._currentPosition),!0)}},{key:"curPointAndAngle",value:function(t){t.pt=this._getPoint(this._currentPosition);var e=this._getAngle(this._currentPosition),i=Object(x.a)(e,2),r=i[0],n=i[1];t.ca=r,t.sa=n}},{key:"nextPointAndAngle",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.FAIL,r=new T;if(!this._nextPosition(t,r,null,i))return!1;r.copyTo(this._currentPosition),e.pt=this._getPoint(r);var n=this._getAngle(r),a=Object(x.a)(n,2),s=a[0],o=a[1];return e.ca=s,e.sa=o,!0}},{key:"nextCurve",value:function(t){if(0===t)return null;var e=[],i=new T;return this._nextPosition(t,i,e,S.END)?(i.copyTo(this._currentPosition),e):null}},{key:"isPathEnd",value:function(){return this._currentPosition.isPathEnd}},{key:"getPathEnd",value:function(){if(-1===this._currentPosition.segment)throw new Error("missing segment");return this._path[this._currentPosition.segment+1]}},{key:"_nextPosition",value:function(t,e,i,r){if(this._currentPosition.isPathEnd)return!1;var n=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(n/=this._currentPosition.segmentLength),this._currentPosition.copyTo(e);e.abscissa+t*this._partLengthRatio>e.segmentLength+this._tolerance;){if(i){if(0===i.length)if(0===n){var a=this._path[e.segment];i.push([a[0],a[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,n));var s=this._path[e.segment+1];i.push([s[0],s[1]])}if(n=0,t-=(e.segmentLength-e.abscissa)/this._partLengthRatio,this._partSegCount)e.segment=this._nextSegment(),e.segmentLength=this.calculateSegLength(this._path,e.segment),e.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return r!==S.FAIL&&(e.segmentLength=this.calculateSegLength(this._path,e.segment),e.isPartEnd=!0,r===S.END?(e.abscissa=e.segmentLength,e.isPathEnd=!0):e.abscissa=e.segmentLength+t,!0);this._currentPosition.copyTo(e)}}if(e.abscissa+=t*this._partLengthRatio,i){if(0===i.length)if(0===n){var o=this._path[e.segment];i.push([o[0],o[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,n));var h=e.abscissa/e.segmentLength;if(1===h){var l=this._path[e.segment+1];i.push([l[0],l[1]])}else i.push(this.getSegCoord2D(this._path,e.segment,h))}return this._partSegCount||Math.abs(e.abscissa-e.segmentLength)<this._tolerance&&(e.isPathEnd=this._partIsLast,e.isPartEnd=!0),!0}},{key:"_getPoint",value:function(t){if(-1===t.segment)throw new Error("missing segment");var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegCoord2D(this._path,t.segment,e)}},{key:"_getAngle",value:function(t){if(-1===t.segment)throw new Error("missing segment");var e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegAngleCS(this._path,t.segment,e)}},{key:"_setPosAtNextPart",value:function(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.calculateSegLength(this._path,this._nextSegment()),this._partSegCount++,1===Object(h.f)(this._path[this._getEndPointIndex()])){this._partIsLast=!this._hasNextSegment();break}for(var t=this._partSegCount;t;)this._previousSegment(),--t;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.calculateSegLength(this._path,this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;var e=this._getStartPointIndex();this._ctrlPtBegin=1===Object(h.f)(this._path[e]);var i=e+this._partSegCount+1;if(i>=this._path.length&&(i=0),this._ctrlPtEnd=1===Object(h.f)(this._path[i]),this._patternLength>0){var r=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,n=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap,a=Math.round((this._partLength-(r+n))/this._patternLength);a<=0&&(a=r+n>0?0:1),this._partLengthRatio=this._partLength/(r+n+a*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}},{key:"_hasNextSegment",value:function(){return this._seg<this._path.length-2}},{key:"_previousSegment",value:function(){return--this._seg}},{key:"_nextSegment",value:function(){return++this._seg}},{key:"_getStartPointIndex",value:function(){return this._seg}},{key:"_getEndPointIndex",value:function(){return this._seg+1}}]),i}(p),z=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new F(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();z.instance=null;var F=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,r,a){var s,o,h;return Object(n.a)(this,i),(h=e.call(this,t,!0,!0))._walker=new A,h._walker.updateTolerance(a),h._endings=r.lineDashEnding,h._customDashPos=-(null!==(s=r.offsetAlongLine)&&void 0!==s?s:0)*a,h._offsetAtEnd=(null!==(o=r.customEndingOffset)&&void 0!==o?o:0)*a,h._pattern=new I,h._pattern.init(r.dashTemplate,!0),h._pattern.scale(a),h}return Object(a.a)(i,[{key:"processPath",value:function(t){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[t]};if(!this.iteratePath){var e=!0;switch(this._endings){case v.r.HalfPattern:case v.r.HalfGap:default:this._pattern.extPtGap=0;break;case v.r.FullPattern:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case v.r.FullGap:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case v.r.NoConstraint:this.isClosed||(e=!1);break;case v.r.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var i=this._walker.calculatePathLength(t);if(this._pattern.isEmpty()||i<.1*this._pattern.length())return{paths:[t]};if(!this._walker.init(t,this._pattern,e))return{paths:[t]}}var r;if(this.iteratePath)r=this._pattern.nextValue();else{var n;switch(this._endings){case v.r.HalfPattern:default:n=.5*this._pattern.firstValue();break;case v.r.HalfGap:n=.5*-this._pattern.lastValue();break;case v.r.FullGap:n=-this._pattern.lastValue();break;case v.r.FullPattern:n=0;break;case v.r.NoConstraint:case v.r.Custom:n=-this._customDashPos}var a=n/this._pattern.length();n=(a-=Math.floor(a))*this._pattern.length(),this._pattern.reset(),r=this._pattern.nextValue();for(var s=!1;n>=r;)n-=r,r=this._pattern.nextValue(),s=!s;r-=n,s?(this._walker.nextPosition(r),r=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(r),r=this._pattern.nextValue(),this._walker.nextPosition(r),r=this._pattern.nextValue())}var o=this._walker.nextCurve(r);return o?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,1),d.mergePath(o,this._firstCurve),this._firstCurve=null)):(r=this._pattern.nextValue(),!this._walker.nextPosition(r)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(o=this._firstCurve,this._firstCurve=null)):this.iteratePath=!0):(this.iteratePath=!1,o=this._firstCurve,this._firstCurve=null),{paths:[o]}}}]),i}(h.a),R=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new N(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();R.instance=null;var N=function(){function t(e,i,r){switch(Object(n.a)(this,t),this._inputGeometries=e,this._curveHelper=new p,this._width=(void 0!==i.width?i.width:2)*r,i.method){case v.l.Mitered:default:this._method=v.m.Mitered;break;case v.l.Bevelled:this._method=v.m.Bevelled;break;case v.l.Rounded:case v.l.TrueBuffer:this._method=v.m.Rounded;break;case v.l.Square:this._method=v.m.Square}this._option=i.option,this._offsetFlattenError=m*r}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.d)(t)&&this._width>0){if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)-2*this._width<0)return t;var e=[];return e.push([[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]),e.push([[t.xmin+this._width,t.ymin+this._width],[t.xmax-this._width,t.ymin+this._width],[t.xmax-this._width,t.ymax-this._width],[t.xmin+this._width,t.ymax-this._width],[t.xmin+this._width,t.ymin+this._width]]),{rings:e}}if(Object(o.g)(t)&&this._width>0){var i,n=[],a=Object(r.a)(t.rings);try{for(a.s();!(i=a.n()).done;){var s=i.value,h=this._curveHelper.calculatePathLength(s),l=this._curveHelper.offset(s,this._width,this._method,4,this._offsetFlattenError);l&&(h<0&&l.reverse(),n.push(l))}}catch(c){a.e(c)}finally{a.f()}if(n.length)return{rings:n}}t=this._inputGeometries.next()}return null}}]),t}(),E=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new G(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();E.instance=null;var G=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,r,a){var s;return Object(n.a)(this,i),(s=e.call(this,t,!1,!0))._curveHelper=new p,s._length=(void 0!==r.length?r.length:20)*a,s._angle=void 0!==r.angle?r.angle:225,s._position=void 0!==r.position?r.position:50,s._length<0&&(s._length=-s._length),s._position<20&&(s._position=20),s._position>80&&(s._position=80),s._mirror=!1,s}return Object(a.a)(i,[{key:"processPath",value:function(t){if(this._curveHelper.isEmpty(t,!1))return null;var e=t[0],i=t[t.length-1],r=[i[0]-e[0],i[1]-e[1]];this._curveHelper.normalize(r);var n=[e[0]+(i[0]-e[0])*this._position/100,e[1]+(i[1]-e[1])*this._position/100],a=Math.cos((90-this._angle)/180*Math.PI),s=Math.sin((90-this._angle)/180*Math.PI);return this._mirror&&(s=-s),this._mirror=!this._mirror,{paths:[[e,[n[0]-this._length/2*a,n[1]-this._length/2*s],[n[0]+this._length/2*a,n[1]+this._length/2*s],i]]}}}]),i}(h.a),H=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new D(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();H.instance=null;var D=function(){function t(e,i,r){Object(n.a)(this,t),this._inputGeometries=e,this._offsetX=void 0!==i.offsetX?i.offsetX*r:0,this._offsetY=void 0!==i.offsetY?-i.offsetY*r:0}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(Object(o.d)(t))return{xmin:t.xmin+this._offsetX,xmax:t.xmax+this._offsetX,ymin:t.ymin+this._offsetY,ymax:t.ymax+this._offsetY};if(Object(o.g)(t)){var e=Object(s.a)(t);return this._moveMultipath(e.rings,this._offsetX,this._offsetY),e}if(Object(o.h)(t)){var i=Object(s.a)(t);return this._moveMultipath(i.paths,this._offsetX,this._offsetY),i}if(Object(o.e)(t)){var r=Object(s.a)(t);return this._movePath(r.points,this._offsetX,this._offsetY),r}if(Object(o.f)(t))return{x:t.x+this._offsetX,y:t.y+this._offsetY};t=this._inputGeometries.next()}return null}},{key:"_moveMultipath",value:function(t,e,i){if(t){var n,a=Object(r.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;this._movePath(s,e,i)}}catch(o){a.e(o)}finally{a.f()}}}},{key:"_movePath",value:function(t,e,i){if(t){var n,a=Object(r.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;s[0]+=e,s[1]+=i}}catch(o){a.e(o)}finally{a.f()}}}}]),t}(),X=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new B(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();X.instance=null;var B=function(){function t(e,i,r){var a;Object(n.a)(this,t),this._inputGeometries=e,this._curveHelper=new p,this._offset=(null!==(a=i.offset)&&void 0!==a?a:1)*r,this._method=i.method,this._option=i.option,this._offsetFlattenError=m*r}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._offset)return t;if(Object(o.d)(t)){if(this._method===v.m.Rounded&&this._offset>0){var e=[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]],i=this._curveHelper.offset(e,-this._offset,this._method,4,this._offsetFlattenError);return i?{rings:[i]}:null}if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._offset>0)return{xmin:t.xmin-this._offset,xmax:t.xmax+this._offset,ymin:t.ymin-this._offset,ymax:t.ymax+this._offset}}if(Object(o.g)(t)){var n,a=[],s=Object(r.a)(t.rings);try{for(s.s();!(n=s.n()).done;){var h=n.value,l=this._curveHelper.offset(h,-this._offset,this._method,4,this._offsetFlattenError);l&&a.push(l)}}catch(p){s.e(p)}finally{s.f()}if(a.length)return{rings:a}}if(Object(o.h)(t)){var c,u=[],f=Object(r.a)(t.paths);try{for(f.s();!(c=f.n()).done;){var m=c.value,d=this._curveHelper.offset(m,-this._offset,this._method,4,this._offsetFlattenError);d&&u.push(d)}}catch(p){f.e(p)}finally{f.f()}if(u.length)return{paths:u}}t=this._inputGeometries.next()}return null}}]),t}(),Y=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new U(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();Y.instance=null;var U=function(){function t(e,i,r){Object(n.a)(this,t),this._inputGeometries=e,this._reverse=void 0===i.reverse||i.reverse}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(!this._reverse)return t;if(Object(o.h)(t)){var e=Object(s.a)(t);return Object(h.h)(e.paths),e}t=this._inputGeometries.next()}return null}}]),t}(),V=i(180),W=i(205),J=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new q(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();J.instance=null;var q=function(){function t(e,i,r){Object(n.a)(this,t),this._inputGeometries=e,this._rotateAngle=void 0!==i.angle?i.angle*Math.PI/180:0}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._rotateAngle)return t;var e=Object(V.g)();Object(W.a)(e,t);var i=(e[2]+e[0])/2,r=(e[3]+e[1])/2;if(Object(o.d)(t)){var n={rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]};return this._rotateMultipath(n.rings,i,r),n}if(Object(o.g)(t)){var a=Object(s.a)(t);return this._rotateMultipath(a.rings,i,r),a}if(Object(o.h)(t)){var h=Object(s.a)(t);return this._rotateMultipath(h.paths,i,r),h}if(Object(o.e)(t)){var l=Object(s.a)(t);return this._rotatePath(l.points,i,r),l}if(Object(o.f)(t))return t;t=this._inputGeometries.next()}return null}},{key:"_rotateMultipath",value:function(t,e,i){if(t){var n,a=Object(r.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;this._rotatePath(s,e,i)}}catch(o){a.e(o)}finally{a.f()}}}},{key:"_rotatePath",value:function(t,e,i){if(t){var n,a=Math.cos(this._rotateAngle),s=Math.sin(this._rotateAngle),o=Object(r.a)(t);try{for(o.s();!(n=o.n()).done;){var h=n.value,l=h[0]-e,c=h[1]-i;h[0]=e+l*a-c*s,h[1]=i+l*s+c*a}}catch(u){o.e(u)}finally{o.f()}}}}]),t}(),$=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new Z(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();$.instance=null;var Z=function(){function t(e,i,r){Object(n.a)(this,t),this._inputGeometries=e,this._xFactor=void 0!==i.xScaleFactor?i.xScaleFactor:1.15,this._yFactor=void 0!==i.yScaleFactor?i.yScaleFactor:1.15}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(1===this._xFactor&&1===this._yFactor)return t;var e=Object(V.g)();Object(W.a)(e,t);var i=(e[2]+e[0])/2,r=(e[3]+e[1])/2;if(Object(o.d)(t)){var n={rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]};return this._scaleMultipath(n.rings,i,r),n}if(Object(o.g)(t)){var a=Object(s.a)(t);return this._scaleMultipath(a.rings,i,r),a}if(Object(o.h)(t)){var h=Object(s.a)(t);return this._scaleMultipath(h.paths,i,r),h}if(Object(o.e)(t)){var l=Object(s.a)(t);return this._scalePath(l.points,i,r),l}if(Object(o.f)(t))return t;t=this._inputGeometries.next()}return null}},{key:"_scaleMultipath",value:function(t,e,i){if(t){var n,a=Object(r.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;this._scalePath(s,e,i)}}catch(o){a.e(o)}finally{a.f()}}}},{key:"_scalePath",value:function(t,e,i){if(t){var n,a=Object(r.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value,o=(s[0]-e)*this._xFactor,h=(s[1]-i)*this._yFactor;s[0]=e+o,s[1]=i+h}}catch(l){a.e(l)}finally{a.f()}}}}]),t}(),K=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new Q(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();K.instance=null;var Q=function(){function t(e,i,r){Object(n.a)(this,t),this._inputGeometries=e,this._height=(void 0!==i.amplitude?i.amplitude:2)*r,this._period=(void 0!==i.period?i.period:3)*r,this._style=i.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new I,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new A,this._walker.updateTolerance(r)}return Object(a.a)(t,[{key:"next",value:function(){for(var t=this._inputGeometries.next();t;){if(0===this._height||0===this._period)return t;if(Object(o.h)(t)){var e=this._processGeom(t.paths);if(e.length)return{paths:e}}if(Object(o.g)(t)){var i=this._processGeom(t.rings);if(i.length)return{rings:i}}t=this._inputGeometries.next()}return null}},{key:"_processGeom",value:function(t){var e,i=[],n=Object(r.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(this._walker.init(a,this._pattern))switch(this._style){case v.n.Sinus:default:i.push(this._constructCurve(a,!1));break;case v.n.Square:i.push(this._constructSquare(a));break;case v.n.Triangle:i.push(this._constructTriangle(a));break;case v.n.Random:i.push(this._constructCurve(a,!0))}else i.push(a)}}catch(s){n.e(s)}finally{n.f()}return i}},{key:"_constructCurve",value:function(t,e){var i=new d,r=this._walker.calculatePathLength(t),n=Math.round(r/this._period);0===n&&(n=1);var a=16*n+1,s=r/n,o=this._period/16,h=1/a,l=2*Math.PI*r/s,c=2*Math.PI*Math.random(),u=2*Math.PI*Math.random(),f=2*Math.PI*Math.random(),v=.75-Math.random()/2,m=.75-Math.random()/2,p={};this._walker.curPointAndAngle(p),i.startPath(p.pt);for(var _=0;;){if(!this._walker.nextPointAndAngle(o,p)){i.lineTo(t[t.length-1]);break}var y=_,g=void 0;if(_+=h,e){var b=this._height/2*(1+.3*Math.sin(v*l*y+c));g=b*Math.sin(l*y+u),g+=b*Math.sin(m*l*y+f),g/=2}else g=.5*this._height*Math.sin(.5*l*y);i.lineTo([p.pt[0]-g*p.sa,p.pt[1]+g*p.ca])}return i.path()}},{key:"_constructSquare",value:function(t){var e=new d,i=this._walker.calculatePathLength(t);Math.round(i/this._period);for(var r=!0;;){var n=!1;if(this._walker.curPositionIsValid()){var a={};this._walker.curPointAndAngle(a);var s={};if(this._walker.nextPointAndAngle(this._period,s)){var o={};this._walker.nextPointAndAngle(this._period,o)&&(r?(e.startPath(a.pt),r=!1):e.lineTo(a.pt),e.lineTo([a.pt[0]-this._height/2*a.sa,a.pt[1]+this._height/2*a.ca]),e.lineTo([s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca]),e.lineTo([s.pt[0]+this._height/2*s.sa,s.pt[1]-this._height/2*s.ca]),e.lineTo([o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca]),n=!0)}}if(!n){e.lineTo(this._walker.getPathEnd());break}}return e.path()}},{key:"_constructTriangle",value:function(t){var e=new d,i=this._walker.calculatePathLength(t);Math.round(i/this._period);for(var r=!0;;){var n=!1;if(this._walker.curPositionIsValid()){var a={};this._walker.curPointAndAngle(a);var s={};if(this._walker.nextPointAndAngle(this._period/2,s)){var o={};this._walker.nextPointAndAngle(this._period,o)&&(this._walker.nextPosition(this._period/2)&&(r?(e.startPath(a.pt),r=!1):e.lineTo(a.pt),e.lineTo([s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca]),e.lineTo([o.pt[0]+this._height/2*o.sa,o.pt[1]-this._height/2*o.ca])),n=!0)}}if(!n){e.lineTo(this._walker.getPathEnd());break}}return e.path()}}]),t}(),tt=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new et(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();tt.instance=null;var et=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,r,a){var s,o;return Object(n.a)(this,i),(o=e.call(this,t,!0,!0))._geometryWalker=new A,o._geometryWalker.updateTolerance(a),o._angleToLine=null===(s=r.angleToLine)||void 0===s||s,o._offset=(r.offset?r.offset:0)*a,o._originalEndings=r.endings,o._offsetAtEnd=(r.customEndingOffset?r.customEndingOffset:0)*a,o._position=-(r.offsetAlongLine?r.offsetAlongLine:0)*a,o._pattern=new I,o._pattern.init(r.placementTemplate,!1),o._pattern.scale(a),o._endings=o._originalEndings,o}return Object(a.a)(i,[{key:"processPath",value:function(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath)e=this._pattern.nextValue();else{this._originalEndings===v.t.WithFullGap&&this.isClosed?this._endings=v.t.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;var i,r=!0;switch(this._endings){case v.t.NoConstraint:i=-this._position,i=this._adjustPosition(i),r=!1;break;case v.t.WithHalfGap:default:i=-this._pattern.lastValue()/2;break;case v.t.WithFullGap:i=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case v.t.WithMarkers:i=0;break;case v.t.Custom:i=-this._position,i=this._adjustPosition(i),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(t,this._pattern,r))return null;this._pattern.reset();for(var n=0;i>n;)i-=n,n=this._pattern.nextValue();e=n-=i,this.iteratePath=!0}var a={};return this._geometryWalker.nextPointAndAngle(e,a)?this._endings===v.t.WithFullGap&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===v.t.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(a.pt[0]-this._offset*a.sa,a.pt[1]+this._offset*a.ca),this._angleToLine&&this.internalPlacement.setRotateCS(a.ca,a.sa),this.internalPlacement):(this.iteratePath=!1,null)}},{key:"_adjustPosition",value:function(t){var e=t/this._pattern.length();return(e-=Math.floor(e))*this._pattern.length()}}]),i}(h.b),it=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new rt(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();it.instance=null;var rt=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,r,a){var s;return Object(n.a)(this,i),(s=e.call(this,t,!1,!0))._curveHelper=new p,s._angleToLine=void 0===r.angleToLine||r.angleToLine,s._offset=void 0!==r.offset?r.offset*a:0,s._type=r.extremityPlacement,s._position=void 0!==r.offsetAlongLine?r.offsetAlongLine*a:0,s._beginProcessed=!1,s}return Object(a.a)(i,[{key:"processPath",value:function(t){var e;switch(this._type){case v.f.Both:default:this._beginProcessed?(e=this._atExtremities(t,this._position,!1),this._beginProcessed=!1,this.iteratePath=!1):(e=this._atExtremities(t,this._position,!0),this._beginProcessed=!0,this.iteratePath=!0);break;case v.f.JustBegin:e=this._atExtremities(t,this._position,!0);break;case v.f.JustEnd:e=this._atExtremities(t,this._position,!1);case v.f.None:}return e}},{key:"_atExtremities",value:function(t,e,i){var r=t.length;if(r<2)return null;for(var n,a=i?1:r-2,s=i?r:-1,o=i?1:-1,l=0,c=i?t[0]:t[r-1],u=a;u!==s;u+=o){n=c,c=t[u];var f=this._curveHelper.calculateLength(n,c);if(l+f>e){var v=(e-l)/f,m=this._curveHelper.getAngleCS(n,c,v),d=Object(x.a)(m,2),p=d[0],_=d[1],y=Object(h.e)(n,c,v);return this.internalPlacement.setTranslate(y[0]-this._offset*_,y[1]+this._offset*p),this._angleToLine&&this.internalPlacement.setRotateCS(-p,-_),this.internalPlacement}l+=f}return null}}]),i}(h.b),nt=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new at(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();nt.instance=null;var at=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,r,a){var s;return Object(n.a)(this,i),(s=e.call(this,t,!0,!0))._walker=new A,s._walker.updateTolerance(a),s._angleToLine=void 0===r.angleToLine||r.angleToLine,s._offset=void 0!==r.offset?r.offset*a:0,s._beginGap=void 0!==r.beginPosition?r.beginPosition*a:0,s._endGap=void 0!==r.endPosition?r.endPosition*a:0,s._flipFirst=void 0===r.flipFirst||r.flipFirst,s._pattern=new I,s._pattern.init(r.positionArray,!1,!1),s._subPathLen=0,s._posCount=s._pattern.size(),s._isFirst=!0,s._prevPos=0,s}return Object(a.a)(i,[{key:"processPath",value:function(t){if(this._pattern.isEmpty())return null;var e;if(this.iteratePath){var i=this._pattern.nextValue()*this._subPathLen,r=this._beginGap+i;e=r-this._prevPos,this._prevPos=r}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=this._walker.calculatePathLength(t)-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(t,this._pattern,!1))return null;this._pattern.reset();var n=this._pattern.nextValue()*this._subPathLen,a=this._beginGap+n;e=a-this._prevPos,this._prevPos=a,this.iteratePath=!0}var s={};if(!this._walker.nextPointAndAngle(e,s,S.END))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(s.pt[0]-this._offset*s.sa,s.pt[1]+this._offset*s.ca);var o,h,l=this._isFirst&&this._flipFirst;return this._angleToLine?(o=s.ca,h=s.sa):(o=1,h=0),l&&(o=-o,h=-h),this.internalPlacement.setRotateCS(o,h),this._isFirst=!1,this._posCount--,0===this._posCount&&(this.iteratePath=!1),this.internalPlacement}}]),i}(h.b),st=i(247),ot=i(223);var ht=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new lt(t,e,i,r)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();ht.instance=null;var lt=function(){function t(e,i,r,a){var s,o;if(Object(n.a)(this,t),this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._stepX=Math.abs(null!==(s=i.stepX)&&void 0!==s?s:16)*r,this._stepY=Math.abs(null!==(o=i.stepY)&&void 0!==o?o:16)*r,0!==this._stepX&&0!==this._stepY&&e&&function(t){return void 0!==t.rings}(e)&&e.rings){var h;if(this._gridType=null!==(h=i.gridType)&&void 0!==h?h:v.u.Fixed,this._gridType===v.u.Random){var l,c,u=null!==(l=i.seed)&&void 0!==l?l:13;this._randomLCG=new st.a(1*u),this._randomness=(null!==(c=i.randomness)&&void 0!==c?c:100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0}else{var f,m,d,p;if(this._randomness=0,this._gridAngle=null!==(f=i.gridAngle)&&void 0!==f?f:0,this._shiftOddRows=null!==(m=i.shiftOddRows)&&void 0!==m&&m,this._offsetX=(null!==(d=i.offsetX)&&void 0!==d?d:0)*r,this._offsetY=(null!==(p=i.offsetY)&&void 0!==p?p:0)*r,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginX=0,this._graphicOriginY=0,this._internalPlacement=new ot.a,this._calculateMinMax(e),this._geometry=e}}return Object(a.a)(t,[{key:"next",value:function(){return this._geometry?this._nextInside():null}},{key:"_calculateMinMax",value:function(t){var e,i,n,a,s,o,h,l;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,s=o=Number.MAX_VALUE,h=l=-Number.MAX_VALUE;var c,u=Object(r.a)(t.rings);try{for(u.s();!(c=u.n()).done;)for(var f=c.value,v=f?f.length:0,m=0;m<v;++m)e=f[m][0]-this._graphicOriginX-this._offsetX,i=f[m][1]-this._graphicOriginY-this._offsetY,n=this._cosAngle*e-this._sinAngle*i,a=this._sinAngle*e+this._cosAngle*i,s=Math.min(s,n),h=Math.max(h,n),o=Math.min(o,a),l=Math.max(l,a)}catch(d){u.e(d)}finally{u.f()}s+=this._graphicOriginX,h+=this._graphicOriginX,o+=this._graphicOriginY,l+=this._graphicOriginY,this._xMin=Math.round(s/this._stepX),this._xMax=Math.round(h/this._stepX),this._yMin=Math.round(o/this._stepY),this._yMax=Math.round(l/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1}},{key:"_nextInside",value:function(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}var t=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(t+=.5*this._stepX);var e=this._currentY*this._stepY+this._offsetY,i=void 0,r=void 0;return this._currentX++,this._gridType===v.u.Random?(i=this._graphicOriginX+t+this._stepX*this._randomness*(.5-this._randomLCG.getFloat())*2/3,r=this._graphicOriginY+e+this._stepY*this._randomness*(.5-this._randomLCG.getFloat())*2/3):(i=this._graphicOriginX+this._cosAngle*t+this._sinAngle*e,r=this._graphicOriginY-this._sinAngle*t+this._cosAngle*e),this._internalPlacement.setTranslate(i,r),this._internalPlacement}}}]),t}(),ct=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new ut(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();ct.instance=null;var ut=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,r,a){var s;return Object(n.a)(this,i),(s=e.call(this,t,!0,!0))._curveHelper=new p,s._angleToLine=void 0===r.angleToLine||r.angleToLine,s._offset=void 0!==r.offset?r.offset*a:0,s._relativeTo=r.relativeTo,s._position=void 0!==r.startPointOffset?r.startPointOffset*a:0,s._epsilon=.001*a,s}return Object(a.a)(i,[{key:"processPath",value:function(t){var e=this._position;if(this._relativeTo===v.v.SegmentMidpoint){for(this.iteratePath||(this._segmentCount=t.length,this._curSegment=1,this.iteratePath=!0);this._curSegment<this._segmentCount;){var i=this._curSegment;this._curSegment++;var r=t[i-1],n=t[i],a=this._curveHelper.calculateLength(r,n);if(!(a<this._epsilon)){var s=.5+this._position/a,o=this._curveHelper.getAngleCS(r,n,s),l=Object(x.a)(o,2),c=l[0],u=l[1],f=Object(h.e)(r,n,s);return this.internalPlacement.setTranslate(f[0]-this._offset*u,f[1]+this._offset*c),this._angleToLine&&this.internalPlacement.setRotateCS(c,u),this.internalPlacement}}return this.iteratePath=!1,null}this._relativeTo===v.v.LineEnd&&Object(h.i)(t);var m=this.onLine(t,e);return this._relativeTo===v.v.LineEnd&&Object(h.i)(t),m}},{key:"onLine",value:function(t,e){var i,r=!1;switch(this._relativeTo){case v.v.LineMiddle:default:i=this._curveHelper.calculatePathLength(t)/2+e;break;case v.v.LineBeginning:i=e;break;case v.v.LineEnd:i=e,r=!0}for(var n,a=t.length,s=0,o=t[0],l=1;l<a;++l){n=o,o=t[l];var c=this._curveHelper.calculateLength(n,o);if(s+c>i){var u=(i-s)/c,f=this._curveHelper.getAngleCS(n,o,u),m=Object(x.a)(f,2),d=m[0],p=m[1],_=Object(h.e)(n,o,u),y=r?-this._offset:this._offset;return this.internalPlacement.setTranslate(_[0]-y*p,_[1]+y*d),this._angleToLine&&(r?this.internalPlacement.setRotateCS(-d,-p):this.internalPlacement.setRotateCS(d,p)),this.internalPlacement}s+=c}return null}}]),i}(h.b),ft=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new vt(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();ft.instance=null;var vt=function(t){Object(u.a)(i,t);var e=Object(f.a)(i);function i(t,r,a){var s;return Object(n.a)(this,i),(s=e.call(this,t,!0,!0))._curveHelper=new p,s._angleToLine=void 0===r.angleToLine||r.angleToLine,s._offset=void 0!==r.offset?r.offset*a:0,s._endPoints=void 0===r.placeOnEndPoints||r.placeOnEndPoints,s._controlPoints=void 0===r.placeOnControlPoints||r.placeOnControlPoints,s._regularVertices=void 0===r.placeOnRegularVertices||r.placeOnRegularVertices,s._tags=[],s._tagIterator=0,s}return Object(a.a)(i,[{key:"processPath",value:function(t){if(this.iteratePath||(this._preparePath(t),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;var e=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(e[2]);var i=e[0],r=e[1];if(0!==this._offset){var n=Math.cos(e[2]),a=Math.sin(e[2]);i-=this._offset*a,r+=this._offset*n}return this.internalPlacement.setTranslate(i,r),this._tagIterator++,this.internalPlacement}},{key:"_preparePath",value:function(t){this._tags.length=0,this._tagIterator=0;for(var e,i,r=Object(h.g)(t),n=t.length-1,a=0,s=0,o=0,l=0,c=0;a<n;){e=t[++a-1],i=t[a];var u=Object(h.f)(e),f=Object(h.f)(i);(this._angleToLine||0!==this._offset)&&(l=this._curveHelper.getAngle(e,i,0)),1===a?r?(s=l,o=u):(this._endPoints||this._controlPoints&&1===u)&&this._tags.push([e[0],e[1],l]):1===u?this._controlPoints&&this._tags.push([e[0],e[1],mt(c,l)]):this._regularVertices&&this._tags.push([e[0],e[1],mt(c,l)]),(this._angleToLine||0!==this._offset)&&(c=this._curveHelper.getAngle(e,i,1)),a===n&&(r?1===f||1===o?this._controlPoints&&this._tags.push([i[0],i[1],mt(c,s)]):this._regularVertices&&this._tags.push([i[0],i[1],mt(c,s)]):(this._endPoints||this._controlPoints&&1===f)&&this._tags.push([i[0],i[1],c]))}this._tagIterator=0}}]),i}(h.b);function mt(t,e){for(var i=Math.PI;Math.abs(e-t)>i+2e-15;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}var dt=function(){function t(){Object(n.a)(this,t)}return Object(a.a)(t,[{key:"execute",value:function(t,e,i,r){return new pt(t,e,i)}}],[{key:"local",value:function(){return null===t.instance&&(t.instance=new t),t.instance}}]),t}();dt.instance=null;var pt=function(){function t(e,i,r){Object(n.a)(this,t),this._geometry=e,this._offsetX=void 0!==i.offsetX?i.offsetX*r:0,this._offsetY=void 0!==i.offsetY?i.offsetY*r:0,this._method=void 0!==i.method?i.method:v.w.OnPolygon,this._internalPlacement=new ot.a}return Object(a.a)(t,[{key:"next",value:function(){var t=this._geometry;return this._geometry=null,t&&function(t){return void 0!==t.rings}(t)?this._polygonCenter(t):null}},{key:"_polygonCenter",value:function(t){switch(this._method){case v.w.OnPolygon:case v.w.CenterOfMass:case v.w.BoundingBoxCenter:}var e=Object(V.g)();return Object(W.a)(e,t),this._internalPlacement.setTranslate((e[2]+e[0])/2+this._offsetX,(e[3]+e[1])/2+this._offsetY),!0?this._internalPlacement:null}}]),t}();function _t(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return l.local();case"CIMGeometricEffectArrow":return g.local();case"CIMGeometricEffectBuffer":return k.local();case"CIMGeometricEffectControlMeasureLine":return P.local();case"CIMGeometricEffectCut":return j.local();case"CIMGeometricEffectDashes":return z.local();case"CIMGeometricEffectDonut":return R.local();case"CIMGeometricEffectJog":return E.local();case"CIMGeometricEffectMove":return H.local();case"CIMGeometricEffectOffset":return X.local();case"CIMGeometricEffectReverse":return Y.local();case"CIMGeometricEffectRotate":return J.local();case"CIMGeometricEffectScale":return $.local();case"CIMGeometricEffectWave":return K.local()}return null}function yt(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return tt.local();case"CIMMarkerPlacementAtExtremities":return it.local();case"CIMMarkerPlacementAtRatioPositions":return nt.local();case"CIMMarkerPlacementInsidePolygon":return ht.local();case"CIMMarkerPlacementOnLine":return ct.local();case"CIMMarkerPlacementOnVertices":return ft.local();case"CIMMarkerPlacementPolygonCenter":return dt.local()}return null}},292:function(t,e,i){"use strict";i.d(e,"a",(function(){return it})),i.d(e,"b",(function(){return A}));var r=i(5),n=i(60),a=i(14),s=i(16),o=i(155),h=i(154),l=i.n(h),c=i(202),u=i(161),f=i(156),v=i(146),m=i(167),d=i(267),p=i(260),_=i(235),y=i(170),g=i(367),b=i(289),k=i(322),O=i(325),x=i(158),P=i(378),M=i(379),j=f.a.getLogger("esri.symbols.cim.cimAnalyzer");function S(t){switch(t){case"Butt":return y.e.BUTT;case"Square":return y.e.SQUARE;default:return y.e.ROUND}}function C(t){switch(t){case"Bevel":return y.p.BEVEL;case"Miter":return y.p.MITER;default:return y.p.ROUND}}function w(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return j.warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),"center"}}function L(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function I(t,e,i,r){var n;t[e]?n=t[e]:(n={},t[e]=n),n[i]=r}function T(t){var e=t.markerPlacement;return e&&e.angleToLine?y.a.MAP:y.a.SCREEN}function A(t,e,i,r,n){return z.apply(this,arguments)}function z(){return(z=Object(o.a)(l.a.mark((function t(e,i,r,a,s){var o,h,c,u,f,v,m,d,_;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null!==a&&void 0!==a?a:[],e){t.next=3;break}return t.abrupt("return",o);case 3:if(u={},"CIMSymbolReference"===e.type){t.next=6;break}return t.abrupt("return",(j.error("Expect cim type to be 'CIMSymbolReference'"),o));case 6:if(h=e.symbol,!(c=e.primitiveOverrides)){t.next=14;break}f=[],v=Object(n.a)(c);try{for(d=function(){var t=m.value,e=t.valueExpressionInfo;if(e&&i){var r=e.expression,n=Object(p.d)(r,i.spatialReference,i.fields).then((function(e){e&&I(u,t.primitiveName,t.propertyName,e)}));f.push(n)}else null!=t.value&&I(u,t.primitiveName,t.propertyName,t.value)},v.s();!(m=v.n()).done;)d()}catch(l){v.e(l)}finally{v.f()}if(t.t0=f.length>0,!t.t0){t.next=14;break}return t.next=14,Promise.all(f);case 14:if(nt(h,r,_=[]),t.t2=_.length>0,!t.t2){t.next=20;break}return t.next=20,Promise.all(_);case 20:t.t1=h.type,t.next="CIMPointSymbol"===t.t1||"CIMLineSymbol"===t.t1||"CIMPolygonSymbol"===t.t1?23:24;break;case 23:F(h,c,u,i,o,r,s);case 24:return t.abrupt("return",o);case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function F(t,e,i,r,n,a,o){if(t){var h=t.symbolLayers;if(h){var l,c=t.effects,u=_.b.getSize(t);"CIMPointSymbol"===t.type&&"Map"===t.angleAlignment&&(l=y.a.MAP);for(var f=h.length;f--;){var v,m=h[f];if(m&&!1!==m.enable){var d=void 0;c&&c.length&&(d=Object(s.a)(c));var p=m.effects;p&&p.length&&(c?(v=d).push.apply(v,Object(s.a)(p)):d=Object(s.a)(p));var g,b=[];_.c.findEffectOverrides(d,e,b),g=b.length>0?Q(d,b,i,r):d;var k=[];switch(_.c.findApplicableOverrides(m,e,k),m.type){case"CIMSolidFill":R(m,g,i,k,r,n);break;case"CIMPictureFill":N(m,g,i,k,r,a,n);break;case"CIMHatchFill":E(m,g,i,k,r,n);break;case"CIMGradientFill":G(m,g,i,k,r,n);break;case"CIMSolidStroke":H(m,g,i,k,r,n,"CIMPolygonSymbol"===t.type,u);break;case"CIMPictureStroke":D(m,g,i,k,r,n,"CIMPolygonSymbol"===t.type,u);break;case"CIMGradientStroke":X(m,g,i,k,r,n,"CIMPolygonSymbol"===t.type,u);break;case"CIMCharacterMarker":if(B(m,g,i,k,r,n))break;break;case"CIMPictureMarker":if(B(m,g,i,k,r,n))break;"CIMLineSymbol"===t.type&&(l=T(m)),Y(m,g,i,k,r,a,n,l,u);break;case"CIMVectorMarker":if(B(m,g,i,k,r,n))break;"CIMLineSymbol"===t.type&&(l=T(m)),U(m,g,i,k,r,n,a,l,u,o);break;default:j.error("Cannot analyze CIM layer",m.type)}}}}}}function R(t,e,i,r,n,s){var o=t.primitiveName,h=Object(b.e)(t.color),l=rt(r,o,e,null,null),c=Object(a.a)(l,2),u=c[0],f=c[1],v=Object(d.b)(JSON.stringify(t)+f).toString();s.push({type:"fill",templateHash:v,materialHash:u?function(){return v}:v,cim:t,materialOverrides:null,colorLocked:t.colorLocked,color:Z(o,i,"Color",n,h,$),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:e,applyRandomOffset:!1,sampleAlphaOnly:!0})}function N(t,e,i,r,n,s,o){var h=t.primitiveName,l=t.tintColor?Object(b.e)(t.tintColor):{r:255,g:255,b:255,a:1},c=rt(r,h,e,null,null),u=Object(a.a)(c,2),f=u[0],m=u[1],p=Object(d.b)(JSON.stringify(t)+m).toString(),_=Object(d.b)("".concat(t.url).concat(JSON.stringify(t.colorSubstitutions))).toString(),y=Object(b.f)(t.scaleX);if("width"in t){var g=t.width,k=1,O=s.getResource(t.url);Object(v.k)(O)&&(k=O.width/O.height),y/=k*(t.height/g)}o.push({type:"fill",templateHash:p,materialHash:f?function(){return _}:_,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:e,color:Z(h,i,"TintColor",n,l,$),height:Z(h,i,"Height",n,t.height),scaleX:Z(h,i,"ScaleX",n,y),angle:Z(h,i,"Rotation",n,Object(b.f)(t.rotation)),offsetX:Z(h,i,"OffsetX",n,Object(b.f)(t.offsetX)),offsetY:Z(h,i,"OffsetY",n,Object(b.f)(t.offsetY)),url:t.url,applyRandomOffset:!1,sampleAlphaOnly:!1})}function E(t,e,i,r,n,s){var o=["Rotation","OffsetX","OffsetY"],h=r.filter((function(e){return e.primitiveName!==t.primitiveName&&!o.includes(e.propertyName)})),l=t.primitiveName,c=rt(r,l,e,null,null),u=Object(a.a)(c,2),f=u[0],v=u[1],m=Object(d.b)(JSON.stringify(t)+v).toString(),p=Object(d.b)("".concat(t.separation).concat(JSON.stringify(t.lineSymbol))).toString(),_={r:255,g:255,b:255,a:1};if(t.lineSymbol){var y,g=null===(y=t.lineSymbol)||void 0===y?void 0:y.symbolLayers.find((function(t){return"CIMSolidStroke"===t.type}));g&&(_=Object(b.e)(g.color))}s.push({type:"fill",templateHash:m,materialHash:f?et(p,i,h,n):p,cim:t,materialOverrides:h,colorLocked:t.colorLocked,effects:e,color:_,height:Z(l,i,"Separation",n,t.separation),scaleX:1,angle:Z(l,i,"Rotation",n,Object(b.f)(t.rotation)),offsetX:Z(l,i,"OffsetX",n,Object(b.f)(t.offsetX)),offsetY:Z(l,i,"OffsetY",n,Object(b.f)(t.offsetY)),applyRandomOffset:!1,sampleAlphaOnly:!0})}function G(t,e,i,r,n,s){var o=rt(r,t.primitiveName,e,null,null),h=Object(a.a)(o,2),l=h[0],c=h[1],u=Object(d.b)(JSON.stringify(t)+c).toString();s.push({type:"fill",templateHash:u,materialHash:l?et(u,i,r,n):u,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:e,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,applyRandomOffset:!1,sampleAlphaOnly:!1})}function H(t,e,i,r,n,o,h,l){var c,u,f=t.primitiveName,v=Object(b.e)(t.color),m=void 0!==t.width?t.width:4,p=S(t.capStyle),_=C(t.joinStyle),y=t.miterLimit,g=rt(r,f,e,null,null),k=Object(a.a)(g,2),O=k[0],x=k[1],P=Object(d.b)(JSON.stringify(t)+x).toString();if(e&&e instanceof Array&&e.length>0){var M=e[e.length-1];if("CIMGeometricEffectDashes"===M.type&&"NoConstraint"===M.lineDashEnding&&null===M.offsetAlongLine){var j=(e=Object(s.a)(e)).pop();c=j.dashTemplate,u=j.scaleDash}}o.push({type:"line",templateHash:P,materialHash:O?function(){return P}:P,cim:t,materialOverrides:null,isOutline:h,colorLocked:t.colorLocked,effects:e,color:Z(f,i,"Color",n,v,$),width:Z(f,i,"Width",n,m),cap:Z(f,i,"CapStyle",n,p),join:Z(f,i,"JoinStyle",n,_),miterLimit:Z(f,i,"MiterLimit",n,y),referenceWidth:l,zOrder:q(t.name),dashTemplate:c,scaleDash:u,sampleAlphaOnly:!0})}function D(t,e,i,r,n,s,o,h){var l=Object(d.b)("".concat(t.url).concat(JSON.stringify(t.colorSubstitutions))).toString(),c=t.primitiveName,u=Object(b.e)(t.tintColor),f=void 0!==t.width?t.width:4,v=S(t.capStyle),m=C(t.joinStyle),p=t.miterLimit,_=rt(r,c,e,null,null),y=Object(a.a)(_,2),g=y[0],k=y[1],O=Object(d.b)(JSON.stringify(t)+k).toString();s.push({type:"line",templateHash:O,materialHash:g?function(){return l}:l,cim:t,materialOverrides:null,isOutline:o,colorLocked:t.colorLocked,effects:e,color:Z(c,i,"TintColor",n,u,$),width:Z(c,i,"Width",n,f),cap:Z(c,i,"CapStyle",n,v),join:Z(c,i,"JoinStyle",n,m),miterLimit:Z(c,i,"MiterLimit",n,p),referenceWidth:h,zOrder:q(t.name),dashTemplate:null,scaleDash:!1,url:t.url,sampleAlphaOnly:!1})}function X(t,e,i,r,n,s,o,h){var l=t.primitiveName,c=void 0!==t.width?t.width:4,u=S(t.capStyle),f=C(t.joinStyle),v=t.miterLimit,m=rt(r,l,e,null,null),p=Object(a.a)(m,2),_=p[0],y=p[1],g=Object(d.b)(JSON.stringify(t)+y).toString();s.push({type:"line",templateHash:g,materialHash:_?et(g,i,r,n):g,cim:t,materialOverrides:null,isOutline:o,colorLocked:t.colorLocked,effects:e,color:{r:128,g:128,b:128,a:1},width:Z(l,i,"Width",n,c),cap:Z(l,i,"CapStyle",n,u),join:Z(l,i,"JoinStyle",n,f),miterLimit:Z(l,i,"MiterLimit",n,v),referenceWidth:h,zOrder:q(t.name),dashTemplate:null,scaleDash:!1,sampleAlphaOnly:!1})}function B(t,e,i,r,n,s){var o=t.markerPlacement;if(!o||"CIMMarkerPlacementInsidePolygon"!==o.type)return!1;var h=o,l=Math.abs(h.stepX),c=Math.abs(h.stepY);if(0===l||0===c)return!0;var u,f,v=["Rotation","OffsetX","OffsetY"],p=r.filter((function(e){return e.primitiveName!==t.primitiveName&&!v.includes(e.propertyName)})),_="url"in t?t.url:null,y=rt(r,h.primitiveName,e,null,null),g=Object(a.a)(y,2),k=g[0],O=g[1],P=Object(d.b)(JSON.stringify(t)+O).toString(),M=null;if("Random"===o.gridType){var j=Object(m.d)(x.D),S=Math.max(Math.floor(j/l),1),C=Math.max(Math.floor(j/c),1);M=function(t){return t?t*C:0},f=S*l/(u=c*C)}else o.shiftOddRows?(u=2*c,M=function(t){return t?2*t:0},f=l/c*.5):(u=c,M=null,f=l/c);var w={r:255,g:255,b:255,a:1};return"tintColor"in t&&(w=Object(b.e)(t.tintColor)),s.push({type:"fill",templateHash:P,materialHash:k?et(P,i,p,n):P,cim:t,materialOverrides:p,colorLocked:t.colorLocked,effects:e,color:Z(h.primitiveName,i,"TintColor",n,w,$),height:Z(h.primitiveName,i,"StepY",n,u,M),scaleX:f,angle:Z(h.primitiveName,i,"GridAngle",n,h.gridAngle),offsetX:Z(h.primitiveName,i,"OffsetX",n,Object(b.f)(h.offsetX)),offsetY:Z(h.primitiveName,i,"OffsetY",n,Object(b.f)(h.offsetY)),url:_,applyRandomOffset:"Random"===o.gridType,sampleAlphaOnly:!_}),!0}function Y(t,e,i,r,s,o,h,l,c){var f,m=t.primitiveName,y=Object(b.f)(t.size),g=Object(b.f)(t.scaleX),k=Object(b.f)(t.rotation),x=Object(b.f)(t.offsetX),P=Object(b.f)(t.offsetY),j=t.tintColor?Object(b.e)(t.tintColor):{r:255,g:255,b:255,a:1},S=Object(d.b)("".concat(t.url).concat(JSON.stringify(t.colorSubstitutions)).concat(JSON.stringify(t.animatedSymbolProperties))).toString(),C=tt(t.markerPlacement,r,i,s),w=function(t,e,i,r){var a=[];if(_.c.findApplicableOverrides(t,e,a),0===a.length)return t;for(var s=0,o=a;s<o.length;s++){var h=o[s];h.valueExpressionInfo&&function(){var t=i[h.primitiveName]&&i[h.primitiveName][h.propertyName];t instanceof p.a&&(h.fn=function(e,i,n){return Object(O.a)(t,e,{$view:n},r.geometryType,i)})}()}return function(e,i,r){var s,o=Object(n.a)(a);try{for(o.s();!(s=o.n()).done;){var h=s.value;h.fn&&(h.value=h.fn(e,i,r))}}catch(p){o.e(p)}finally{o.f()}var l,c=Object(u.a)(t),f=t.primitiveName,v=Object(n.a)(a);try{for(v.s();!(l=v.n()).done;){var m=l.value;if(m.primitiveName===f){var d=K(m.propertyName);null!=m.value&&m.value!==c[d]&&(c[d]=m.value)}}}catch(p){v.e(p)}finally{v.f()}return c}}(t.animatedSymbolProperties,r,i,s),L=rt(r,m,e,C,w),I=Object(a.a)(L,2),T=I[0],A=I[1],z=Object(d.b)(JSON.stringify(t)+A).toString(),F=null!==(f=t.anchorPoint)&&void 0!==f?f:{x:0,y:0};if("width"in t){var R=t.width,N=1,E=o.getResource(t.url);Object(v.k)(E)&&(N=E.width/E.height),g/=N*(y/R)}function G(t,e){return Object(b.d)(w,t,e)}var H=t.animatedSymbolProperties&&!0===t.animatedSymbolProperties.randomizeStartTime?function(t,e,i,r){var n=Object(M.a)(r),a=G(t,e);return S+"-MATERIALGROUP(".concat(n,")")+"-ASP(".concat(JSON.stringify(a),")")}:T?function(t,e){var i=G(t,e);return S+"-ASP(".concat(JSON.stringify(i),")")}:S;h.push({type:"marker",templateHash:z,materialHash:H,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:e,scaleSymbolsProportionally:!1,alignment:l,size:Z(m,i,"Size",s,y),scaleX:Z(m,i,"ScaleX",s,g),rotation:Z(m,i,"Rotation",s,k),offsetX:Z(m,i,"OffsetX",s,x),offsetY:Z(m,i,"OffsetY",s,P),color:Z(m,i,"TintColor",s,j,$),anchorPoint:{x:F.x,y:-F.y},isAbsoluteAnchorPoint:"Relative"!==t.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:t.rotateClockwise,referenceSize:c,sizeRatio:1,markerPlacement:C,url:t.url,animatedSymbolProperties:w})}function U(t,e,i,r,a,s,o,h,l,c){var u=t.markerGraphics;if(u){var f=0;if(t.scaleSymbolsProportionally){var v=t.frame;v&&(f=v.ymax-v.ymin)}var m,d=tt(t.markerPlacement,r,i,a),p=Object(n.a)(u);try{for(p.s();!(m=p.n()).done;){var _=m.value;if(_){var y=_.symbol;if(!y)continue;switch(y.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":W(t,e,d,null,_,r,i,a,s,o,h,l,f,c);break;case"CIMTextSymbol":V(t,e,d,_,i,r,a,s,h,l,f)}}}}catch(g){p.e(g)}finally{p.f()}}}function V(t,e,i,n,s,o,h,l,c,u,f){_.c.findApplicableOverrides(n,o,[]);var v=n.geometry;if("x"in v&&"y"in v){var m=n.symbol,p=function(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}(m),y=function(t){var e="",i="";if(t){var r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:e,weight:i}}(m.fontStyleName),g=Object(P.a)(m.fontFamilyName);m.font=Object(r.a)({family:g,decoration:p},y);var k=t.frame,O=v.x-.5*(k.xmin+k.xmax),x=v.y-.5*(k.ymin+k.ymax),M=t.size/f,j=t.primitiveName,S=Object(b.f)(m.height)*M,C=Object(b.f)(m.angle),I=Object(b.f)(t.offsetX)+(Object(b.f)(m.offsetX)+O)*M,T=Object(b.f)(t.offsetY)+(Object(b.f)(m.offsetY)+x)*M,A=Object(b.e)(_.b.getFillColor(m)),z=Object(b.e)(_.b.getStrokeColor(m)),F=_.b.getStrokeWidth(m);F||(z=Object(b.e)(_.b.getFillColor(m.haloSymbol)),F=m.haloSize*M);var R=rt(o,j,e,i,null),N=Object(a.a)(R,2),E=N[0],G=N[1],H=JSON.stringify(t.effects)+Number(t.colorLocked)+JSON.stringify(t.anchorPoint)+t.anchorPointUnits+JSON.stringify(t.markerPlacement),D=Object(d.b)(JSON.stringify(n)+H+G).toString(),X=Z(n.primitiveName,s,"TextString",h,n.textString,b.a,m.textCase);if(null!=X){var B=m.fontStyleName,Y=g+(B?"-"+B.toLowerCase():"-regular"),U=Y;"string"==typeof X&&X.includes("[")&&m.fieldMap&&(X=Object(b.c)(m.fieldMap,X,m.textCase)),l.push({type:"text",templateHash:D,materialHash:E||"function"==typeof X||X.match(/\[(.*?)\]/)?function(t,e,i){return U+"-"+Object(b.d)(X,t,e,i)}:U+"-"+Object(d.b)(X),cim:m,materialOverrides:null,colorLocked:t.colorLocked,effects:e,alignment:c,anchorPoint:{x:t.anchorPoint?t.anchorPoint.x:0,y:t.anchorPoint?t.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==t.anchorPointUnits,fontName:Y,decoration:p,weight:Z(j,s,"Weight",h,y.weight),style:Z(j,s,"Size",h,y.style),size:Z(j,s,"Size",h,S),angle:Z(j,s,"Rotation",h,C),offsetX:Z(j,s,"OffsetX",h,I),offsetY:Z(j,s,"OffsetY",h,T),horizontalAlignment:w(m.horizontalAlignment),verticalAlignment:L(m.verticalAlignment),text:X,color:A,outlineColor:z,outlineSize:F,referenceSize:u,sizeRatio:1,markerPlacement:i})}}}function W(t,e,i,s,o,h,l,c,u,f,m,p,y,O){var x=o.symbol,P=x.symbolLayers;if(P)if(O)J(t,e,i,s,o,l,h,c,u,f,m,p,y);else{var M=P.length;if(st(P))!function(t,e,i,s,o,h,l,c,u,f,v,m,p){var y=o.geometry,k=h[0],O=h[1],x=Object(g.b)(y);if(!x)return;var P,M=Object(g.d)(x,t.frame,t.size,t.anchorPoint,"Relative"!==t.anchorPointUnits),j=Object(a.a)(M,3),S=j[0],C=j[1],w=j[2],L={type:"sdf",geom:y,asFill:!0},I=t.primitiveName,T=Object(b.f)(t.size),A=Object(b.f)(t.rotation),z=Object(b.f)(t.offsetX),F=Object(b.f)(t.offsetY),R=O.path,N=O.primitiveName,E=k.primitiveName,G=Object(b.e)(_.b.getFillColor(O)),H=Object(b.e)(_.b.getStrokeColor(k)),D=_.b.getStrokeWidth(k),X=!1,B="",Y=Object(n.a)(l);try{for(Y.s();!(P=Y.n()).done;){var U=P.value;U.primitiveName!==N&&U.primitiveName!==E&&U.primitiveName!==I||(void 0!==U.value?B+="-".concat(U.primitiveName,"-").concat(U.propertyName,"-").concat(JSON.stringify(U.value)):U.valueExpressionInfo&&(X=!0))}}catch(q){Y.e(q)}finally{Y.f()}var V=JSON.stringify(Object(r.a)(Object(r.a)({},t),{},{markerGraphics:null})),W=Object(d.b)(JSON.stringify(L)+R).toString(),J={type:"marker",templateHash:Object(d.b)(JSON.stringify(o)+JSON.stringify(O)+JSON.stringify(k)+V+B).toString(),materialHash:X?function(){return W}:W,cim:L,materialOverrides:null,colorLocked:t.colorLocked,effects:e,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:v,anchorPoint:{x:C,y:w},isAbsoluteAnchorPoint:!1,size:Z(t.primitiveName,c,"Size",u,T),rotation:Z(t.primitiveName,c,"Rotation",u,A),offsetX:Z(t.primitiveName,c,"OffsetX",u,z),offsetY:Z(t.primitiveName,c,"OffsetY",u,F),scaleX:1,frameHeight:p,rotateClockwise:t.rotateClockwise,referenceSize:m,sizeRatio:S,color:Z(N,c,"Color",u,G,$),outlineColor:Z(E,c,"Color",u,H,$),outlineWidth:Z(E,c,"Width",u,D),markerPlacement:i,path:R,animatedSymbolProperties:s};f.push(J)}(t,e,i,s,o,P,h,l,c,u,m,p,y);else{var j=k.a.applyEffects(x.effects,o.geometry,f.geometryEngine);if(j)for(;M--;){var S=P[M];if(S&&!1!==S.enable)switch(S.type){case"CIMSolidFill":case"CIMSolidStroke":var C=function(){var O,x=k.a.applyEffects(S.effects,j,f.geometryEngine),P=Object(g.b)(x);if(!P)return"continue";var M=Object(g.d)(P,t.frame,t.size,t.anchorPoint,"Relative"!==t.anchorPointUnits),C=Object(a.a)(M,3),w=C[0],L=C[1],I=C[2],T="CIMSolidFill"===S.type,A={type:"sdf",geom:x,asFill:T},z=t.primitiveName,F=null!==(O=Object(b.f)(t.size))&&void 0!==O?O:10,R=Object(b.f)(t.rotation),N=Object(b.f)(t.offsetX),E=Object(b.f)(t.offsetY),G=S.path,H=S.primitiveName,D=Object(b.e)(T?_.b.getFillColor(S):_.b.getStrokeColor(S)),X=T?{r:0,g:0,b:0,a:0}:Object(b.e)(_.b.getStrokeColor(S)),B=_.b.getStrokeWidth(S);if(!T&&!B)return"break";var Y,U=!1,V="",W=Object(n.a)(h);try{for(W.s();!(Y=W.n()).done;){var J=Y.value;J.primitiveName!==H&&J.primitiveName!==z||(void 0!==J.value?V+="-".concat(J.primitiveName,"-").concat(J.propertyName,"-").concat(JSON.stringify(J.value)):J.valueExpressionInfo&&(U=!0))}}catch(tt){W.e(tt)}finally{W.f()}Object(v.k)(e)&&"function"==typeof e&&(U=!0);var q=JSON.stringify(Object(r.a)(Object(r.a)({},t),{},{markerGraphics:null})),K=Object(d.b)(JSON.stringify(A)+G).toString(),Q={type:"marker",templateHash:Object(d.b)(JSON.stringify(o)+JSON.stringify(S)+q+V).toString(),materialHash:U?function(){return K}:K,cim:A,materialOverrides:null,colorLocked:t.colorLocked,effects:e,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:m,anchorPoint:{x:L,y:I},isAbsoluteAnchorPoint:!1,size:Z(t.primitiveName,l,"Size",c,F),rotation:Z(t.primitiveName,l,"Rotation",c,R),offsetX:Z(t.primitiveName,l,"OffsetX",c,N),offsetY:Z(t.primitiveName,l,"OffsetY",c,E),scaleX:1,frameHeight:y,rotateClockwise:t.rotateClockwise,referenceSize:p,sizeRatio:w,color:Z(H,l,"Color",c,D,$),outlineColor:Z(H,l,"Color",c,X,$),outlineWidth:Z(H,l,"Width",c,B),markerPlacement:i,animatedSymbolProperties:s,path:G};return u.push(Q),"break"}();if("continue"===C)continue;if("break"===C)break;default:J(t,e,i,s,o,l,h,c,u,f,m,p,y)}}}}}function J(t,e,i,r,s,o,h,l,c,u,f,p,y){var g,k=function(t,e){return{type:t.type,enable:!0,name:t.name,colorLocked:t.colorLocked,primitiveName:t.primitiveName,anchorPoint:t.anchorPoint,anchorPointUnits:t.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:t.rotateClockwise,rotation:0,size:t.size,billboardMode3D:t.billboardMode3D,depth3D:t.depth3D,frame:t.frame,markerGraphics:[e],scaleSymbolsProportionally:t.scaleSymbolsProportionally,respectFrame:t.respectFrame,clippingPath:t.clippingPath}}(t,s),O=["Rotation","OffsetX","OffsetY"];g=h.filter((function(e){return e.primitiveName!==t.primitiveName||!O.includes(e.propertyName)}));var x,P="",M=Object(n.a)(h);try{for(M.s();!(x=M.n()).done;){var j=x.value;void 0!==j.value&&(P+="-".concat(j.primitiveName,"-").concat(j.propertyName,"-").concat(JSON.stringify(j.value)))}}catch(E){M.e(E)}finally{M.f()}var S=_.b.getTextureAnchor(k,u),C=Object(a.a)(S,3),w=C[0],L=C[1],I=C[2],T=t.primitiveName,A=Object(b.f)(t.rotation),z=Object(b.f)(t.offsetX),F=Object(b.f)(t.offsetY),R=Object(d.b)(JSON.stringify(k)+P).toString(),N={type:"marker",templateHash:R,materialHash:g.length>0||Object(v.k)(e)&&"function"==typeof e?et(R,o,g,l):R,cim:k,materialOverrides:g,colorLocked:t.colorLocked,effects:e,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:f,anchorPoint:{x:w,y:L},isAbsoluteAnchorPoint:!1,size:t.size,rotation:Z(T,o,"Rotation",l,A),offsetX:Z(T,o,"OffsetX",l,z),offsetY:Z(T,o,"OffsetY",l,F),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:y,rotateClockwise:t.rotateClockwise,referenceSize:p,sizeRatio:I/Object(m.c)(t.size),markerPlacement:i,animatedSymbolProperties:r};c.push(N)}function q(t){if(t&&0===t.indexOf("Level_")){var e=parseInt(t.substr(6),10);if(!isNaN(e))return e}return 0}function $(t){if(!t||0===t.length)return null;var e=new c.a(t).toRgba();return{r:e[0],g:e[1],b:e[2],a:e[3]}}function Z(t,e,i,r,n,a,s){var o=e[t];if(o){var h=o[i];if("string"==typeof h||"number"==typeof h||h instanceof Array)return a?a.call(null,h,s):h;if(null!=h&&h instanceof p.a)return function(t,e,i){var o=Object(O.a)(h,t,{$view:i},r.geometryType,e);return null!==o&&a&&(o=a.call(null,o,s)),null!==o?o:n}}return n}function K(t){return t?t.charAt(0).toLowerCase()+t.substr(1):t}function Q(t,e,i,r){var a,s=Object(n.a)(e);try{for(s.s();!(a=s.n()).done;){var o=a.value;o.valueExpressionInfo&&function(){var t=i[o.primitiveName]&&i[o.primitiveName][o.propertyName];t instanceof p.a&&(o.fn=function(e,i,n){return Object(O.a)(t,e,{$view:n},r.geometryType,i)})}()}}catch(h){s.e(h)}finally{s.f()}return function(i,r,a){var s,o=Object(n.a)(e);try{for(o.s();!(s=o.n()).done;){var l=s.value;l.fn&&(l.value=l.fn(i,r,a))}}catch(h){o.e(h)}finally{o.f()}var c,f=[],v=Object(n.a)(t);try{for(v.s();!(c=v.n()).done;){var m,d=c.value,p=null===(m=d)||void 0===m?void 0:m.primitiveName;if(p){var _,y=!1,g=Object(n.a)(e);try{for(g.s();!(_=g.n()).done;){var b=_.value;if(b.primitiveName===p){var k=K(b.propertyName);null!=b.value&&b.value!==d[k]&&(y||(d=Object(u.a)(d),y=!0),d[k]=b.value)}}}catch(h){g.e(h)}finally{g.f()}}f.push(d)}}catch(h){v.e(h)}finally{v.f()}return f}}function tt(t,e,i,r){var a=[];if(_.c.findApplicableOverrides(t,e,a),0===a.length)return t;for(var s=0,o=a;s<o.length;s++){var h=o[s];h.valueExpressionInfo&&function(){var t=i[h.primitiveName]&&i[h.primitiveName][h.propertyName];t instanceof p.a&&(h.fn=function(e,i,n){return Object(O.a)(t,e,{$view:n},r.geometryType,i)})}()}return function(e,i,r){var s,o=Object(n.a)(a);try{for(o.s();!(s=o.n()).done;){var h=s.value;h.fn&&(h.value=h.fn(e,i,r))}}catch(p){o.e(p)}finally{o.f()}var l,c=Object(u.a)(t),f=t.primitiveName,v=Object(n.a)(a);try{for(v.s();!(l=v.n()).done;){var m=l.value;if(m.primitiveName===f){var d=K(m.propertyName);null!=m.value&&m.value!==c[d]&&(c[d]=m.value)}}}catch(p){v.e(p)}finally{v.f()}return c}}function et(t,e,i,r){var a,s=Object(n.a)(i);try{for(s.s();!(a=s.n()).done;){var o=a.value;o.valueExpressionInfo&&function(){var t=e[o.primitiveName]&&e[o.primitiveName][o.propertyName];t instanceof p.a&&(o.fn=function(e,i,n){return Object(O.a)(t,e,{$view:n},r.geometryType,i)})}()}}catch(h){s.e(h)}finally{s.f()}return function(e,r,a){var s,o=Object(n.a)(i);try{for(o.s();!(s=o.n()).done;){var l=s.value;l.fn&&(l.value=l.fn(e,r,a))}}catch(h){o.e(h)}finally{o.f()}return Object(d.b)(t+_.c.buildOverrideKey(i)).toString()}}function it(t,e){if(!e||0===e.length)return t;var i=JSON.parse(JSON.stringify(t));return _.c.applyOverrides(i,e),i}function rt(t,e,i,r,a){var s,o=!1,h="",l=Object(n.a)(t);try{for(l.s();!(s=l.n()).done;){var c=s.value;c.primitiveName===e&&(void 0!==c.value?h+="-".concat(c.primitiveName,"-").concat(c.propertyName,"-").concat(JSON.stringify(c.value)):c.valueExpressionInfo&&(o=!0))}}catch(u){l.e(u)}finally{l.f()}return Object(v.k)(i)&&"function"==typeof i&&(o=!0),Object(v.k)(r)&&"function"==typeof r&&(o=!0),Object(v.k)(a)&&"function"==typeof a&&(o=!0),[o,h]}function nt(t,e,i){if(t&&e)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":var r=t.symbolLayers;if(!r)return;var a,s=Object(n.a)(r);try{for(s.s();!(a=s.n()).done;){var o=a.value;switch(ot(o,e,i),o.type){case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMCharacterMarker":case"CIMPictureMarker":"url"in o&&o.url&&i.push(e.fetchResource(o.url,null));break;case"CIMVectorMarker":var h=o.markerGraphics;if(!h)continue;var l,c=Object(n.a)(h);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(u){var f=u.symbol;f&&nt(f,e,i)}}}catch(v){c.e(v)}finally{c.f()}}}}catch(v){s.e(v)}finally{s.f()}}}var at,st=function(t){return t&&2===t.length&&t[0].enable&&t[1].enable&&"CIMSolidStroke"===t[0].type&&"CIMSolidFill"===t[1].type&&!t[0].effects&&!t[1].effects};function ot(t,e,i){t.effects&&!Object(v.k)(e.geometryEngine)&&(at?i.push(at):Object(b.l)(t.effects)&&(at=Object(b.g)(),i.push(at),at.then((function(t){return e.geometryEngine=t}))))}},295:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return a}));var r=i(190);function n(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Object(r.d)(t,0,h),a=0;a<4;a++)e[i+a]=Math.floor(256*l(n*s[a]))}function a(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0,r=0;r<4;r++)i+=t[e+r]*o[r];return i}var s=[1,256,65536,16777216],o=[1/256,1/65536,1/16777216,1/4294967296],h=a(new Uint8ClampedArray([255,255,255,255]));function l(t){return t-Math.floor(t)}},301:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var r=i(142),n=i(143),a=(i(161),function(){function t(e){Object(r.a)(this,t),this._geometry=e}return Object(n.a)(t,[{key:"next",value:function(){var t=this._geometry;return this._geometry=null,t}}]),t}())},312:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return r})),i.d(e,"d",(function(){return n})),i.d(e,"e",(function(){return f})),i.d(e,"f",(function(){return u})),i.d(e,"g",(function(){return l})),i.d(e,"h",(function(){return c}));var r=Number.POSITIVE_INFINITY,n=Math.PI,a=2*n,s=128/n,o=n/180,h=1/Math.LN2;function l(t,e){return(t%=e)>=0?t:t+e}function c(t){return l(t*s,256)}function u(t){return Math.log(t)*h}function f(t,e,i){return t*(1-i)+e*i}},313:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var r=i(142),n=i(143),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(r.a)(this,t),this.x=e,this.y=i,this.width=n,this.height=a}return Object(n.a)(t,[{key:"isEmpty",get:function(){return this.width<=0||this.height<=0}},{key:"union",value:function(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}]),t}()},314:function(t,e,i){"use strict";i.d(e,"a",(function(){return R})),i.d(e,"b",(function(){return z})),i.d(e,"c",(function(){return F})),i.d(e,"d",(function(){return T})),i.d(e,"e",(function(){return E})),i.d(e,"f",(function(){return H})),i.d(e,"g",(function(){return G}));var r=i(164),n=i(163),a=i(144),s=i(145),o=i(14),h=i(60),l=i(142),c=i(143),u=i(221),f=i(156),v=i(146),m=i(360),d=i(167),p=i(180),_=i(205),y=i(349),g=i(168),b=i(301),k=i(262),O=i(223),x=i(351),P=i(170),M=i(251),j=i(358),S=i(218),C=i(158),w=i(233),L=Math.PI/180,I=f.a.getLogger("esri.symbols.cim.CIMSymbolDrawHelper"),T=function(){function t(e){Object(l.a)(this,t),this._t=e}return Object(c.a)(t,[{key:"clone",value:function(){return new t(this._t.slice())}},{key:"transform",value:function(t){var e=this._t;return[e[0]*t[0]+e[1]*t[1]+e[2],e[3]*t[0]+e[4]*t[1]+e[5]]}},{key:"scale",value:function(t,e){var i=this._t;return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=e,i[4]*=e,i[5]*=e,this}},{key:"scaleRatio",value:function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}},{key:"translate",value:function(t,e){var i=this._t;return i[2]+=t,i[5]+=e,this}},{key:"rotate",value:function(e){return t.multiply(this,t.createRotate(e),this)}},{key:"invert",value:function(){var e=this._t,i=e[0]*e[4]-e[1]*e[3];if(0===i)return new t([0,0,0,0,0,0]);i=1/i;var r=(e[1]*e[5]-e[2]*e[4])*i,n=(e[2]*e[3]-e[0]*e[5])*i;return new t([e[4]*i,-e[1]*i,r,-e[3]*i,e[0]*i,n])}}],[{key:"createIdentity",value:function(){return new t([1,0,0,0,1,0])}},{key:"createScale",value:function(e,i){return new t([e,0,0,0,i,0])}},{key:"createTranslate",value:function(e,i){return new t([0,0,e,0,0,i])}},{key:"createRotate",value:function(e){var i=Math.cos(e),r=Math.sin(e);return new t([i,-r,0,r,i,0])}},{key:"multiply",value:function(t,e,i){var r=t._t,n=e._t,a=r[0]*n[0]+r[3]*n[1],s=r[1]*n[0]+r[4]*n[1],o=r[2]*n[0]+r[5]*n[1]+n[2],h=r[0]*n[3]+r[3]*n[4],l=r[1]*n[3]+r[4]*n[4],c=r[2]*n[3]+r[5]*n[4]+n[5],u=i._t;return u[0]=a,u[1]=s,u[2]=o,u[3]=h,u[4]=l,u[5]=c,i}}]),t}(),A=function(){function t(e,i){Object(l.a)(this,t),this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._placementPool=new m.a(O.a,null,null,100),this._earlyReturn=!1,this._mapRotation=0,this._resourceManager=e||new x.a,this._transfos.push(i||T.createIdentity()),this._sizeTransfos.push(i?i.scaleRatio():1)}return Object(c.a)(t,[{key:"setTransform",value:function(t,e){this._transfos=[t||T.createIdentity()],this._sizeTransfos=[e||(t?t.scaleRatio():1)]}},{key:"setGeomUnitsPerPoint",value:function(t){this._geomUnitsPerPoint=t}},{key:"transformPt",value:function(t){return this._transfos[this._transfos.length-1].transform(t)}},{key:"transformSize",value:function(t){return t*this._sizeTransfos[this._sizeTransfos.length-1]}},{key:"reverseTransformPt",value:function(t){return this._transfos[this._transfos.length-1].invert().transform(t)}},{key:"reverseTransformSize",value:function(t){return t/this._sizeTransfos[this._sizeTransfos.length-1]}},{key:"geomUnitsPerPoint",value:function(){return this.isEmbedded()?1:this._geomUnitsPerPoint}},{key:"isEmbedded",value:function(){return this._transfos.length>1}},{key:"back",value:function(){return this._transfos[this._transfos.length-1]}},{key:"push",value:function(t,e){var i=e?t.scaleRatio():1;T.multiply(t,this.back(),t),this._transfos.push(t),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*i)}},{key:"pop",value:function(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}},{key:"drawSymbol",value:function(t,e){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(t,e);break;case"CIMTextSymbol":this.drawTextSymbol(t,e)}}},{key:"drawMultiLayerSymbol",value:function(t,e){if(t){var i=t.symbolLayers;if(i){var r=t.effects;if(r&&r.length>0){var n=this.executeEffects(r,e);if(n)for(var a=n.next();a;)this.drawSymbolLayers(i,a),a=n.next()}else this.drawSymbolLayers(i,e)}}}},{key:"executeEffects",value:function(t,e){var i,r=this._resourceManager.geometryEngine,n=new b.a(e),a=Object(h.a)(t);try{for(a.s();!(i=a.n()).done;){var s=i.value,o=Object(k.a)(s);o&&(n=o.execute(n,s,this.geomUnitsPerPoint(),r))}}catch(l){a.e(l)}finally{a.f()}return n}},{key:"drawSymbolLayers",value:function(t,e){for(var i=t.length;i--;){var r=t[i];if(r&&!1!==r.enable){var n=r.effects;if(n&&n.length>0){var a=this.executeEffects(n,e);if(a)for(var s=null;(s=a.next())&&(this.drawSymbolLayer(r,s),!this._earlyReturn););}else this.drawSymbolLayer(r,e);if(this._earlyReturn)return}}}},{key:"drawSymbolLayer",value:function(t,e){switch(t.type){case"CIMSolidFill":this.drawSolidFill(e,t.color);break;case"CIMHatchFill":this.drawHatchFill(e,t);break;case"CIMPictureFill":this.drawPictureFill(e,t);break;case"CIMGradientFill":this.drawGradientFill(e,t);break;case"CIMSolidStroke":this.drawSolidStroke(e,t.color,t.width,t.capStyle,t.joinStyle,t.miterLimit);break;case"CIMPictureStroke":this.drawPictureStroke(e,t);break;case"CIMGradientStroke":this.drawGradientStroke(e,t);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(t,e)}}},{key:"drawHatchFill",value:function(t,e){var i=this._buildHatchPolyline(e,t,this.geomUnitsPerPoint());i&&(this.pushClipPath(t),this.drawMultiLayerSymbol(e.lineSymbol,i),this.popClipPath())}},{key:"drawPictureFill",value:function(t,e){}},{key:"drawGradientFill",value:function(t,e){}},{key:"drawPictureStroke",value:function(t,e){}},{key:"drawGradientStroke",value:function(t,e){}},{key:"drawMarkerLayer",value:function(t,e){var i=t.markerPlacement;if(i){var r=Object(k.b)(i);if(r){var n="CIMMarkerPlacementInsidePolygon"===i.type;n&&this.pushClipPath(e);var a=r.execute(e,i,this.geomUnitsPerPoint(),this._resourceManager.geometryEngine);if(a)for(var s=null;(s=a.next())&&(this.drawMarker(t,s),!this._earlyReturn););n&&this.popClipPath()}}else{var l,c,u=this._placementPool.acquire();if(Object(g.f)(e))u.tx=e.x,u.ty=e.y,this.drawMarker(t,u);else if(Object(g.g)(e))l=Object(y.b)(e),c=Object(o.a)(l,2),u.tx=c[0],u.ty=c[1],this.drawMarker(t,u);else{var f,v=Object(h.a)(e.points);try{for(v.s();!(f=v.n()).done;){var m=f.value;if(u.tx=m[0],u.ty=m[1],this.drawMarker(t,u),this._earlyReturn)break}}catch(d){v.e(d)}finally{v.f()}}this._placementPool.release(u)}}},{key:"drawMarker",value:function(t,e){switch(t.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(t,e);break;case"CIMVectorMarker":this.drawVectorMarker(t,e)}}},{key:"drawPictureMarker",value:function(t,e){var i,r,n,a,s;if(t){var o=this._resourceManager.getResource(t.url),h=null!==(i=t.size)&&void 0!==i?i:10;if(!(Object(v.j)(o)||h<=0)){var l=o.width,c=o.height;if(l&&c){var u=l/c,f=null!==(r=t.scaleX)&&void 0!==r?r:1,m=T.createIdentity(),d=t.anchorPoint;if(d){var p=d.x,_=d.y;"Absolute"!==t.anchorPointUnits&&(p*=h*u*f,_*=h),m.translate(-p,-_)}var y=null!==(n=t.rotation)&&void 0!==n?n:0;t.rotateClockwise&&(y=-y),this._mapRotation&&(y+=this._mapRotation),y&&m.rotate(y*L);var g=null!==(a=t.offsetX)&&void 0!==a?a:0,b=null!==(s=t.offsetY)&&void 0!==s?s:0;if(g||b){if(this._mapRotation){var k=L*this._mapRotation,O=Math.cos(k),x=Math.sin(k),P=g*x+b*O;g=g*O-b*x,b=P}m.translate(g,b)}var M=this.geomUnitsPerPoint();1!==M&&m.scale(M,M);var j=e.getAngle();j&&m.rotate(j),m.translate(e.tx,e.ty),this.push(m,!1),this.drawImage(t.url,h,t.scaleX),this.pop()}}}}},{key:"drawVectorMarker",value:function(t,e){var i,r,n,a;if(t){var s=t.markerGraphics;if(s){var o=null!==(i=t.size)&&void 0!==i?i:10,l=t.frame,c=l?l.ymax-l.ymin:0,u=o&&c?o/c:1,f=T.createIdentity();l&&f.translate(.5*-(l.xmax+l.xmin),.5*-(l.ymax+l.ymin));var v=t.anchorPoint;if(v){var m=v.x,d=v.y;"Absolute"!==t.anchorPointUnits?l&&(m*=l.xmax-l.xmin,d*=l.ymax-l.ymin):(m/=u,d/=u),f.translate(-m,-d)}1!==u&&f.scale(u,u);var p=null!==(r=t.rotation)&&void 0!==r?r:0;t.rotateClockwise&&(p=-p),this._mapRotation&&(p+=this._mapRotation),p&&f.rotate(p*L);var _=null!==(n=t.offsetX)&&void 0!==n?n:0,y=null!==(a=t.offsetY)&&void 0!==a?a:0;if(_||y){if(this._mapRotation){var g=L*this._mapRotation,b=Math.cos(g),k=Math.sin(g),O=_*k+y*b;_=_*b-y*k,y=O}f.translate(_,y)}var x=this.geomUnitsPerPoint();1!==x&&f.scale(x,x);var P=e.getAngle();P&&f.rotate(P),f.translate(e.tx,e.ty),this.push(f,t.scaleSymbolsProportionally);var M,j=Object(h.a)(s);try{for(j.s();!(M=j.n()).done;){var S=M.value;if(S&&S.symbol&&S.geometry||I.error("Invalid marker graphic",S),this.drawSymbol(S.symbol,S.geometry),this._earlyReturn)break}}catch(C){j.e(C)}finally{j.f()}this.pop()}}}},{key:"drawTextSymbol",value:function(t,e){var i,r,n,a;if(t&&Object(g.f)(e)&&!((null!==(i=t.height)&&void 0!==i?i:10)<=0)){var s=T.createIdentity(),o=null!==(r=t.angle)&&void 0!==r?r:0;(o=-o)&&s.rotate(o*L);var h=null!==(n=t.offsetX)&&void 0!==n?n:0,l=null!==(a=t.offsetY)&&void 0!==a?a:0;(h||l)&&s.translate(h,l);var c=this.geomUnitsPerPoint();1!==c&&s.scale(c,c),s.translate(e.x,e.y),this.push(s,!1),this.drawText(t),this.pop()}}},{key:"_buildHatchPolyline",value:function(t,e,i){var r=(void 0!==t.separation?t.separation:4)*i,n=void 0!==t.rotation?t.rotation:0;if(0===r)return null;r<0&&(r=-r);for(var a=0,s=.5*r;a>s;)a-=r;for(;a<-s;)a+=r;var o=Object(p.g)();Object(_.a)(o,e),o[0]-=s,o[1]-=s,o[2]+=s,o[3]+=s;for(var h=[[o[0],o[1]],[o[0],o[3]],[o[2],o[3]],[o[2],o[1]]];n>180;)n-=180;for(;n<0;)n+=180;var l,c,u,f,v=Math.cos(n*L),m=Math.sin(n*L),d=-r*m,y=r*v;a=(void 0!==t.offsetX?t.offsetX*i:0)*m-(void 0!==t.offsetY?t.offsetY*i:0)*v,l=u=Number.MAX_VALUE,c=f=-Number.MAX_VALUE;for(var g=0,b=h;g<b.length;g++){var k=b[g],O=k[0],x=k[1],P=v*O+m*x,M=-m*O+v*x;l=Math.min(l,P),u=Math.min(u,M),c=Math.max(c,P),f=Math.max(f,M)}for(var j=v*l-m*(u=Math.floor(u/r)*r)-d*a/r,S=m*l+v*u-y*a/r,C=v*c-m*u-d*a/r,w=m*c+v*u-y*a/r,I=1+Math.round((f-u)/r),T=[],A=0;A<I;A++)j+=d,S+=y,C+=d,w+=y,T.push([[j,S],[C,w]]);return{paths:T}}}]),t}(),z=function(t){Object(a.a)(i,t);var e=Object(s.a)(i);function i(t,r){var n;return Object(l.a)(this,i),(n=e.call(this,t,r)).reset(),n}return Object(c.a)(i,[{key:"reset",value:function(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}},{key:"envelope",value:function(){return new M.a(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}},{key:"bounds",value:function(){return Object(p.m)(this._xmin,this._ymin,this._xmax,this._ymax)}},{key:"drawSolidFill",value:function(t){if(t&&!(this._clipCount>0))if(Object(g.g)(t))this._processPath(t.rings,0);else if(Object(g.h)(t))this._processPath(t.paths,0);else if(Object(g.d)(t)){var e=N(t);e&&this._processPath(e.rings,0)}else console.error("drawSolidFill Unexpected geometry type!")}},{key:"drawSolidStroke",value:function(t,e,i){if(t&&!(this._clipCount>0)){var r=.5*this.transformSize(i);if(Object(g.g)(t))this._processPath(t.rings,r);else if(Object(g.h)(t))this._processPath(t.paths,r);else if(Object(g.d)(t)){var n=N(t);n&&this._processPath(n.rings,r)}else console.error("drawSolidStroke unexpected geometry type!")}}},{key:"pushClipPath",value:function(t){this.drawSolidFill(t),++this._clipCount}},{key:"popClipPath",value:function(){--this._clipCount}},{key:"drawImage",value:function(t,e,i){var r=i*e,n=e,a=this._resourceManager.getResource(t);!e&&Object(v.k)(a)&&(r=i*a.width,n=a.height),this._merge(this.transformPt([-r/2,-n/2]),0),this._merge(this.transformPt([-r/2,n/2]),0),this._merge(this.transformPt([r/2,-n/2]),0),this._merge(this.transformPt([r/2,n/2]),0)}},{key:"drawText",value:function(t){this._textRasterizer||(this._textRasterizer=new j.a)}},{key:"_processPath",value:function(t,e){if(t){var i,r=Object(h.a)(t);try{for(r.s();!(i=r.n()).done;){var n=i.value,a=n?n.length:0;if(a>1){this._merge(this.transformPt(n[0]),e);for(var s=1;s<a;++s)this._merge(this.transformPt(n[s]),e)}}}catch(o){r.e(o)}finally{r.f()}}}},{key:"_merge",value:function(t,e){t[0]-e<this._xmin&&(this._xmin=t[0]-e),t[0]+e>this._xmax&&(this._xmax=t[0]+e),t[1]-e<this._ymin&&(this._ymin=t[1]-e),t[1]+e>this._ymax&&(this._ymax=t[1]+e)}}]),i}(A),F=function(t){Object(a.a)(i,t);var e=Object(s.a)(i);function i(){var t;return Object(l.a)(this,i),(t=e.apply(this,arguments))._searchPoint=[0,0],t._searchDistPoint=0,t}return Object(c.a)(i,[{key:"hitTest",value:function(t,e,i,r,n,a){var s=a*Object(d.c)(1);this.setTransform(),this.setGeomUnitsPerPoint(s),this._searchPoint=[(t[0]+t[2])/2,(t[1]+t[3])/2],this._searchDistPoint=(t[2]-t[0])/2/s,this._textInfo=r;var o=e&&("CIMPointSymbol"===e.type&&"Map"!==e.angleAlignment||"CIMTextSymbol"===e.type);return this._mapRotation=o?n:0,this._earlyReturn=!1,this.drawSymbol(e,i),this._earlyReturn}},{key:"drawSolidFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawHatchFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawPictureFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawGradientFill",value:function(t,e){this._hitTestFill(t)}},{key:"drawSolidStroke",value:function(t,e,i,r,n,a){this._hitTestStroke(t,i)}},{key:"drawPictureStroke",value:function(t,e){this._hitTestStroke(t,e.width)}},{key:"drawGradientStroke",value:function(t,e){this._hitTestStroke(t,e.width)}},{key:"drawMarkerLayer",value:function(t,e){t.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===t.markerPlacement.type?this._hitTestFill(e):Object(r.a)(Object(n.a)(i.prototype),"drawMarkerLayer",this).call(this,t,e)}},{key:"pushClipPath",value:function(t){}},{key:"popClipPath",value:function(){}},{key:"drawImage",value:function(t,e,i){var r=this._resourceManager.getResource(t);if(!Object(v.j)(r)&&0!==r.height&&0!==e){var n=e*this.geomUnitsPerPoint(),a=n*i*(r.width/r.height),s=this.reverseTransformPt(this._searchPoint),o=this._searchDistPoint;Math.abs(s[0])<a/2+o&&Math.abs(s[1])<n/2+o&&(this._earlyReturn=!0)}}},{key:"drawText",value:function(t){var e,i,r=this._textInfo;if(r){var n=r.get(t);if(n){var a=n.text,s=n.mosaicItem;if(s&&0!==s.glyphMosaicItems.length){var o,l=null!==(e=t.height)&&void 0!==e?e:10,c=H(t.lineGapType,null!==(i=t.lineGap)&&void 0!==i?i:0,l),f=Object(u.a)(a)[1],v=s.glyphMosaicItems,m=Object(w.a)(v,f,{scale:l/C.u,angle:0,xOffset:0,yOffset:0,hAlign:E(t.horizontalAlignment),vAlign:G(t.verticalAlignment),maxLineWidth:512,lineHeight:C.x*Math.max(.25,Math.min(c||1,4)),decoration:t.font.decoration||"none",isCIM:!0}),d=this.reverseTransformPt(this._searchPoint),p=d[0],_=d[1],y=Object(h.a)(m.glyphs);try{for(y.s();!(o=y.n()).done;){var g=o.value;if(p>g.xTopLeft&&p<g.xBottomRight&&_>-g.yBottomRight&&_<-g.yTopLeft){this._earlyReturn=!0;break}}}catch(b){y.e(b)}finally{y.f()}}}}}},{key:"_hitTestFill",value:function(t){var e=null;if(Object(g.d)(t)){var i=t;e=[[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]}else if(Object(g.g)(t))e=t.rings;else{if(!Object(g.h)(t))return;e=t.paths}var r=this.reverseTransformPt(this._searchPoint);if(this._pointInPolygon(r,e)&&(this._earlyReturn=!0),!this._earlyReturn){var n=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(r,e,n)&&(this._earlyReturn=!0)}}},{key:"_hitTestStroke",value:function(t,e){var i=null;if(Object(g.d)(t)){var r=t;i=[[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]]]}else if(Object(g.g)(t))i=t.rings;else{if(!Object(g.h)(t))return;i=t.paths}var n=this.reverseTransformPt(this._searchPoint),a=e*this.geomUnitsPerPoint(),s=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(n,i,a/2+s)&&(this._earlyReturn=!0)}},{key:"_pointInPolygon",value:function(t,e){var i,r=0,n=Object(h.a)(e);try{for(n.s();!(i=n.n()).done;)for(var a=i.value,s=a.length,o=1;o<s;++o){var l=a[o-1],c=a[o];l[1]>t[1]!=c[1]>t[1]&&((c[0]-l[0])*(t[1]-l[1])-(c[1]-l[1])*(t[0]-l[0])>0?r++:r--)}}catch(u){n.e(u)}finally{n.f()}return 0!==r}},{key:"_nearLine",value:function(t,e,i){var r,n=Object(h.a)(e);try{for(n.s();!(r=n.n()).done;)for(var a=r.value,s=a.length,o=1;o<s;++o){var l=a[o-1],c=a[o],u=(c[0]-l[0])*(c[0]-l[0])+(c[1]-l[1])*(c[1]-l[1]);if(0!==u){u=Math.sqrt(u);var f=((c[0]-l[0])*(t[1]-l[1])-(c[1]-l[1])*(t[0]-l[0]))/u;if(Math.abs(f)<i){var v=((c[0]-l[0])*(t[0]-l[0])+(c[1]-l[1])*(t[1]-l[1]))/u;if(v>-i&&v<u+i)return!0}}}}catch(m){n.e(m)}finally{n.f()}return!1}}]),i}(A),R=function(t){Object(a.a)(i,t);var e=Object(s.a)(i);function i(t,r,n){var a;return Object(l.a)(this,i),(a=e.call(this,r,n))._ctx=t,a}return Object(c.a)(i,[{key:"drawSolidFill",value:function(t,e){if(t){if(Object(g.g)(t))this._buildPath(t.rings,!0);else if(Object(g.h)(t))this._buildPath(t.paths,!0);else if(Object(g.d)(t))this._buildPath(N(t).rings,!0);else{if(!Object(g.e)(t))return;console.log("CanvasDrawHelper.drawSolidFill - No implementation!")}var i=this._ctx;i.fillStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")",i.fill("evenodd")}}},{key:"drawSolidStroke",value:function(t,e,i,r,n,a){if(t&&e&&0!==i){if(Object(g.g)(t))this._buildPath(t.rings,!0);else if(Object(g.h)(t))this._buildPath(t.paths,!1);else{if(!Object(g.d)(t))return void console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");this._buildPath(N(t).rings,!0)}var s=this._ctx;s.strokeStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+e[3]/255+")",s.lineWidth=this.transformSize(i)+.5,this._setCapStyle(r),this._setJoinStyle(n),s.miterLimit=a,s.stroke()}}},{key:"pushClipPath",value:function(t){if(this._ctx.save(),Object(g.g)(t))this._buildPath(t.rings,!0);else if(Object(g.h)(t))this._buildPath(t.paths,!0);else{if(!Object(g.d)(t))return;this._buildPath(N(t).rings,!0)}this._ctx.clip("evenodd")}},{key:"popClipPath",value:function(){this._ctx.restore()}},{key:"drawImage",value:function(t,e,i){var r=this._resourceManager.getResource(t);if(!Object(v.j)(r)){var n=this._ctx,a=n.canvas.width,s=n.canvas.height,o=e*i*(r.width/r.height),h=i*e;e||(o=i*r.width,h=i*r.height);var l=this.transformPt([0,0]),c=this.transformSize(o),u=this.transformSize(h);this._ctx.drawImage(r,0,0,r.width,r.height,l[0]-c/2,l[1]-u/2,Math.min(c,a),Math.min(u,s))}}},{key:"drawText",value:function(t){this._textRasterizer||(this._textRasterizer=new j.a)}},{key:"_buildPath",value:function(t,e){var i=this._ctx;if(i.beginPath(),t){var r,n=Object(h.a)(t);try{for(n.s();!(r=n.n()).done;){var a=r.value,s=a?a.length:0;if(s>1){var o=this.transformPt(a[0]);i.moveTo(o[0],o[1]);for(var l=1;l<s;++l)o=this.transformPt(a[l]),i.lineTo(o[0],o[1]);e&&i.closePath()}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"_setCapStyle",value:function(t){switch(t){case P.q.Butt:this._ctx.lineCap="butt";break;case P.q.Round:this._ctx.lineCap="round";break;case P.q.Square:this._ctx.lineCap="square"}}},{key:"_setJoinStyle",value:function(t){switch(t){case P.s.Bevel:this._ctx.lineJoin="bevel";break;case P.s.Round:this._ctx.lineJoin="round";break;case P.s.Miter:this._ctx.lineJoin="miter"}}}]),i}(A),N=function(t){return t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null},E=function(t){switch(t){case"Left":return S.a.Left;case"Right":return S.a.Right;case"Center":return S.a.Center;case"Justify":return I.warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),S.a.Center}},G=function(t){switch(t){case"Top":return S.b.Top;case"Center":return S.b.Center;case"Bottom":return S.b.Bottom;case"Baseline":return S.b.Baseline}},H=function(t,e,i){switch(t){case"ExtraLeading":return 1+e/i;case"Multiple":return e;case"Exact":return e/i}}},322:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var r=i(16),n=i(60),a=i(142),s=i(143),o=i(168),h=i(173),l=i(301),c=i(262),u=function(){function t(){Object(a.a)(this,t)}return Object(s.a)(t,null,[{key:"executeEffects",value:function(t,e,i){var r,a=Object(h.c)(e),s=new l.a(a),o=Object(n.a)(t);try{for(o.s();!(r=o.n()).done;){var u=r.value,f=Object(c.a)(u);f&&(s=f.execute(s,u,1.3333333333333333,i))}}catch(v){o.e(v)}finally{o.f()}return s}},{key:"next",value:function(t){var e=t.next();return Object(h.d)(e),e}},{key:"applyEffects",value:function(t,e,i){if(!t)return e;var a,s=new l.a(e),h=Object(n.a)(t);try{for(h.s();!(a=h.n()).done;){var u=a.value,f=Object(c.a)(u);f&&(s=f.execute(s,u,1,i))}}catch(_){h.e(_)}finally{h.f()}for(var v,m=null;v=s.next();){var d,p;m?Object(o.h)(m)?Object(o.h)(v)&&(d=m.paths).push.apply(d,Object(r.a)(v.paths)):Object(o.g)(m)&&Object(o.g)(v)&&(p=m.rings).push.apply(p,Object(r.a)(v.rings)):m=v}return m}}]),t}()},325:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var r=i(5),n=i(159),a=i(156),s=i(270);function o(t,e,i,n,s){var o=t.referencesGeometry()&&s?l(e,n,s):e,h=t.repurposeFeature(o);try{return t.evaluate(Object(r.a)(Object(r.a)({},i),{},{$feature:h}))}catch(c){return a.a.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}var h=new Map;function l(t,e,i){var o=i.transform,l=i.hasZ,c=i.hasM;h.has(e)||h.set(e,function(t){var e={};switch(t){case"esriGeometryPoint":return function(t,i,r,n){return Object(s.e)(i,e,t,r,n)};case"esriGeometryPolygon":return function(t,i,r,n){return Object(s.f)(i,e,t,r,n)};case"esriGeometryPolyline":return function(t,i,r,n){return Object(s.g)(i,e,t,r,n)};case"esriGeometryMultipoint":return function(t,i,r,n){return Object(s.d)(i,e,t,r,n)};default:return a.a.getLogger("esri.views.2d.support.arcadeOnDemand").error(new n.a("mapview-arcade","Unable to handle geometryType: ".concat(t))),function(t){return t}}}(e));var u=h.get(e)(t.geometry,o,l,c);return Object(r.a)(Object(r.a)({},t),{},{geometry:u})}},351:function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var r=i(5),n=i(155),a=i(142),s=i(143),o=i(154),h=i.n(o),l=i(186),c=i(159),u=i(162),f=function(){function t(){Object(a.a)(this,t),this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null}return Object(s.a)(t,[{key:"destroy",value:function(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}},{key:"getResource",value:function(t){var e;return null!==(e=this._resourceMap.get(t))&&void 0!==e?e:null}},{key:"fetchResource",value:function(){var t=Object(n.a)(h.a.mark((function t(e,i){var r,n,a,s,o=this;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r={width:0,height:0},n=this._resourceMap,!(a=n.get(e))){t.next=3;break}return t.abrupt("return",(r.width=a.width,r.height=a.height,r));case 3:return s=this._inFlightResourceMap.get(e),t.abrupt("return",s||(s=v(e,i),this._inFlightResourceMap.set(e,s),s=s.then((function(t){if(o._inFlightResourceMap.delete(e),t.ok){n.set(e,t.value);var i=t.value;return r.width=i.width,r.height=i.height,r}return r})),s));case 5:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}()},{key:"deleteResource",value:function(t){this._inFlightResourceMap.delete(t),this._resourceMap.delete(t)}}]),t}();function v(t,e){if(t.includes(";base64,")){var i=new Image;return i.src=t,i.decode().then((function(){return{ok:!0,value:i}})).catch((function(e){return Object(u.j)(e)?{ok:!1,error:e}:{ok:!1,error:new c.a("invalid-resource","Could not fetch requested resource at ".concat(t))}}))}return Object(l.default)(t,Object(r.a)({responseType:"image"},e)).then((function(t){return{ok:!0,value:t.data}})).catch((function(e){return Object(u.j)(e)?{ok:!1,error:e}:{ok:!1,error:new c.a("invalid-resource","Could not fetch requested resource at ".concat(t))}}))}},354:function(t,e,i){"use strict";i.d(e,"a",(function(){return C}));var r=i(142),n=i(143),a=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["\xab","\xbb"],["\xbb","\xab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],s=["\u0622","\u0623","\u0625","\u0627"],o=["\ufef5","\ufef7","\ufef9","\ufefb"],h=["\ufef6","\ufef8","\ufefa","\ufefc"],l=["\u0627","\u0628","\u062a","\u062b","\u062c","\u062d","\u062e","\u062f","\u0630","\u0631","\u0632","\u0633","\u0634","\u0635","\u0636","\u0637","\u0638","\u0639","\u063a","\u0641","\u0642","\u0643","\u0644","\u0645","\u0646","\u0647","\u0648","\u064a","\u0625","\u0623","\u0622","\u0629","\u0649","\u0644","\u0645","\u0646","\u0647","\u0648","\u064a","\u0625","\u0623","\u0622","\u0629","\u0649","\u06cc","\u0626","\u0624"],c=["\ufe8d","\ufe8f","\ufe95","\ufe99","\ufe9d","\ufea1","\ufea5","\ufea9","\ufeab","\ufead","\ufeaf","\ufeb1","\ufeb5","\ufeb9","\ufebd","\ufec1","\ufec5","\ufec9","\ufecd","\ufed1","\ufed5","\ufed9","\ufedd","\ufee1","\ufee5","\ufee9","\ufeed","\ufef1","\ufe87","\ufe83","\ufe81","\ufe93","\ufeef","\ufbfc","\ufe89","\ufe85","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe89","\ufe85"],u=["\ufe8e","\ufe90","\ufe96","\ufe9a","\ufe9e","\ufea2","\ufea6","\ufeaa","\ufeac","\ufeae","\ufeb0","\ufeb2","\ufeb6","\ufeba","\ufebe","\ufec2","\ufec6","\ufeca","\ufece","\ufed2","\ufed6","\ufeda","\ufede","\ufee2","\ufee6","\ufeea","\ufeee","\ufef2","\ufe88","\ufe84","\ufe82","\ufe94","\ufef0","\ufbfd","\ufe8a","\ufe86","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe8a","\ufe86"],f=["\ufe8e","\ufe92","\ufe98","\ufe9c","\ufea0","\ufea4","\ufea8","\ufeaa","\ufeac","\ufeae","\ufeb0","\ufeb4","\ufeb8","\ufebc","\ufec0","\ufec4","\ufec8","\ufecc","\ufed0","\ufed4","\ufed8","\ufedc","\ufee0","\ufee4","\ufee8","\ufeec","\ufeee","\ufef4","\ufe88","\ufe84","\ufe82","\ufe94","\ufef0","\ufbff","\ufe8c","\ufe86","\ufe71","\ufe72","\ufe74","\ufe77","\ufe79","\ufe7b","\ufe7d","\ufe7f","\ufe80","\ufe8c","\ufe86"],v=["\ufe8d","\ufe91","\ufe97","\ufe9b","\ufe9f","\ufea3","\ufea7","\ufea9","\ufeab","\ufead","\ufeaf","\ufeb3","\ufeb7","\ufebb","\ufebf","\ufec3","\ufec7","\ufecb","\ufecf","\ufed3","\ufed7","\ufedb","\ufedf","\ufee3","\ufee7","\ufeeb","\ufeed","\ufef3","\ufe87","\ufe83","\ufe81","\ufe93","\ufeef","\ufbfe","\ufe8b","\ufe85","\ufe70","\ufe72","\ufe74","\ufe76","\ufe78","\ufe7a","\ufe7c","\ufe7e","\ufe80","\ufe8b","\ufe85"],m=["\u0621","\u0622","\u0623","\u0624","\u0625","\u0627","\u0629","\u062f","\u0630","\u0631","\u0632","\u0648","\u0649"],d=["\u064b","\u064b","\u064c","\u061f","\u064d","\u061f","\u064e","\u064e","\u064f","\u064f","\u0650","\u0650","\u0651","\u0651","\u0652","\u0652","\u0621","\u0622","\u0622","\u0623","\u0623","\u0624","\u0624","\u0625","\u0625","\u0626","\u0626","\u0626","\u0626","\u0627","\u0627","\u0628","\u0628","\u0628","\u0628","\u0629","\u0629","\u062a","\u062a","\u062a","\u062a","\u062b","\u062b","\u062b","\u062b","\u062c","\u062c","\u062c","\u062c","\u062d","\u062d","\u062d","\u062d","\u062e","\u062e","\u062e","\u062e","\u062f","\u062f","\u0630","\u0630","\u0631","\u0631","\u0632","\u0632","\u0633","\u0633","\u0633","\u0633","\u0634","\u0634","\u0634","\u0634","\u0635","\u0635","\u0635","\u0635","\u0636","\u0636","\u0636","\u0636","\u0637","\u0637","\u0637","\u0637","\u0638","\u0638","\u0638","\u0638","\u0639","\u0639","\u0639","\u0639","\u063a","\u063a","\u063a","\u063a","\u0641","\u0641","\u0641","\u0641","\u0642","\u0642","\u0642","\u0642","\u0643","\u0643","\u0643","\u0643","\u0644","\u0644","\u0644","\u0644","\u0645","\u0645","\u0645","\u0645","\u0646","\u0646","\u0646","\u0646","\u0647","\u0647","\u0647","\u0647","\u0648","\u0648","\u0649","\u0649","\u064a","\u064a","\u064a","\u064a","\ufef5","\ufef6","\ufef7","\ufef8","\ufef9","\ufefa","\ufefb","\ufefc","\u061f","\u061f","\u061f"],p=["\u0621","\u0641"],_=["\u063a","\u064a"],y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b=10,k=11,O=12,x=18,P=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],M=100,j=[100,0,0,0,0,101,102,103,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,4,4,4,0,4,0,4,0,4,4,4,0,0,4,4,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,4,4,0,0,4,4,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,105,7,7,106,107],S=[[x,x,x,x,x,x,x,x,x,6,5,6,8,5,x,x,x,x,x,x,x,x,x,x,x,x,x,x,5,5,5,6,8,4,4,k,k,k,4,4,4,4,4,b,9,b,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,x,x,x,x,x,x,5,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,9,4,k,k,k,k,4,4,4,4,0,4,4,x,4,4,k,k,2,2,4,0,4,4,4,2,0,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,4,4,4,4,4,4,4,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,1,O,1,O,O,1,O,O,1,O,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4],[3,3,3,3,4,4,4,4,7,k,k,7,9,7,4,4,O,O,O,O,O,O,O,O,O,O,O,7,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,3,3,3,3,3,3,3,3,3,3,k,3,3,7,7,7,O,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,O,O,O,O,O,O,O,3,4,O,O,O,O,O,O,7,7,O,O,4,O,O,O,O,7,7,2,2,2,2,2,2,2,2,2,2,7,7,7,7,7,7],[7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,7,7,O,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,O,O,O,O,O,O,O,O,O,O,O,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,O,O,O,O,O,O,O,O,O,1,1,4,4,4,4,1,4,4,4,4,4],[8,8,8,8,8,8,8,8,8,8,8,x,x,x,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,5,13,14,15,16,17,9,k,k,k,k,k,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,8,x,x,x,x,x,4,4,4,4,4,x,x,x,x,x,x,2,0,4,4,2,2,2,2,2,2,b,b,4,4,4,0,2,2,2,2,2,2,2,2,2,2,b,b,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],[0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,4,4,4,4,4,1,O,1,1,1,1,1,1,1,1,1,1,b,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,4,1,4,1,1,4,1,1,4,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,O,O,O,O,O,O,O,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,9,4,9,4,4,9,4,4,4,4,4,4,4,4,4,k,4,4,b,b,4,4,4,4,4,k,k,4,4,4,4,4,7,7,7,7,7,4,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,4,4,x],[4,4,4,k,k,k,4,4,4,4,4,b,9,b,9,9,2,2,2,2,2,2,2,2,2,2,9,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,0,4,4,4,k,k,4,4,4,k,k,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4]],C=function(){function t(){Object(r.a)(this,t),this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}return Object(n.a)(t,[{key:"bidiTransform",value:function(t,e,i){if(this.sourceToTarget=[],this.targetToSource=[],!t)return"";if(function(t,e,i){$=[],K=[];for(var r=0;r<i;r++)t[r]=r,e[r]=r,$[r]=r}(this.sourceToTarget,this.targetToSource,t.length),!this.checkParameters(e,i))return t;e=this.inputFormat,i=this.outputFormat;var r,n=Q,a=V(e.charAt(1)),l=V(i.charAt(1)),f=("I"===e.charAt(0)?"L":e.charAt(0))+a,m=("I"===i.charAt(0)?"L":i.charAt(0))+l,p=e.charAt(2)+i.charAt(2);n.defInFormat=f,n.defOutFormat=m,n.defSwap=p;var _=w(t,f,m,p,n),y=!1;return"R"===i.charAt(1)?y=!0:"C"!==i.charAt(1)&&"D"!==i.charAt(1)||(y="rtl"===this.checkContextual(_)),this.sourceToTarget=$,this.targetToSource=function(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[t[i]]=i;return e}(this.sourceToTarget),Z=this.targetToSource,r=e.charAt(3)===i.charAt(3)?_:"S"===i.charAt(3)?function(t,e,i){if(0===e.length)return"";void 0===t&&(t=!0),void 0===i&&(i=!0);var r=(e=String(e)).split(""),n=0,a=1,s=r.length;t||(n=r.length-1,a=-1,s=1);for(var l=function(t,e,i,r,n){for(var a=0,s=[],l=0,f=e;f*i<r;f+=i)if(R(t[f])||U(t[f])){if("\u0644"===t[f]&&E(t,f+i,i,r)){t[f]=J(t[f+i],0===a?o:h),W(t,f+=i,i,r),n&&(s[l]=f,l++),a=0;continue}var m=t[f];1===a?t[f]=N(t,f+i,i,r)?B(t[f]):Y(t[f],u):!0===N(t,f+i,i,r)?t[f]=Y(t[f],v):t[f]=Y(t[f],c),U(m)||(a=1),!0===X(m)&&(a=0)}else a=0;return s}(r,n,a,s,i),f="",m=0;m<r.length;m++)i&&F(l,l.length,m)>-1?(q(Z,m,!t,-1),$.splice(m,1)):f+=r[m];return f}(y,_,!0):function(t,e,i){if(0===t.length)return"";void 0===i&&(i=!0),void 0===e&&(e=!0);for(var r="",n=(t=String(t)).split(""),a=0;a<t.length;a++){var o=!1;if(n[a]>="\ufe70"&&n[a]<"\ufeff"){var h=t.charCodeAt(a);n[a]>="\ufef5"&&n[a]<="\ufefc"?(e?(a>0&&i&&" "===n[a-1]?r=r.substring(0,r.length-1)+"\u0644":(r+="\u0644",o=!0),r+=s[(h-65269)/2]):(r+=s[(h-65269)/2],r+="\u0644",a+1<t.length&&i&&" "===n[a+1]?a++:o=!0),o&&(q(Z,a,!0,1),$.splice(a,0,$[a]))):r+=d[h-65136]}else r+=n[a]}return r}(_,y,!0),this.sourceToTarget=$,this.targetToSource=Z,this.levels=K,r}},{key:"_inputFormatSetter",value:function(t){if(!nt.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=t}},{key:"_outputFormatSetter",value:function(t){if(!nt.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=t}},{key:"checkParameters",value:function(t,e){return t?this._inputFormatSetter(t):t=this.inputFormat,e?this._outputFormatSetter(e):e=this.outputFormat,t!==e}},{key:"checkContextual",value:function(t){var e=L(t);if("ltr"!==e&&"rtl"!==e){try{e=document.dir.toLowerCase()}catch(i){}"ltr"!==e&&"rtl"!==e&&(e="ltr")}return e}},{key:"hasBidiChar",value:function(t){return at.test(t)}}]),t}();function w(t,e,i,r,n){var a=function(t,e,i){if(void 0===e.inFormat&&(e.inFormat=i.defInFormat),void 0===e.outFormat&&(e.outFormat=i.defOutFormat),void 0===e.swap&&(e.swap=i.defSwap),e.inFormat===e.outFormat)return e;var r,n=e.inFormat.substring(0,1),a=e.outFormat.substring(0,1),s=e.inFormat.substring(1,4),o=e.outFormat.substring(1,4);return"C"===s.charAt(0)&&(r=L(t),s="ltr"===r||"rtl"===r?r.toUpperCase():"L"===e.inFormat.charAt(2)?"LTR":"RTL",e.inFormat=n+s),"C"===o.charAt(0)&&("rtl"===(r=L(t))?o="RTL":"ltr"===r?(r=function(t){var e=t.split("");return e.reverse(),L(e.join(""))}(t),o=r.toUpperCase()):o="L"===e.outFormat.charAt(2)?"LTR":"RTL",e.outFormat=a+o),e}(t,{inFormat:e,outFormat:i,swap:r},n);if(a.inFormat===a.outFormat)return t;e=a.inFormat,i=a.outFormat,r=a.swap;var s=e.substring(0,1),o=e.substring(1,4),h=i.substring(0,1),l=i.substring(1,4);if(n.inFormat=e,n.outFormat=i,n.swap=r,"L"===s&&"VLTR"===i){if("LTR"===o)return n.dir=it,I(t,n);if("RTL"===o)return n.dir=rt,I(t,n)}if("V"===s&&"V"===h)return n.dir="RTL"===o?rt:it,z(t,n);if("L"===s&&"VRTL"===i)return"LTR"===o?(n.dir=it,t=I(t,n)):(n.dir=rt,t=I(t,n)),z(t);if("VLTR"===e&&"LLTR"===i)return n.dir=it,I(t,n);if("V"===s&&"L"===h&&o!==l)return t=z(t),"RTL"===o?w(t,"LLTR","VLTR",r,n):w(t,"LRTL","VRTL",r,n);if("VRTL"===e&&"LRTL"===i)return w(t,"LRTL","VRTL",r,n);if("L"===s&&"L"===h){var c=n.swap;return n.swap=c.substr(0,1)+"N","RTL"===o?(n.dir=rt,t=I(t,n),n.swap="N"+c.substr(1,2),n.dir=it,t=I(t,n)):(n.dir=it,t=I(t,n),n.swap="N"+c.substr(1,2),t=w(t,"VLTR","LRTL",n.swap,n)),t}return t}function L(t){var e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function I(t,e){var i=t.split(""),r=[];return T(i,r,e),function(t,e,i){if(0!==i.hiLevel&&i.swap.substr(0,1)!==i.swap.substr(1,2))for(var r=0;r<t.length;r++)1===e[r]&&(t[r]=D(t[r]))}(i,r,e),G(2,i,r,e),G(1,i,r,e),K=r,i.join("")}function T(t,e,i){var r=t.length,n=i.dir?g:y,a=0,s=-1,o=[],h=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(var l=0;l<r;l++)o[l]=A(t[l]);for(var c=0;c<r;c++){var u=a,f=H(t,o,h,c,i);h[c]=f;var v=240&(a=n[u][f]),m=n[a&=15][tt];if(e[c]=m,v>0)if(16===v){for(var d=s;d<c;d++)e[d]=1;s=-1}else s=-1;if(n[a][et])-1===s&&(s=c);else if(s>-1){for(var p=s;p<c;p++)e[p]=m;s=-1}5===o[c]&&(e[c]=0),i.hiLevel|=m}i.hasUbatS&&function(t,e,i,r){for(var n=0;n<i;n++)if(6===t[n]){e[n]=r.dir;for(var a=n-1;a>=0&&8===t[a];a--)e[a]=r.dir}}(o,e,r,i)}function A(t){var e=t.charCodeAt(0),i=j[e>>8];return i<M?i:S[i-M][255&e]}function z(t,e){var i=t.split("");if(e){var r=[];T(i,r,e),K=r}return i.reverse(),$.reverse(),i.join("")}function F(t,e,i){for(var r=0;r<e;r++)if(t[r]===i)return r;return-1}function R(t){for(var e=0;e<p.length;e++)if(t>=p[e]&&t<=_[e])return!0;return!1}function N(t,e,i,r){for(;e*i<r&&U(t[e]);)e+=i;return!!(e*i<r&&R(t[e]))}function E(t,e,i,r){for(;e*i<r&&U(t[e]);)e+=i;var n;if(!(e*i<r))return!1;n=t[e];for(var a=0;a<s.length;a++)if(s[a]===n)return!0;return!1}function G(t,e,i,r){if(!(r.hiLevel<t)){if(1===t&&r.dir===rt&&!r.hasUbatB)return e.reverse(),void $.reverse();for(var n,a,s,o,h,l=e.length,c=0;c<l;){if(i[c]>=t){for(n=c+1;n<l&&i[n]>=t;)n++;for(a=c,s=n-1;a<s;a++,s--)o=e[a],e[a]=e[s],e[s]=o,h=$[a],$[a]=$[s],$[s]=h;c=n}c++}}}function H(t,e,i,r,n){var a=e[r];return{UBAT_L:function(){return n.lastArabic=!1,0},UBAT_R:function(){return n.lastArabic=!1,1},UBAT_ON:function(){return 4},UBAT_AN:function(){return 3},UBAT_EN:function(){return n.lastArabic?3:2},UBAT_AL:function(){return n.lastArabic=!0,n.hasUbatAl=!0,1},UBAT_WS:function(){return 4},UBAT_CS:function(){var t,a;return r<1||r+1>=e.length||2!==(t=i[r-1])&&3!==t||2!==(a=e[r+1])&&3!==a?4:(n.lastArabic&&(a=3),a===t?a:4)},UBAT_ES:function(){return 2===(r>0?i[r-1]:5)&&r+1<e.length&&2===e[r+1]?2:4},UBAT_ET:function(){if(r>0&&2===i[r-1])return 2;if(n.lastArabic)return 4;for(var t=r+1,a=e.length;t<a&&e[t]===k;)t++;return t<a&&2===e[t]?2:4},UBAT_NSM:function(){if("VLTR"===n.inFormat){for(var a=e.length,s=r+1;s<a&&e[s]===O;)s++;if(s<a){var o=t[r].charCodeAt[0],h=o>=1425&&o<=2303||64286===o,l=e[s];if(h&&(1===l||7===l))return 1}}return r<1||5===e[r-1]?4:i[r-1]},UBAT_B:function(){return n.lastArabic=!0,n.hasUbatB=!0,n.dir},UBAT_S:function(){return n.hasUbatS=!0,4},UBAT_LRE:function(){return n.lastArabic=!1,4},UBAT_RLE:function(){return n.lastArabic=!1,4},UBAT_LRO:function(){return n.lastArabic=!1,4},UBAT_RLO:function(){return n.lastArabic=!1,4},UBAT_PDF:function(){return n.lastArabic=!1,4},UBAT_BN:function(){return 4}}[P[a]]()}function D(t){for(var e,i=0,r=a.length-1;i<=r;)if(e=Math.floor((i+r)/2),t<a[e][0])r=e-1;else{if(!(t>a[e][0]))return a[e][1];i=e+1}return t}function X(t){for(var e=0;e<m.length;e++)if(m[e]===t)return!0;return!1}function B(t){for(var e=0;e<l.length;e++)if(t===l[e])return f[e];return t}function Y(t,e){for(var i=0;i<l.length;i++)if(t===l[i])return e[i];return t}function U(t){return t>="\u064b"&&t<="\u0655"}function V(t){return"L"===t?"LTR":"R"===t?"RTL":"C"===t?"CLR":"D"===t?"CRL":""}function W(t,e,i,r){for(;e*i<r&&U(t[e]);)e+=i;return e*i<r&&(t[e]=" ",!0)}function J(t,e){for(var i=0;i<s.length;i++)if(t===s[i])return e[i];return t}function q(t,e,i,r){for(var n=0;n<t.length;n++)(t[n]>e||!i&&t[n]===e)&&(t[n]+=r)}var $=[],Z=[],K=[],Q={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},tt=5,et=6,it=0,rt=1,nt=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,at=/[\u0591-\u06ff\ufb1d-\ufefc]/},358:function(t,e,i){"use strict";i.d(e,"a",(function(){return h}));var r=i(14),n=i(60),a=i(142),s=i(143),o=i(167);var h=function(){function t(){Object(a.a)(this,t)}return Object(s.a)(t,[{key:"rasterizeText",value:function(t,e){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));var i=this._textRasterizationCanvas,r=i.getContext("2d");this._setFontProperties(r,e),this.parameters=e,this.textLines=t.split(/\r?\n/),this.lineHeight=this._computeLineHeight();var a=this._computeTextWidth(r,e),s=e.font,o=s.decoration,h=s.weight;this.lineThroughWidthOffset=o&&"line-through"===o?.1*this.lineHeight:0;var l=this.lineHeight*this.textLines.length;i.width=a+2*this.lineThroughWidthOffset,i.height=l,this.renderedLineHeight=Math.round(this.lineHeight*e.pixelRatio),this.renderedHaloSize=e.halo.size*e.pixelRatio,this.renderedWidth=a*e.pixelRatio,this.renderedHeight=l*e.pixelRatio,this.lineThroughWidthOffset*=e.pixelRatio,this.fillStyle=function(t){return"rgba(".concat(t.slice(0,3).toString(),",").concat(t[3],")")}(e.color),this.haloStyle=function(t){return"rgb(".concat(t.slice(0,3).toString(),")")}(e.halo.color);var c=this.renderedLineHeight,u=this.renderedHaloSize;this._setFontProperties(r,e);var f=function(t,e){return"center"===t?.5*e:"right"===t?e:0}(r.textAlign,this.renderedWidth)+u,v=u,m=u>0,d=this.lineThroughWidthOffset,p=0;m&&this._renderHalo(r,f,v,d,p,e),p+=v,d+=f;var _,y=Object(n.a)(this.textLines);try{for(y.s();!(_=y.n()).done;){var g=_.value;r.globalCompositeOperation="destination-out",r.fillStyle="rgb(0, 0, 0)",r.fillText(g,d,p),r.globalCompositeOperation="source-over",r.fillStyle=this.fillStyle,r.fillText(g,d,p),o&&"none"!==o&&this._renderDecoration(r,d,p,o,h),p+=c}}catch(j){y.e(j)}finally{y.f()}var b=this.renderedWidth+2*this.lineThroughWidthOffset,k=this.renderedHeight,O=r.getImageData(0,0,b,k),x=new Uint8Array(O.data);if(e.premultiplyColors)for(var P,M=0;M<x.length;M+=4)P=x[M+3]/255,x[M]=x[M]*P,x[M+1]=x[M+1]*P,x[M+2]=x[M+2]*P;return{size:[b,k],image:new Uint32Array(x.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}},{key:"_renderHalo",value:function(t,e,i,r,n,a){var s=this.renderedWidth,o=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement("canvas")),this._haloRasterizationCanvas.width=s,this._haloRasterizationCanvas.height=o;var h=this._haloRasterizationCanvas,l=h.getContext("2d");l.clearRect(0,0,s,o),this._setFontProperties(l,a);var c=a.font,u=c.decoration,f=c.weight;l.fillStyle=this.haloStyle,l.strokeStyle=this.haloStyle;var v=this.renderedHaloSize<3;l.lineJoin=v?"miter":"round",v?this._renderHaloEmulated(l,e,i,u,f):this._renderHaloNative(l,e,i,u,f),t.globalAlpha=this.parameters.halo.color[3],t.drawImage(h,0,0,s,o,r,n,s,o),t.globalAlpha=1}},{key:"_renderHaloEmulated",value:function(t,e,i,a,s){var o,h=this.renderedLineHeight,c=this.renderedHaloSize,u=Object(n.a)(this.textLines);try{for(u.s();!(o=u.n()).done;){var f,v=o.value,m=Object(n.a)(l);try{for(m.s();!(f=m.n()).done;){var d=Object(r.a)(f.value,2),p=d[0],_=d[1];t.fillText(v,e+c*p,i+c*_)}}catch(y){m.e(y)}finally{m.f()}a&&"none"!==a&&this._renderDecoration(t,e,i,a,s),i+=h}}catch(y){u.e(y)}finally{u.f()}}},{key:"_renderHaloNative",value:function(t,e,i,r,a){var s,o=this.renderedLineHeight,h=this.renderedHaloSize,l=Object(n.a)(this.textLines);try{for(l.s();!(s=l.n()).done;){for(var c=s.value,u=2*h,f=0;f<5;f++){var v=.6+.1*f;t.lineWidth=v*u,t.strokeText(c,e,i),r&&"none"!==r&&this._renderDecoration(t,e,i,r,a)}i+=o}}catch(m){l.e(m)}finally{l.f()}}},{key:"_setFontProperties",value:function(t,e){var i,r=e.font,n="".concat(r.style," ").concat(r.weight," ").concat(Object(o.c)(e.size*e.pixelRatio),"px ").concat(r.family,", sans-serif");switch(t.font=n,t.textBaseline="top",e.horizontalAlignment){case"left":default:i="left";break;case"right":i="right";break;case"center":i="center"}t.textAlign=i}},{key:"computeTextSize",value:function(t,e){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));var i=this._textRasterizationCanvas,r=i.getContext("2d");this._setFontProperties(r,e),this.parameters=e,this.textLines=t.split(/\r?\n/),this.lineHeight=this._computeLineHeight();var n=this._computeTextWidth(r,e),a=this.lineHeight*this.textLines.length;return i.width=n,i.height=a,[n*e.pixelRatio,a*e.pixelRatio]}},{key:"_computeTextWidth",value:function(t,e){var i,r=0,a=Object(n.a)(this.textLines);try{for(a.s();!(i=a.n()).done;){var s=i.value;r=Math.max(r,t.measureText(s).width)}}catch(h){a.e(h)}finally{a.f()}var o=e.font;return("italic"===o.style||"oblique"===o.style||"string"==typeof o.weight&&("bold"===o.weight||"bolder"===o.weight)||"number"==typeof o.weight&&o.weight>600)&&(r+=.3*t.measureText("w").width),r+=2*this.parameters.halo.size,Math.round(r)}},{key:"_computeLineHeight",value:function(){var t=1.275*this.parameters.size,e=this.parameters.font.decoration;return e&&"underline"===e&&(t*=1.3),Math.round(t+2*this.parameters.halo.size)}},{key:"_renderDecoration",value:function(t,e,i,r,n){var a=.9*this.lineHeight,s="bold"===n?.06:"bolder"===n?.09:.04;switch(t.textAlign){case"center":e-=this.renderedWidth/2;break;case"right":e-=this.renderedWidth}var o=t.textBaseline;if("underline"===r)switch(o){case"top":i+=a;break;case"middle":i+=a/2}else if("line-through"===r)switch(o){case"top":i+=a/1.5;break;case"middle":i+=a/3}t.save(),t.beginPath(),t.strokeStyle=t.fillStyle,t.lineWidth=Math.ceil(a*s),t.moveTo(e-this.lineThroughWidthOffset,i),t.lineTo(e+this.renderedWidth+2*this.lineThroughWidthOffset,i),t.stroke(),t.restore()}}]),t}();for(var l=[],c=0;c<360;c+=22.5)l.push([Math.cos(Math.PI*c/180),Math.sin(Math.PI*c/180)])},367:function(t,e,i){"use strict";i.d(e,"a",(function(){return f})),i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return h})),i.d(e,"d",(function(){return u}));var r=i(14),n=i(60),a=i(295),s=i(168),o=i(251);function h(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":var e=t.symbolLayers;return e&&1===e.length?h(e[0]):null;case"CIMVectorMarker":var i,r=t.markerGraphics;if(!r||1!==r.length)return null;var n=r[0];if(!n)return null;var a=n.geometry;if(!a)return null;var s=n.symbol;return!s||"CIMPolygonSymbol"!==s.type&&"CIMLineSymbol"!==s.type||null!==(i=s.symbolLayers)&&void 0!==i&&i.some((function(t){return!!t.effects}))?null:{geom:a,asFill:"CIMPolygonSymbol"===s.type};case"sdf":return{geom:t.geom,asFill:t.asFill}}return null}function l(t){var e,i=1/0,r=-1/0,a=1/0,s=-1/0,o=Object(n.a)(t);try{for(o.s();!(e=o.n()).done;){var h,l=e.value,c=Object(n.a)(l);try{for(c.s();!(h=c.n()).done;){var u=h.value;u[0]<i&&(i=u[0]),u[0]>r&&(r=u[0]),u[1]<a&&(a=u[1]),u[1]>s&&(s=u[1])}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return[i,a,r,s]}function c(t){return t?t.rings?l(t.rings):t.paths?l(t.paths):Object(s.d)(t)?[t.xmin,t.ymin,t.xmax,t.ymax]:null:null}function u(t,e,i,n,a){var s=Object(r.a)(t,4),o=s[0],h=s[1],l=s[2],c=s[3];if(l<o||c<h)return[0,0,0];var u=l-o,f=c-h,v=Math.floor(31.5),m=(128-2*(v+1))/Math.max(u,f),d=Math.round(u*m)+2*v,p=Math.round(f*m)+2*v,_=1;e&&(_=p/m/(e.ymax-e.ymin));var y=0,g=0;if(n)if(a){if(e&&i&&e.ymax-e.ymin>0){var b=(e.xmax-e.xmin)/(e.ymax-e.ymin);y=n.x/(i*b),g=n.y/i}}else y=n.x,g=n.y;return y=.5*(e.xmax+e.xmin)+y*(e.xmax-e.xmin),g=.5*(e.ymax+e.ymin)+g*(e.ymax-e.ymin),y-=o,g-=h,y*=m,g*=m,[_,(y+=v)/d-.5,-((g+=v)/p-.5)]}function f(t){var e,i=function(t){return t?t.rings?t.rings:t.paths?t.paths:void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:null:null}(t.geom),a=function(t){var e,i=1/0,r=-1/0,a=1/0,s=-1/0,h=Object(n.a)(t);try{for(h.s();!(e=h.n()).done;){var l,c=e.value,u=Object(n.a)(c);try{for(u.s();!(l=u.n()).done;){var f=l.value;f[0]<i&&(i=f[0]),f[0]>r&&(r=f[0]),f[1]<a&&(a=f[1]),f[1]>s&&(s=f[1])}}catch(v){u.e(v)}finally{u.f()}}}catch(v){h.e(v)}finally{h.f()}return new o.a(i,a,r-i,s-a)}(i),s=Math.floor(31.5),h=(128-2*(s+1))/Math.max(a.width,a.height),l=Math.round(a.width*h)+2*s,c=Math.round(a.height*h)+2*s,u=[],f=Object(n.a)(i);try{for(f.s();!(e=f.n()).done;){var m=e.value;if(m&&m.length>1){var d,p=[],_=Object(n.a)(m);try{for(_.s();!(d=_.n()).done;){var y=d.value,g=Object(r.a)(y,2),b=g[0],k=g[1];b-=a.x,k-=a.y,b*=h,k*=h,b+=s-.5,k+=s-.5,t.asFill?p.push([b,k]):p.push([Math.round(b),Math.round(k)])}}catch(P){_.e(P)}finally{_.f()}if(t.asFill){var O=p.length-1;p[0][0]===p[O][0]&&p[0][1]===p[O][1]||p.push(p[0])}u.push(p)}}}catch(P){f.e(P)}finally{f.f()}var x=function(t,e,i,r){for(var a=e*i,s=new Array(a),o=r*r+1,h=0;h<a;++h)s[h]=o;var l,c=Object(n.a)(t);try{for(c.s();!(l=c.n()).done;)for(var u=l.value,f=u.length,v=1;v<f;++v){var m=u[v-1],d=u[v],p=void 0,_=void 0,y=void 0,g=void 0;m[0]<d[0]?(p=m[0],_=d[0]):(p=d[0],_=m[0]),m[1]<d[1]?(y=m[1],g=d[1]):(y=d[1],g=m[1]);var b=Math.floor(p)-r,k=Math.floor(_)+r,O=Math.floor(y)-r,x=Math.floor(g)+r;b<0&&(b=0),k>e&&(k=e),O<0&&(O=0),x>i&&(x=i);for(var M=d[0]-m[0],j=d[1]-m[1],S=M*M+j*j,C=b;C<k;C++)for(var w=O;w<x;w++){var L=void 0,I=void 0,T=(C-m[0])*M+(w-m[1])*j;T<0?(L=m[0],I=m[1]):T>S?(L=d[0],I=d[1]):(T/=S,L=m[0]+T*M,I=m[1]+T*j);var A=(C-L)*(C-L)+(w-I)*(w-I),z=(i-w-1)*e+C;A<s[z]&&(s[z]=A)}}}catch(P){c.e(P)}finally{c.f()}for(var F=0;F<a;++F)s[F]=Math.sqrt(s[F]);return s}(u,l,c,s);return t.asFill&&function(t,e,i,r,a){var s,o=Object(n.a)(t);try{for(o.s();!(s=o.n()).done;)for(var h=s.value,l=h.length,c=1;c<l;++c){var u=h[c-1],f=h[c],v=void 0,m=void 0,d=void 0,p=void 0;u[0]<f[0]?(v=u[0],m=f[0]):(v=f[0],m=u[0]),u[1]<f[1]?(d=u[1],p=f[1]):(d=f[1],p=u[1]);var _=Math.floor(v),y=Math.floor(m)+1,g=Math.floor(d),b=Math.floor(p)+1;_<r&&(_=r),y>e-r&&(y=e-r),g<r&&(g=r),b>i-r&&(b=i-r);for(var k=g;k<b;++k)if(u[1]>k!=f[1]>k){for(var O=(i-k-1)*e,x=_;x<y;++x)x<(f[0]-u[0])*(k-u[1])/(f[1]-u[1])+u[0]&&(a[O+x]=-a[O+x]);for(var M=r;M<_;++M)a[O+M]=-a[O+M]}}}catch(P){o.e(P)}finally{o.f()}}(u,l,c,s,x),[v(x,s),l,c]}function v(t,e){for(var i=2*e,r=t.length,n=new Uint8Array(4*r),s=0;s<r;++s){var o=.5-t[s]/i;Object(a.a)(o,n,4*s)}return n}},378:function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return n}));function r(t){var e=t.toLowerCase().split(" ").join("-");switch(e){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return e}}function n(t){var e=function(t){if(!t.weight)return"";switch(t.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}(t)+function(t){if(!t.style)return"";switch(t.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}(t);return r(t.family)+(e.length>0?e:"-regular")}},379:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));var r=i(267);function n(t,e){var i;if("string"==typeof t)i=Object(r.b)(t+"-seed(".concat(e,")"));else{var n=12;i=t^e;do{i=107*(i>>8^i)+n|0}while(0!=--n)}return(1+i/(1<<31))/2}function a(t){return Math.floor(n(t,s)*o)}var s=53290320,o=10}}]);