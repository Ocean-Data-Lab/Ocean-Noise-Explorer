(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[121],{1088:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ae}));var r=a(5),n=a(155),i=a(209),o=a(164),l=a(163),c=a(60),y=a(142),u=a(143),s=a(144),p=a(145),b=a(154),f=a.n(b),d=a(148),O=(a(177),a(220)),v=(a(265),a(194)),j=a(159),m=a(161),h=a(146),g=a(272),S=a(334),w=a(427),k=a(151),N=(a(150),a(189)),x=a(149),J=a(192),L=a(266),T=a(285),M=a(182),C=a(404),I=(a(152),a(147),a(726)),R=a(286),D=a(336),E=a(307),P=a(626),G=a(597),_=function(e){Object(s.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(y.a)(this,a),(r=t.call(this,e)).elevationInfo=null,r.graphics=new P.a,r.screenSizePerspectiveEnabled=!0,r.type="graphics",r.internal=!1,r}return Object(u.a)(a,[{key:"destroy",value:function(){this.removeAll(),this.graphics.destroy()}},{key:"add",value:function(e){return this.graphics.add(e),this}},{key:"addMany",value:function(e){return this.graphics.addMany(e),this}},{key:"removeAll",value:function(){return this.graphics.removeAll(),this}},{key:"remove",value:function(e){this.graphics.remove(e)}},{key:"removeMany",value:function(e){this.graphics.removeMany(e)}},{key:"on",value:function(e,t){return Object(o.a)(Object(l.a)(a.prototype),"on",this).call(this,e,t)}},{key:"graphicChanged",value:function(e){this.emit("graphic-update",e)}}]),a}(Object(D.a)(Object(E.a)(R.a)));Object(d.a)([Object(k.b)({type:G.a})],_.prototype,"elevationInfo",void 0),Object(d.a)([Object(k.b)(Object(I.b)(P.a,"graphics"))],_.prototype,"graphics",void 0),Object(d.a)([Object(k.b)({type:["show","hide"]})],_.prototype,"listMode",void 0),Object(d.a)([Object(k.b)()],_.prototype,"screenSizePerspectiveEnabled",void 0),Object(d.a)([Object(k.b)({readOnly:!0})],_.prototype,"type",void 0),Object(d.a)([Object(k.b)({constructOnly:!0})],_.prototype,"internal",void 0);var F=_=Object(d.a)([Object(x.a)("esri.layers.GraphicsLayer")],_),z=a(852),A=a(304),B=a(306),W=a(356),q=a(462),H=a(415),K=a(440),Q=a(570),U=a(185),V=a(176);function X(e){return e.layers.some((function(e){return null!=e.layerDefinition.visibilityField}))}var Y=new W.a({name:"OBJECTID",alias:"OBJECTID",type:"oid",nullable:!1,editable:!1}),Z=new W.a({name:"title",alias:"Title",type:"string",nullable:!0,editable:!0}),$=function(e){Object(s.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(y.a)(this,a),(r=t.call(this,e)).visibilityMode="inherited",r}return Object(u.a)(a,[{key:"initialize",value:function(){var e,t=this,a=Object(c.a)(this.graphics);try{for(a.s();!(e=a.n()).done;){e.value.sourceLayer=this.layer}}catch(r){a.e(r)}finally{a.f()}this.graphics.on("after-add",(function(e){e.item.sourceLayer=t.layer})),this.graphics.on("after-remove",(function(e){e.item.sourceLayer=null}))}},{key:"sublayers",get:function(){return this.graphics}}]),a}(F);Object(d.a)([Object(k.b)({readOnly:!0})],$.prototype,"sublayers",null),Object(d.a)([Object(k.b)()],$.prototype,"layer",void 0),Object(d.a)([Object(k.b)()],$.prototype,"layerId",void 0),Object(d.a)([Object(k.b)({readOnly:!0})],$.prototype,"visibilityMode",void 0),$=Object(d.a)([Object(x.a)("esri.layers.MapNotesLayer.MapNotesSublayer")],$);var ee=[{geometryType:"polygon",geometryTypeJSON:"esriGeometryPolygon",id:"polygonLayer",layerId:0,title:"Polygons",identifyingSymbol:(new q.a).toJSON()},{geometryType:"polyline",geometryTypeJSON:"esriGeometryPolyline",id:"polylineLayer",layerId:1,title:"Polylines",identifyingSymbol:(new H.a).toJSON()},{geometryType:"multipoint",geometryTypeJSON:"esriGeometryMultipoint",id:"multipointLayer",layerId:2,title:"Multipoints",identifyingSymbol:(new K.a).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",id:"pointLayer",layerId:3,title:"Points",identifyingSymbol:(new K.a).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",id:"textLayer",layerId:4,title:"Text",identifyingSymbol:(new Q.a).toJSON()}],te=function(e){Object(s.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(y.a)(this,a),(r=t.call(this,e)).capabilities={operations:{supportsMapNotesEditing:!0}},r.featureCollections=null,r.featureCollectionJSON=null,r.featureCollectionType="notes",r.legendEnabled=!1,r.minScale=0,r.maxScale=0,r.spatialReference=U.a.WGS84,r.sublayers=new v.a(ee.map((function(e){return new $({id:e.id,layerId:e.layerId,title:e.title,layer:Object(i.a)(r)})}))),r.title="Map Notes",r.type="map-notes",r.visibilityMode="inherited",r}return Object(u.a)(a,[{key:"readCapabilities",value:function(e,t,a){return{operations:{supportsMapNotesEditing:!X(t)&&"portal-item"!==(null===a||void 0===a?void 0:a.origin)}}}},{key:"readFeatureCollections",value:function(e,t,a){if(!X(t))return null;var r=t.layers.map((function(e){var t=new C.default;return t.read(e,a),t}));return new v.a({items:r})}},{key:"readLegacyfeatureCollectionJSON",value:function(e,t){return X(t)?Object(m.a)(t.featureCollection):null}},{key:"readFullExtent",value:function(e,t){if(!t.layers.length||t.layers.every((function(e){return!e.layerDefinition.extent})))return new V.a({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:U.a.WGS84});var a=U.a.fromJSON(t.layers[0].layerDefinition.spatialReference);return t.layers.reduce((function(e,t){var a=t.layerDefinition.extent;return a?V.a.fromJSON(a).union(e):e}),new V.a({spatialReference:a}))}},{key:"readMinScale",value:function(e,t){var a,r=Object(c.a)(t.layers);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(null!=n.layerDefinition.minScale)return n.layerDefinition.minScale}}catch(i){r.e(i)}finally{r.f()}return 0}},{key:"readMaxScale",value:function(e,t){var a,r=Object(c.a)(t.layers);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(null!=n.layerDefinition.maxScale)return n.layerDefinition.maxScale}}catch(i){r.e(i)}finally{r.f()}return 0}},{key:"multipointLayer",get:function(){return this._findSublayer("multipointLayer")}},{key:"pointLayer",get:function(){return this._findSublayer("pointLayer")}},{key:"polygonLayer",get:function(){return this._findSublayer("polygonLayer")}},{key:"polylineLayer",get:function(){return this._findSublayer("polylineLayer")}},{key:"readSpatialReference",value:function(e,t){return t.layers.length?U.a.fromJSON(t.layers[0].layerDefinition.spatialReference):U.a.WGS84}},{key:"readSublayers",value:function(e,t,a){var r=this;if(X(t))return null;var n,i=[],o=t.layers.reduce((function(e,t){var a;return Math.max(e,null!==(a=t.layerDefinition.id)&&void 0!==a?a:-1)}),-1)+1,l=Object(c.a)(t.layers);try{var y=function(){var e,t,a=n.value,l=a.layerDefinition,c=a.featureSet,y=null!==(e=l.geometryType)&&void 0!==e?e:c.geometryType,u=null!==(t=l.id)&&void 0!==t?t:o++,s=ee.find((function(e){var t,a,r;return y===e.geometryTypeJSON&&(null===(t=l.drawingInfo)||void 0===t||null===(a=t.renderer)||void 0===a||null===(r=a.symbol)||void 0===r?void 0:r.type)===e.identifyingSymbol.type}));if(s){var p=new $({id:s.id,title:l.name,layerId:u,layer:r,graphics:c.features.map((function(e){var t=e.geometry,a=e.symbol,r=e.attributes,n=e.popupInfo;return O.a.fromJSON({attributes:r,geometry:t,symbol:a,popupTemplate:n})}))});i.push(p)}};for(l.s();!(n=l.n()).done;)y()}catch(u){l.e(u)}finally{l.f()}return new v.a(i)}},{key:"writeSublayers",value:function(e,t,a,r){var n,i=this,o=this.minScale,l=this.maxScale;if(!Object(h.j)(e)){var y=e.some((function(e){return e.graphics.length>0}));if(this.capabilities.operations.supportsMapNotesEditing){var u,s=[],p=this.spatialReference.toJSON(),b=Object(c.a)(e);try{e:for(b.s();!(u=b.n()).done;){var f,d=u.value,O=Object(c.a)(d.graphics);try{for(O.s();!(f=O.n()).done;){var v=f.value;if(Object(h.k)(v.geometry)){p=v.geometry.spatialReference.toJSON();break e}}}catch(k){O.e(k)}finally{O.f()}}}catch(k){b.e(k)}finally{b.f()}var m,g=Object(c.a)(ee);try{var w=function(){var t=m.value,a=e.find((function(e){return t.id===e.id}));i._writeMapNoteSublayer(s,a,t,o,l,p,r)};for(g.s();!(m=g.n()).done;)w()}catch(k){g.e(k)}finally{g.f()}Object(S.c)("featureCollection.layers",s,t)}else y&&(null===r||void 0===r||null===(n=r.messages)||void 0===n||n.push(new j.a("map-notes-layer:editing-not-supported","New map notes cannot be added to this layer")))}}},{key:"textLayer",get:function(){return this._findSublayer("textLayer")}},{key:"load",value:function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}},{key:"read",value:function(e,t){"featureCollection"in e&&(e=Object(m.a)(e),Object.assign(e,e.featureCollection)),Object(o.a)(Object(l.a)(a.prototype),"read",this).call(this,e,t)}},{key:"beforeSave",value:function(){var e=Object(n.a)(f.a.mark((function e(){var t,a,r,n,i,o,l,y,u,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(h.j)(this.sublayers)){e.next=2;break}return e.abrupt("return");case 2:t=null,a=[],r=Object(c.a)(this.sublayers),e.prev=5,r.s();case 7:if((n=r.n()).done){e.next=40;break}i=n.value,o=Object(c.a)(i.graphics),e.prev=10,o.s();case 12:if((l=o.n()).done){e.next=30;break}if(y=l.value,!Object(h.k)(y.geometry)){e.next=28;break}if(u=y.geometry,!t){e.next=26;break}if(e.t0=Object(M.d)(u.spatialReference,t),e.t0){e.next=24;break}if(e.t1=Object(L.a)(u.spatialReference,t)||Object(L.e)(),e.t1){e.next=23;break}return e.next=23,Object(L.f)();case 23:y.geometry=Object(L.g)(u,t);case 24:e.next=27;break;case 26:t=u.spatialReference;case 27:a.push(y);case 28:e.next=12;break;case 30:e.next=35;break;case 32:e.prev=32,e.t2=e.catch(10),o.e(e.t2);case 35:return e.prev=35,o.f(),e.finish(35);case 38:e.next=7;break;case 40:e.next=45;break;case 42:e.prev=42,e.t3=e.catch(5),r.e(e.t3);case 45:return e.prev=45,r.f(),e.finish(45);case 48:return e.next=50,Object(T.a)(a.map((function(e){return e.geometry})));case 50:s=e.sent,a.forEach((function(e,t){return e.geometry=s[t]}));case 52:case"end":return e.stop()}}),e,this,[[5,42,45,48],[10,32,35,38]])})));return function(){return e.apply(this,arguments)}}()},{key:"_findSublayer",value:function(e){var t,a;return Object(h.j)(this.sublayers)?null:null!==(t=null===(a=this.sublayers)||void 0===a?void 0:a.find((function(t){return t.id===e})))&&void 0!==t?t:null}},{key:"_writeMapNoteSublayer",value:function(e,t,a,r,n,i,o){var l=[];if(!Object(h.j)(t)){var y,u=Object(c.a)(t.graphics);try{for(u.s();!(y=u.n()).done;){var s=y.value;this._writeMapNote(l,s,a.geometryType,o)}}catch(p){u.e(p)}finally{u.f()}this._normalizeObjectIds(l,Y),e.push({layerDefinition:{name:t.title,drawingInfo:{renderer:{type:"simple",symbol:Object(m.a)(a.identifyingSymbol)}},id:t.layerId,geometryType:a.geometryTypeJSON,minScale:r,maxScale:n,objectIdField:"OBJECTID",fields:[Y.toJSON(),Z.toJSON()],spatialReference:i},featureSet:{features:l,geometryType:a.geometryTypeJSON}})}}},{key:"_writeMapNote",value:function(e,t,a,n){var i,o;if(!Object(h.j)(t)){var l=t.geometry,c=t.symbol,y=t.popupTemplate;if(!Object(h.j)(l))if(l.type===a)if(Object(h.j)(c))null===n||void 0===n||null===(o=n.messages)||void 0===o||o.push(new w.a("map-notes-layer:no-symbol","Skipping map notes with no symbol",{graphic:t}));else{var u={attributes:Object(r.a)({},t.attributes),geometry:l.toJSON(),symbol:c.toJSON()};Object(h.k)(y)&&(u.popupInfo=y.toJSON()),e.push(u)}else null===n||void 0===n||null===(i=n.messages)||void 0===i||i.push(new w.a("map-notes-layer:invalid-geometry-type",'Geometry "'.concat(l.type,'" cannot be saved in "').concat(a,'" layer'),{graphic:t}))}}},{key:"_normalizeObjectIds",value:function(e,t){var a,r=t.name,n=Object(z.a)(r,e)+1,i=new Set,o=Object(c.a)(e);try{for(o.s();!(a=o.n()).done;){var l=a.value;l.attributes||(l.attributes={});var y=l.attributes;(null==y[r]||i.has(y[r]))&&(y[r]=n++),i.add(y[r])}}catch(u){o.e(u)}finally{o.f()}}}]),a}(Object(D.a)(Object(E.a)(Object(A.a)(Object(B.a)(Object(g.a)(R.a))))));Object(d.a)([Object(k.b)({readOnly:!0})],te.prototype,"capabilities",void 0),Object(d.a)([Object(N.a)(["portal-item","web-map"],"capabilities",["layers"])],te.prototype,"readCapabilities",null),Object(d.a)([Object(k.b)({readOnly:!0})],te.prototype,"featureCollections",void 0),Object(d.a)([Object(N.a)(["web-map","portal-item"],"featureCollections",["layers"])],te.prototype,"readFeatureCollections",null),Object(d.a)([Object(k.b)({readOnly:!0,json:{origins:{"web-map":{write:{enabled:!0,target:"featureCollection"}}}}})],te.prototype,"featureCollectionJSON",void 0),Object(d.a)([Object(N.a)(["web-map","portal-item"],"featureCollectionJSON",["featureCollection"])],te.prototype,"readLegacyfeatureCollectionJSON",null),Object(d.a)([Object(k.b)({readOnly:!0,json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],te.prototype,"featureCollectionType",void 0),Object(d.a)([Object(k.b)({json:{write:!1}})],te.prototype,"fullExtent",void 0),Object(d.a)([Object(N.a)(["web-map","portal-item"],"fullExtent",["layers"])],te.prototype,"readFullExtent",null),Object(d.a)([Object(k.b)({readOnly:!0,json:{origins:{"web-map":{write:{target:"featureCollection.showLegend",overridePolicy:function(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],te.prototype,"legendEnabled",void 0),Object(d.a)([Object(k.b)({type:["show","hide"]})],te.prototype,"listMode",void 0),Object(d.a)([Object(k.b)({type:Number,nonNullable:!0,json:{write:!1}})],te.prototype,"minScale",void 0),Object(d.a)([Object(N.a)(["web-map","portal-item"],"minScale",["layers"])],te.prototype,"readMinScale",null),Object(d.a)([Object(k.b)({type:Number,nonNullable:!0,json:{write:!1}})],te.prototype,"maxScale",void 0),Object(d.a)([Object(N.a)(["web-map","portal-item"],"maxScale",["layers"])],te.prototype,"readMaxScale",null),Object(d.a)([Object(k.b)({readOnly:!0})],te.prototype,"multipointLayer",null),Object(d.a)([Object(k.b)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],te.prototype,"operationalLayerType",void 0),Object(d.a)([Object(k.b)({readOnly:!0})],te.prototype,"pointLayer",null),Object(d.a)([Object(k.b)({readOnly:!0})],te.prototype,"polygonLayer",null),Object(d.a)([Object(k.b)({readOnly:!0})],te.prototype,"polylineLayer",null),Object(d.a)([Object(k.b)({type:U.a})],te.prototype,"spatialReference",void 0),Object(d.a)([Object(N.a)(["web-map","portal-item"],"spatialReference",["layers"])],te.prototype,"readSpatialReference",null),Object(d.a)([Object(k.b)({readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],te.prototype,"sublayers",void 0),Object(d.a)([Object(N.a)("web-map","sublayers",["layers"])],te.prototype,"readSublayers",null),Object(d.a)([Object(J.a)("web-map","sublayers")],te.prototype,"writeSublayers",null),Object(d.a)([Object(k.b)({readOnly:!0})],te.prototype,"textLayer",null),Object(d.a)([Object(k.b)()],te.prototype,"title",void 0),Object(d.a)([Object(k.b)({readOnly:!0,json:{read:!1}})],te.prototype,"type",void 0);var ae=te=Object(d.a)([Object(x.a)("esri.layers.MapNotesLayer")],te)},852:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var r=a(60),n=1;function i(e,t){var a,n=0,i=Object(r.a)(t);try{for(i.s();!(a=i.n()).done;){var o,l=null===(o=a.value.attributes)||void 0===o?void 0:o[e];"number"==typeof l&&isFinite(l)&&(n=Math.max(n,l))}}catch(c){i.e(c)}finally{i.f()}return n}}}]);