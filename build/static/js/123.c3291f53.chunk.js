(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[123],{1232:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return H}));var r=n(60),a=n(5),i=n(14),s=n(155),u=n(143),o=n(142),c=n(154),l=n.n(c),p=(n(177),n(186)),d=n(159),f=n(156),h=n(162),y=n(183),v=n(256),m=n(309),b=n(182),g=n(306),x=n(351),O=n(216),w=n(674),F=n(278),k=n(551),j=l.a.mark(E),_=l.a.mark(q),I=/^\s*"([\S\s]*)"\s*$/,N=/""/g,T=[","," ",";","|","\t"];function E(e,t,n){var r,a,i;return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:r=0;case 1:if(!(r<=e.length)){s.next=10;break}if(a=e.indexOf(t,r),i=e.substring(r,a>-1?a:void 0),r+=i.length+t.length,s.t0=n&&!i.trim(),s.t0){s.next=8;break}return s.next=8,i;case 8:s.next=1;break;case 10:case"end":return s.stop()}}),j)}function S(e){var t=e.includes("\r\n")?"\r\n":"\n";return E(e,t,!0)}function C(e,t){return E(e,t,!1)}function q(e,t,n){var a,i,s,u,o,c,p,d,f,h,y,v,m,b,g=arguments;return l.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:a=g.length>3&&void 0!==g[3]?g[3]:function(){return Object.create(null)},i="",s="",u=0,o=a(),c=0,p=Object(r.a)(e),l.prev=3,p.s();case 5:if((d=p.n()).done){l.next=47;break}f=d.value,h=C(f,n),y=Object(r.a)(h),l.prev=9,y.s();case 11:if((v=y.n()).done){l.next=29;break}if(m=v.value,i+=s+m,s="",(u+=D(m))%2!=0){l.next=26;break}if(!(u>0)){l.next=22;break}if(b=I.exec(i)){l.next=19;break}return o=a(),c=0,i="",u=0,l.abrupt("continue",45);case 19:o[t[c]]=b[1].replace(N,'"'),c++,l.next=23;break;case 22:o[t[c]]=i,c++;case 23:i="",u=0,l.next=27;break;case 26:s=n;case 27:l.next=11;break;case 29:l.next=34;break;case 31:l.prev=31,l.t0=l.catch(9),y.e(l.t0);case 34:return l.prev=34,y.f(),l.finish(34);case 37:if(0!==u){l.next=44;break}return l.next=40,o;case 40:o=a(),c=0,l.next=45;break;case 44:s="\n";case 45:l.next=5;break;case 47:l.next=52;break;case 49:l.prev=49,l.t1=l.catch(3),p.e(l.t1);case 52:return l.prev=52,p.f(),l.finish(52);case 55:case"end":return l.stop()}}),_,null,[[3,49,52,55],[9,31,34,37]])}function D(e){var t=0,n=0;for(n=e.indexOf('"',n);n>=0;)t++,n=e.indexOf('"',n+1);return t}var P=n(389),A=n(835);function V(e,t,n,a){var i,s=[],u=q(e,n,t),o=[],c=Object(r.a)(u);try{for(c.s();!(i=c.n()).done;){var l=i.value;if(10===o.length)break;o.push(l)}}catch(h){c.e(h)}finally{c.f()}var p,d=Object(r.a)(n);try{var f=function(){var e=p.value;if(e===a.longitudeFieldName||e===a.latitudeFieldName)s.push({name:e,type:"esriFieldTypeDouble",alias:e});else{var t=function(e){if(!e.length)return"string";var t=/[^+-.,0-9]/;return e.map((function(e){var n=!1;if(""!==e){if(t.test(e))n=!0;else{var r=R(e);if(!isNaN(r))return/[.,]/.test(e)||!Number.isInteger(r)||r>214783647||r<-214783648?"double":"integer";if(e.includes("E")){if(r=Number(e),!isNaN(r))return"double";if(e.includes(",")){if(e=e.replace(",","."),r=Number(e),!isNaN(r))return"double";n=!0}else n=!0}else n=!0}return n?/^[-]?\d*[.,]?\d*$/.test(e)?"string":G(new Date(e),e)?"date":"string":"string"}})).reduce((function(e,t){return void 0===e||e===t?t:"string"===e||"string"===t?"string":"double"===e||"double"===t?"double":void 0}))}(o.map((function(t){return t[e]}))),n={name:e,type:null,alias:e};switch(t){case"integer":n.type="esriFieldTypeInteger";break;case"double":n.type="esriFieldTypeDouble";break;case"date":n.type="esriFieldTypeDate",n.length=36;break;default:n.type="esriFieldTypeString",n.length=255}s.push(n)}};for(d.s();!(p=d.n()).done;)f()}catch(h){d.e(h)}finally{d.f()}return s}function G(e,t){if(!e||"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))return!1;var n=!0;if(!M&&/\d+\W*$/.test(t)){var r=t.match(/[a-zA-Z]{2,}/);if(r){for(var a=!1,i=0;!a&&i<=r.length;)a=!Q.test(r[i]),i++;n=!a}}return n}var R=function(){var e=Object(A.a)(),t=new RegExp("^"+e.regexp+"$"),n=new RegExp("["+e.group+"\\s\\xa0]","g"),r=e.factor;return function(a){var i=t.exec(a);if(e.factor=r,!i)return NaN;var s=i[1];if(!i[1]){if(!i[2])return NaN;s=i[2],e.factor*=-1}return+(s=s.replace(n,"").replace(e.decimal,"."))*e.factor}}(),Q=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,M=Number.isNaN(new Date("technology 10").getTime()),$=["lat","latitude","latitude83","latdecdeg","lat_dd","y","ycenter","point-y"],U=["lon","lng","long","longitude","longitude83","longdecdeg","long_dd","x","xcenter","point-x"],B=n(330),L=n(238),Z=n(185),J=Object(P.d)("esriGeometryPoint"),z=["csv"],W=[0,0],Y=Object(u.a)((function e(t,n){Object(o.a)(this,e),this.x=t,this.y=n})),H=function(){function e(){var t=this;Object(o.a)(this,e),this._queryEngine=null,this._snapshotFeatures=function(){var e=Object(s.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._fetch(n);case 2:return r=e.sent,e.abrupt("return",t._createFeatures(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return Object(u.a)(e,[{key:"destroy",value:function(){var e;null!==(e=this._queryEngine)&&void 0!==e&&e.destroy(),this._queryEngine=null}},{key:"load",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r,a,s,u,o,c,p,d,f,h=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},this.loadOptions=t,e.next=4,Promise.all([this._fetch(r.signal),this._checkProjection(null===t||void 0===t||null===(n=t.parsingOptions)||void 0===n?void 0:n.spatialReference)]);case 4:return a=e.sent,s=Object(i.a)(a,1),u=s[0],o=K(u,t),this.locationInfo=o.locationInfo,this.delimiter=o.delimiter,this._queryEngine=this._createQueryEngine(o),e.next=11,this._createFeatures(u);case 11:return c=e.sent,this._queryEngine.featureStore.addMany(c),o.layerDefinition.extent=this._queryEngine.fullExtent,o.layerDefinition.timeInfo&&(p=this._queryEngine.timeExtent,d=p.start,f=p.end,o.layerDefinition.timeInfo.timeExtent=[d,f]),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new d.a("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQuery(t,n.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForCount(t,n.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForIds(t,n.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"queryExtent",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this._waitSnapshotComplete();case 4:return e.abrupt("return",this._queryEngine.executeQueryForExtent(t,n.signal));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"querySnapping",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,this._waitSnapshotComplete();case 3:return e.abrupt("return",this._queryEngine.executeQueryForSnapping(t,n.signal));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadOptions.customParameters=t,null!==(n=this._snapshotTask)&&void 0!==n&&n.abort(),this._snapshotTask=Object(h.e)(this._snapshotFeatures),this._snapshotTask.promise.then((function(e){r._queryEngine.featureStore.clear(),e&&r._queryEngine.featureStore.addMany(e)}),(function(e){r._queryEngine.featureStore.clear(),Object(h.j)(e)||f.a.getLogger("esri.layers.CSVLayer").error(new d.a("csv-layer:refresh","An error occurred during refresh",{error:e}))})),e.next=6,this._waitSnapshotComplete();case 6:return e.abrupt("return",{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_waitSnapshotComplete",value:function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._snapshotTask||this._snapshotTask.finished){e.next=9;break}return e.prev=1,e.next=4,this._snapshotTask.promise;case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.abrupt("return",this._waitSnapshotComplete());case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"_fetch",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.loadOptions,r=n.url,i=n.customParameters,r){e.next=3;break}throw new d.a("csv-layer:invalid-source","url not defined");case 3:return s=Object(y.M)(r),e.next=6,Object(p.default)(s.path,{query:Object(a.a)(Object(a.a)({},s.query),i),responseType:"text",signal:t});case 6:return e.abrupt("return",e.sent.data);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createQueryEngine",value:function(e){var t=e.layerDefinition,n=t.objectIdField,r=t.fields,a=t.extent,i=t.timeInfo,s=new w.a({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new k.a({fields:r,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:i,objectIdField:n,spatialReference:a.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:s})}},{key:"_createFeatures",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a,s,u,o,c,p,d,f,h,y,w,F,k,j,_,I,N,T,E,C,D,A,V,Q,M,$,U,B,J,z,H,K,X,ee,te,ne;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.locationInfo,a=n.latitudeFieldName,s=n.longitudeFieldName,u=this._queryEngine,o=u.objectIdField,c=u.fieldsIndex,p=u.spatialReference,d=[],f=[],h=c.fields.filter((function(e){return e.name!==o})).map((function(e){return e.name})),y=0,(w=S(t)).next(),F={},k=Object(r.a)(c.fields);try{for(k.s();!(j=k.n()).done;)"esriFieldTypeOID"!==(_=j.value).type&&"esriFieldTypeGlobalID"!==_.type&&void 0!==(I=Object(L.o)(_))&&(F[_.name]=I)}catch(l){k.e(l)}finally{k.f()}N=q(w,h,this.delimiter,Object(P.b)(F,o)),T=Object(r.a)(N);try{for(T.s();!(E=T.n()).done;)if(C=E.value,D=this._parseCoordinateValue(C[a]),null!=(A=this._parseCoordinateValue(C[s]))&&null!=D&&!isNaN(D)&&!isNaN(A)){for(V in C[a]=D,C[s]=A,C)V!==a&&V!==s&&(c.isDateField(V)?(Q=new Date(C[V]),C[V]=G(Q,C[V])?Q.getTime():null):c.isNumericField(V)&&(M=R(C[V]),isNaN(M)?C[V]=null:C[V]=M));C[o]=y,y++,d.push(new Y(A,D)),f.push(C)}}catch(l){T.e(l)}finally{T.f()}if(!Object(b.d)({wkid:4326},p))if(Object(b.p)(p)){$=Object(r.a)(d);try{for($.s();!(U=$.n()).done;)B=U.value,J=Object(g.c)(B.x,B.y,W),z=Object(i.a)(J,2),B.x=z[0],B.y=z[1]}catch(l){$.e(l)}finally{$.f()}}else d=Object(v.i)(m.a,d,Z.a.WGS84,p,null,null);for(H=[],K=0;K<d.length;K++)X=d[K],ee=X.x,te=X.y,(ne=f[K])[o]=K+1,H.push(new x.a(new O.a([],[ee,te]),ne,null,ne[o]));return e.abrupt("return",H);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_parseCoordinateValue",value:function(e){if(null==e||""===e)return null;var t=R(e);return(isNaN(t)||Math.abs(t)>181)&&(t=parseFloat(e)),t}},{key:"_checkProjection",value:function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(F.a)(b.b,t);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new d.a("csv-layer:projection-not-supported","Projection not supported");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function K(e,t){var n=t.parsingOptions||{},a={delimiter:n.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:n.latitudeField,longitudeFieldName:n.longitudeField}},i=S(e),s=i.next().value;if(!s)throw new d.a("csv-layer:empty-csv","CSV is empty",{csv:e});if(s=s.trim(),!n.delimiter){var u=function(e){var t,n=e.trim(),a=0,i="",s=Object(r.a)(T);try{for(s.s();!(t=s.n()).done;){var u=t.value,o=n.split(u).length;o>a&&(a=o,i=u)}}catch(c){s.e(c)}finally{s.f()}return""===i?null:i}(s);if(!u)throw new d.a("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV");a.delimiter=u}var o=s.split(a.delimiter).filter((function(e){return!!e})),c=a.layerDefinition={name:Object(y.m)(t.url,z)||"csv",drawingInfo:J,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:n.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:n.spatialReference||{wkid:102100}}};if(!n.latitudeField||!n.longitudeField){var l=function(e){var t=e.map((function(e){return e.toLowerCase()}));return{longitudeFieldName:e[t.indexOf(U.find((function(e){return t.includes(e)})))],latitudeFieldName:e[t.indexOf($.find((function(e){return t.includes(e)})))]}}(o);if(!n.longitudeField&&!l.longitudeFieldName||!n.latitudeField&&!l.latitudeFieldName)throw new d.a("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file");a.locationInfo={longitudeFieldName:n.longitudeField||l.longitudeFieldName,latitudeFieldName:n.latitudeField||l.latitudeFieldName}}var p=V(i,a.delimiter,o,a.locationInfo);if(n.fields&&n.fields.length){var f,h=new Map,v=Object(r.a)(n.fields);try{for(v.s();!(f=v.n()).done;){var m=f.value;h.set(m.name.toLowerCase(),m)}}catch(E){v.e(E)}finally{v.f()}var b,g=Object(r.a)(p);try{for(g.s();!(b=g.n()).done;){var x=b.value,O=h.get(x.name.toLowerCase());if(O){var w=x.name;Object.assign(x,O),x.name=w}}}catch(E){g.e(E)}finally{g.f()}}if(c.fields=p,!c.fields.some((function(e){return"esriFieldTypeOID"===e.type&&(c.objectIdField=e.name,!0)}))){var F={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1};c.objectIdField=F.name,c.fields.unshift(F)}if(c.timeInfo){var k=new B.a(c.fields),j=c.timeInfo;if(j.startTimeField){var _=k.get(j.startTimeField);_?(j.startTimeField=_.name,_.type="esriFieldTypeDate"):j.startTimeField=null}if(j.endTimeField){var I=k.get(j.endTimeField);I?(j.endTimeField=I.name,I.type="esriFieldTypeDate"):j.endTimeField=null}if(j.trackIdField){var N=k.get(j.trackIdField);j.trackIdField=N?N.name:null}j.startTimeField||j.endTimeField||(c.timeInfo=null)}return a}},389:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return c}));var r=n(7),a=n(5),i=n(147),s=n(161),u=n(390),o=n(365);function c(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.a:"esriGeometryPolyline"===e?o.c:o.b}}}var l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,p=1;function d(e,t){if(Object(i.a)("esri-csp-restrictions"))return function(){return Object(a.a)(Object(r.a)({},t,null),e)};try{var n="this.".concat(t," = null;");for(var s in e)n+="this".concat(l.test(s)?".".concat(s):'["'.concat(s,'"]')," = ").concat(JSON.stringify(e[s]),";");var u=new Function("\n      return class AttributesClass$".concat(p++," {\n        constructor() {\n          ").concat(n,";\n        }\n      }\n    "))();return function(){return new u}}catch(o){return function(){return Object(a.a)(Object(r.a)({},t,null),e)}}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:Object(s.a)(e)}}]}function h(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:u.a,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}}}]);
//# sourceMappingURL=123.c3291f53.chunk.js.map