{"version":3,"sources":["../node_modules/@arcgis/core/layers/save/featureLayerUtils.js","../node_modules/@arcgis/core/portal/support/jsonContext.js"],"names":["I","a","getLogger","S","g","e","t","title","id","declaredClass","j","type","L","load","c","P","r","messages","filter","map","name","message","details","ignoreUnsupported","length","errors","J","beforeSave","write","N","layer","layerJSON","isTable","layers","tables","O","w","h","JSAPI","typeKeywords","indexOf","E","portalItem","error","loaded","T","test","url","$","customParameters","o","apiKey","fetchData","s","x","layerId","K","l","i","u","n","serviceJSON","p","layersJSON","A","y","itemResources","d","added","m","U","removed","some","forEach","push","includes","sourceJSON","find","defaultPopupTemplate","popupInfo","toJSON","F","findIndex","R","dynamicDataSource","D","Promise","all","Set","size","_","from","clone","portal","getDefault","q","fullExtent","serverType","extent","v","b","METADATA","MULTI_LAYER","SINGLE_LAYER","TABLE","z","_signIn","user","addItem","item","data","folder","C","f","update","Y","slice","reload","B","origin","itemUrl","readResourcePaths","writtenProperties"],"mappings":"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","file":"static/js/42.b3ee68bd.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{difference as e}from\"../../core/arrayUtils.js\";import t from\"../../core/Error.js\";import a from\"../../core/Logger.js\";import{isNone as r,isSome as o}from\"../../core/maybe.js\";import{debounce as s,eachAlways as l}from\"../../core/promiseUtils.js\";import{updateOrigins as i}from\"../../core/accessorSupport/originUtils.js\";import n from\"../FeatureLayer.js\";import{fetchFeatureService as u}from\"../support/arcgisLayers.js\";import{parse as p}from\"../support/arcgisLayerUrl.js\";import{isFeatureCollectionLayer as c,isFeatureServiceLayer as y}from\"../support/layerUtils.js\";import d from\"../../portal/Portal.js\";import m from\"../../portal/PortalItem.js\";import{createForItemWrite as f}from\"../../portal/support/jsonContext.js\";import{addTypeKeyword as w,TypeKeyword as h,getWGS84ExtentForItem as v,removeTypeKeyword as b}from\"../../portal/support/portalItemUtils.js\";const I=a.getLogger(\"esri.layers.FeatureLayer\"),S=\"Feature Service\";function g(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function j(e,a){if(a.type!==S)throw new t(\"feature-layer:portal-item-wrong-type\",g(e,`should have portal item of type \"${S}\"`))}async function L(e){if(await e.load(),c(e))throw new t(\"feature-layer:save\",g(e,\"using an in-memory source cannot be saved to a portal item\"))}function P(e,a){let r=e.messages.filter((({type:e})=>\"error\"===e)).map((({name:e,message:a,details:r})=>new t(e,a,r)));if(a?.ignoreUnsupported&&(r=r.filter((({name:e})=>\"layer:unsupported\"!==e&&\"symbol:unsupported\"!==e&&\"symbol-layer:unsupported\"!==e&&\"property:unsupported\"!==e&&\"url:unsupported\"!==e))),r.length>0)throw new t(\"feature-layer:save\",\"Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:r})}async function J(e,t,a){\"beforeSave\"in e&&\"function\"==typeof e.beforeSave&&await e.beforeSave();const r=e.write({},t);return P(t,a),r}function N(e){const{layer:t,layerJSON:a}=e;return t.isTable?{layers:[],tables:[a]}:{layers:[a],tables:[]}}function O(e){w(e,h.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,a)=>a.indexOf(e)===t)))}function E(e){const a=e.portalItem;if(!a)throw I.error(\"save: requires the portalItem property to be set\"),new t(\"feature-layer:portal-item-not-set\",g(e,\"requires the portalItem property to be set\"));if(!a.loaded)throw new t(\"feature-layer:portal-item-not-loaded\",g(e,\"cannot be saved to a portal item that does not exist or is inaccessible\"));j(e,a)}async function T(e,t){return/\\/\\d+\\/?$/.test(e.url)?N(t[0]):$(e,t)}async function $(e,t){const{layer:{url:a,customParameters:r,apiKey:o}}=t[0];let s=await e.fetchData(\"json\");s&&null!=s.layers&&null!=s.tables||(s=await x(s,{url:a,customParameters:r,apiKey:o},t.map((e=>e.layer.layerId))));for(const l of t)K(l.layer,l.layerJSON,s);return s}async function x(e,t,a){var r,o;e||(e={}),(r=e).layers||(r.layers=[]),(o=e).tables||(o.tables=[]);const{url:s,customParameters:l,apiKey:i}=t,{serviceJSON:n,layersJSON:p}=await u(s,{customParameters:l,apiKey:i}),c=A(e.layers,n.layers,a),y=A(e.tables,n.tables,a);e.layers=c.itemResources,e.tables=y.itemResources;const d=[...c.added,...y.added],m=p?[...p.layers,...p.tables]:[];return await U(e,d,s,m),e}function A(t,a,r){const o=e(t,a,((e,t)=>e.id===t.id));t=t.filter((e=>!o.removed.some((t=>t.id===e.id))));const s=o.added.map((({id:e})=>({id:e})));return s.forEach((({id:e})=>{t.push({id:e})})),{itemResources:t,added:s.filter((({id:e})=>!r.includes(e)))}}async function U(e,t,a,o){const s=t.map((({id:e})=>new n({url:a,layerId:e,sourceJSON:o.find((({id:t})=>t===e))})));await l(s.map((e=>e.load()))),s.forEach((t=>{const{layerId:a,loaded:o,defaultPopupTemplate:s}=t;if(!o||r(s))return;K(t,{id:a,popupInfo:s.toJSON()},e)}))}function K(e,t,a){e.isTable?F(a.tables,t):F(a.layers,t)}function F(e,t){const a=e.findIndex((({id:e})=>e===t.id));-1===a?e.push(t):e[a]=t}function R(e){const{portalItem:t}=e;return y(e)&&!e.dynamicDataSource&&!!t?.loaded&&t.type===S}async function D(e){if(!e?.length)throw new t(\"feature-layer-utils-saveall:missing-parameters\",\"'layers' array should contain at least one feature layer\");await Promise.all(e.map((e=>e.load())));for(const o of e)if(!R(o))throw new t(\"feature-layer-utils-saveall:invalid-parameters\",`'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${g(o,\"does not conform\")}`,{layer:o});const a=e.map((e=>e.portalItem.id));if(new Set(a).size>1)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"All layers in the 'layers' array should be loaded from the same portal item\");const r=e.map((e=>e.layerId));if(new Set(r).size!==r.length)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"'layers' array should contain only one instance each of layer or table in a feature service\")}function _(e,t){var a,r;let o=m.from(t);return o.id&&(o=o.clone(),o.id=null),(a=o).type??(a.type=S),(r=o).portal??(r.portal=d.getDefault()),j(e,o),o}async function q(e,t){const{url:a,layerId:r,title:s,fullExtent:l,isTable:i}=e,n=p(a),u=o(n)&&\"FeatureServer\"===n.serverType;t.url=u?a:`${a}/${r}`,t.title||(t.title=s),t.extent=null,!i&&o(l)&&(t.extent=await v(l)),b(t,h.METADATA),b(t,h.MULTI_LAYER),w(t,h.SINGLE_LAYER),i&&w(t,h.TABLE),O(t)}async function z(e,t,a){const r=e.portal;await r._signIn(),await r.user.addItem({item:e,data:t,folder:a?.folder})}const C=s(M);async function M(e,t){await L(e),E(e);const a=e.portalItem,r=f(a),o=await J(e,r,t),s=await T(a,[{layer:e,layerJSON:o}]);return O(a),await a.update({data:s}),i(r),a}const Y=s((async(e,t)=>{await D(e);const a=e[0].portalItem,r=f(a),o=await Promise.all(e.map((e=>J(e,r,t)))),s=await T(a,e.map(((e,t)=>({layer:e,layerJSON:o[t]}))));return O(a),await a.update({data:s}),await Promise.all(e.slice(1).map((e=>e.portalItem.reload()))),i(r),a.clone()})),B=s(G);async function G(e,t,a){await L(e);const r=_(e,t),o=f(r),s=N({layer:e,layerJSON:await J(e,o,a)});return await q(e,r),await z(r,s,a),e.portalItem=r,i(o),r}export{C as save,Y as saveAll,B as saveAs};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{urlToObject as r}from\"../../core/urlUtils.js\";import t from\"../Portal.js\";function e(e){return{origin:\"portal-item\",url:r(e.itemUrl),portal:e.portal||t.getDefault(),portalItem:e,readResourcePaths:[]}}function o(e){return{origin:\"portal-item\",messages:[],writtenProperties:[],url:e.itemUrl?r(e.itemUrl):null,portal:e.portal||t.getDefault(),portalItem:e}}export{e as createForItemRead,o as createForItemWrite};\n"],"sourceRoot":""}