{"version":3,"sources":["../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","../node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js","../node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js","../node_modules/@arcgis/core/layers/graphics/data/timeSupport.js","../node_modules/@arcgis/core/layers/graphics/contains.js","../node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js","../node_modules/@arcgis/core/geometry/support/intersects.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js","../node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js"],"names":["t","minX","minY","maxX","maxY","o","i","s","d","e","search","h","this","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","_loadIndex","Array","size","forEach","n","clear","load","length","filter","has","values","Math","min","max","get","delete","remove","set","push","supportsStatistics","supportsPercentileStatistics","supportsSpatialAggregationStatistics","supportedSpatialAggregationStatistics","envelope","centroid","convexHull","supportsCentroid","supportsCacheHint","supportsDistance","supportsDistinct","supportsExtent","supportsGeometryProperties","supportsHavingClause","supportsOrderBy","supportsPagination","supportsQuantization","supportsQuantizationEditMode","supportsQueryGeometry","supportsResultType","supportsSqlExpression","supportsMaxRecordCountFactor","supportsStandardizedQueriesOnly","supportsTopFeaturesQuery","supportsQueryByOthers","supportsHistoricMoment","supportsFormatPBF","supportsDisjointSpatialRelationship","supportsDefaultSpatialReference","supportsCompactGeometry","maxRecordCountFactor","maxRecordCount","standardMaxRecordCount","tileMaxRecordCount","W","K","u","X","Y","capabilities","query","B","geometryType","hasM","hasZ","objectIdField","spatialReference","definitionExpression","featureStore","aggregateAdapter","_changeHandle","events","on","clearCache","timeInfo","cacheSpatialQueries","_geometryQueryCache","c","fieldsIndex","H","fields","scheduler","priority","_frameTask","registerTask","r","a","featureAdapter","fullBounds","xmin","ymin","xmax","ymax","U","_timeExtent","M","_allItems","_executeQuery","createQueryResponse","Z","q","returnGeometry","returnCentroid","outSR","createQueryResponseForCount","count","extent","m","te","p","forEachBounds","items","f","ee","isFinite","zmin","zmax","T","executeQueryForIdSet","then","from","Set","_reschedule","add","getObjectId","point","distance","types","v","NONE","candidates","_checkQuerySupport","F","k","x","y","l","S","signal","_searchFeatures","_getQueryBBoxes","toJSON","_executeObjectIdsQuery","_executeTimeQuery","_executeAttributesQuery","g","createSnappingResponse","trackIdField","_filterLatest","field","normalizationField","valueExpression","_getQueryEngineResultForStats","createSummaryStatisticsResponse","createUniqueValuesResponse","createClassBreaksResponse","createHistogramResponse","schedule","J","reschedule","toArray","_schedule","N","_executeSceneFilterQuery","_executeGeometryQuery","_executeAggregateIdsQuery","sceneFilter","featureSpatialReference","geometry","R","_project","spatialRelationship","z","getGeometry","_runSpatialFilter","_canExecuteSinglePass","spatialRel","JSON","stringify","originalFilterGeometry","outSpatialReference","put","_getAll","_","w","Q","aggregateIds","getFeatureObjectIds","objectIds","P","timeExtent","I","where","isStandardized","TypeError","testFeature","madeProgress","done","startTimeField","endTimeField","getAttribute","O","C","map","D","cloneWithGeometry","rings","forEachInBounds","ie","geometryPrecision","multipatchOption","pixelSize","relationParam","text","outStatistics","groupByFieldsForStatistics","having","orderByFields","_checkAttributesQuerySupport","Promise","all","_checkStatisticsParamsSupport","G","L","arcadeUtils","extractFieldNames","params","j","_checkStatisticsQuerySupport","outFields","returnDistinctValues","outStatisticFieldName","toLowerCase","Boolean","includes","split","E","b","every","statisticType","V","onStatisticField","A","definition","statisticParameters","_checkStatisticsSupport","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","isNaN","start","end","coords","lengths","esriSpatialRelIntersects","esriSpatialRelContains","esriSpatialRelCrosses","esriSpatialRelDisjoint","esriSpatialRelEnvelopeIntersects","esriSpatialRelIndexIntersects","esriSpatialRelOverlaps","esriSpatialRelTouches","esriSpatialRelWithin","esriSpatialRelRelation","esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryEnvelope","resolve","bind","objectId","getAttributes","attributes","getCentroid","geometryInfo","_boundsStore","_featuresById","_markedIds","featureCount","vertexCount","_add","_emitChanged","_remove","invalidateIndex","emit","displayId","onFeatureAdd","getLogger","error","feature","onFeatureRemove","compareMinX","compareMinY","_toBBox","_maxEntries","_minEntries","ceil","_initFormat","prune","_all","data","children","leaf","pop","insert","_build","slice","height","_splitRoot","_insert","indexHint","splice","_condense","pushArray","log","sqrt","_chooseSubtree","_split","_adjustParentBBoxes","_chooseSplitAxis","_chooseSplitIndex","console","_allDistMargin","sort","Function","join","deallocator","arguments"],"mappings":"oNAI0LA,EAAE,CAACC,KAAK,EAAEC,KAAK,EAAEC,KAAK,EAAEC,KAAK,GAAiE,SAASC,EAAEC,EAAEC,EAAEC,IAA7E,SAAWF,GAAGN,EAAEC,KAAKK,EAAE,GAAGN,EAAEE,KAAKI,EAAE,GAAGN,EAAEG,KAAKG,EAAE,GAAGN,EAAEI,KAAKE,EAAE,IAAqBG,CAAEF,GAAGD,EAAEI,OAAOV,EAAEQ,G,IAASG,E,WAAE,aAAa,+BAACC,KAAKC,eAAc,EAAGD,KAAKE,cAAc,GAAGF,KAAKG,YAAY,IAAIC,IAAIJ,KAAKK,YAAY,IAAID,IAAIJ,KAAKM,OAAO,IAAIX,IAAE,EAAED,YAAE,yBAAyB,SAAAA,GAAC,MAAG,CAACL,KAAKK,EAAE,GAAGJ,KAAKI,EAAE,GAAGH,KAAKG,EAAE,GAAGF,KAAKE,EAAE,KAAK,CAAC,MAAM,MAAM,MAAM,QAAQM,KAAKO,WAAW,WAAK,GAAG,EAAKN,cAAc,CAAC,IAAMP,EAAE,IAAIc,MAAM,EAAKH,YAAYI,MAAUd,EAAE,EAAE,EAAKU,YAAYK,SAAS,SAACd,EAAEe,GAAKjB,EAAEC,KAAKgB,KAAK,EAAKV,eAAc,EAAG,EAAKK,OAAOM,QAAQ,EAAKN,OAAOO,KAAKnB,QAAQ,EAAKQ,cAAcY,SAAS,EAAKR,OAAOO,KAAK,EAAKX,cAAca,QAAQ,SAAArB,GAAC,OAAE,EAAKW,YAAYW,IAAItB,OAAM,EAAKQ,cAAcY,OAAO,I,4CAAI,WAAiB,IAAId,KAAKG,YAAYM,KAAK,OAAO,KAAK,IAAvC,EAA6Cf,EAAEE,cAA/C,cAAkEI,KAAKG,YAAYc,UAAnF,IAAmD,gCAAUtB,EAAV,QAAyCA,IAAID,EAAE,GAAGwB,KAAKC,IAAIxB,EAAE,GAAGD,EAAE,IAAIA,EAAE,GAAGwB,KAAKC,IAAIxB,EAAE,GAAGD,EAAE,IAAIA,EAAE,GAAGwB,KAAKE,IAAIzB,EAAE,GAAGD,EAAE,IAAIA,EAAE,GAAGwB,KAAKE,IAAIzB,EAAE,GAAGD,EAAE,MAAhM,8BAAqM,OAAOA,I,iBAAE,WAAY,OAAOM,KAAKC,gB,mBAAc,WAAQD,KAAKC,eAAc,EAAGD,KAAKE,cAAcY,OAAO,EAAEd,KAAKG,YAAYS,QAAQZ,KAAKK,YAAYO,QAAQZ,KAAKM,OAAOM,U,oBAAQ,SAAOlB,GAAG,IAAMC,EAAEK,KAAKG,YAAYkB,IAAI3B,GAAGM,KAAKG,YAAYmB,OAAO5B,GAAGC,IAAIK,KAAKK,YAAYiB,OAAO3B,GAAGK,KAAKC,eAAeD,KAAKM,OAAOiB,OAAO5B,M,6BAAI,SAAgBD,EAAEC,GAAE,WAACK,KAAKO,aAAad,EAAEO,KAAKM,OAAOZ,GAAG,SAAAA,GAAC,OAAEC,EAAE,EAAKU,YAAYgB,IAAI3B,S,iBAAM,SAAIA,GAAG,OAAOM,KAAKG,YAAYkB,IAAI3B,K,iBAAG,SAAIA,GAAG,OAAOM,KAAKG,YAAYa,IAAItB,K,6BAAG,WAAkBM,KAAKC,gBAAgBD,KAAKC,eAAc,EAAGD,KAAKE,cAAcY,OAAO,K,iBAAG,SAAIpB,EAAEC,GAAG,IAAIK,KAAKC,cAAc,CAAC,IAAMN,EAAEK,KAAKG,YAAYkB,IAAI3B,GAAGC,IAAIK,KAAKM,OAAOiB,OAAO5B,GAAGK,KAAKK,YAAYiB,OAAO3B,IAAIK,KAAKG,YAAYqB,IAAI9B,EAAEC,GAAGA,IAAIK,KAAKK,YAAYmB,IAAI7B,EAAED,GAAGM,KAAKC,gBAAgBD,KAAKE,cAAcuB,KAAK9B,GAAGK,KAAKE,cAAcY,OAAzsD,KAAmtDd,KAAKO,mB,uCCJ94D,kCAIA,IAAMnB,EAAE,CAACsC,oBAAmB,EAAGC,8BAA6B,EAAGC,sCAAqC,EAAGC,sCAAsC,CAACC,UAAS,EAAGC,UAAS,EAAGC,YAAW,GAAIC,kBAAiB,EAAGC,mBAAkB,EAAGC,kBAAiB,EAAGC,kBAAiB,EAAGC,gBAAe,EAAGC,4BAA2B,EAAGC,sBAAqB,EAAGC,iBAAgB,EAAGC,oBAAmB,EAAGC,sBAAqB,EAAGC,8BAA6B,EAAGC,uBAAsB,EAAGC,oBAAmB,EAAGC,uBAAsB,EAAGC,8BAA6B,EAAGC,iCAAgC,EAAGC,0BAAyB,EAAGC,uBAAsB,EAAGC,wBAAuB,EAAGC,mBAAkB,EAAGC,qCAAoC,EAAGC,iCAAgC,EAAGC,yBAAwB,EAAGC,0BAAqB,EAAOC,oBAAe,EAAOC,4BAAuB,EAAOC,wBAAmB,I,kVCAsiC,IAAMC,EAAE,kCAAmLC,EAAE,IAAIC,IAAE,KAASC,EAAE,EAAQC,E,WAAE,WAAYnE,GAAE,+BAACG,KAAKiE,aAAa,CAACC,MAAMC,KAAGnE,KAAKoE,aAAavE,EAAEuE,aAAapE,KAAKqE,KAAKxE,EAAEwE,KAAKrE,KAAKsE,KAAKzE,EAAEyE,KAAKtE,KAAKuE,cAAc1E,EAAE0E,cAAcvE,KAAKwE,iBAAiB3E,EAAE2E,iBAAiBxE,KAAKyE,qBAAqB5E,EAAE4E,qBAAqBzE,KAAK0E,aAAa7E,EAAE6E,aAAa1E,KAAK2E,iBAAiB9E,EAAE8E,iBAAiB3E,KAAK4E,cAAc5E,KAAK0E,aAAaG,OAAOC,GAAG,WAAW,kBAAI,EAAKC,gBAAe/E,KAAKgF,SAASnF,EAAEmF,SAASnF,EAAEoF,sBAAsBjF,KAAKkF,oBAAoB,IAAIC,IAAEpB,IAAI,KAAKF,IAAI7D,KAAKoF,YAAY,IAAIC,IAAExF,EAAEyF,QAAQzF,EAAE0F,WAAW1F,EAAE2F,WAAWxF,KAAKyF,WAAW5F,EAAE0F,UAAUG,aAAa7F,EAAE2F,W,2CAAW,WAAUxF,KAAKyF,WAAWE,YAAE3F,KAAKyF,YAAYzF,KAAK+E,aAAaa,YAAE5F,KAAKkF,qBAAqBlF,KAAK4E,cAAce,YAAE3F,KAAK4E,eAAegB,YAAE5F,KAAKoF,e,0BAAa,WAAqB,OAAOpF,KAAK0E,aAAamB,iB,sBAAe,WAAiB,IAAMhG,EAAEG,KAAK0E,aAAaoB,WAAW,OAAOnF,YAAEd,GAAG,KAAK,CAACkG,KAAKlG,EAAE,GAAGmG,KAAKnG,EAAE,GAAGoG,KAAKpG,EAAE,GAAGqG,KAAKrG,EAAE,GAAG2E,iBAAiB2B,YAAEnG,KAAKwE,qB,sBAAmB,WAAiB,OAAOxE,KAAKgF,UAAUhF,KAAKoG,cAAcpG,KAAKoG,YAAYC,YAAErG,KAAKgF,SAAShF,KAAK0E,eAAe1E,KAAKoG,aAAa,O,wBAAK,WAAY,MAAC,UAAApG,KAAKkF,2BAAL,SAA0BtE,QAAQZ,KAAKsG,UAAU,KAAKtG,KAAKoG,YAAY,O,iEAAK,WAAmBvG,EAAET,GAArB,SAAAwG,EAAA,+EAAyC5F,KAAKuG,cAAc1G,EAAE,GAAGT,GAAjE,uCAAqEoH,uBAArE,mCAAuG,OAAIC,IAA3G,6DAA4H,IAAIC,IAAE,GAAG7G,EAAEG,MAAMwG,uBAA7I,yD,kIAAoK,0CAAAZ,EAAA,6DAA2B/F,EAA3B,+BAA6B,GAAGT,EAAhC,yCAAoDY,KAAKuG,cAAc1G,EAAE,CAAC8G,gBAAe,EAAGC,gBAAe,EAAGC,MAAM,MAAMzH,GAA1H,uCAA8H0H,+BAA9H,mCAAwK,OAAIL,IAA5K,6DAA6L,GAA7L,yD,gIAAgM,WAA4B5G,EAAET,GAA9B,6BAAAwG,EAAA,6DAAuClG,EAAEG,EAAEgH,MAA3C,kBAAmE7G,KAAKuG,cAAc1G,EAAE,CAAC8G,gBAAe,EAAGC,gBAAe,EAAGC,MAAM,MAAMzH,GAAzI,UAA2DO,EAA3D,OAA4IgG,EAAEhG,EAAEc,KAAhJ,yCAAiK,CAACsG,MAAM,EAAEC,OAAO,OAAjL,cAAuLC,YAAEC,EAAGC,KAAGnH,KAAK0E,aAAa0C,cAAczH,EAAE0H,OAAO,SAAAxH,GAAC,OAAEyH,YAAEJ,EAAGrH,KAAI0H,GAAU3B,EAAE,CAACG,KAAKmB,EAAG,GAAGlB,KAAKkB,EAAG,GAAGjB,KAAKiB,EAAG,GAAGhB,KAAKgB,EAAG,GAAG1C,iBAAiB2B,YAAEnG,KAAKwE,mBAAmBxE,KAAKsE,MAAMkD,SAASN,EAAG,KAAKM,SAASN,EAAG,MAAMtB,EAAE6B,KAAKP,EAAG,GAAGtB,EAAE8B,KAAKR,EAAG,KAAUvG,EAAEgH,YAAE/B,EAAEjG,EAAE6E,iBAAiB9E,IAAQ8E,iBAAiB2B,YAAEzG,GAAGM,KAAKwE,kBAAkB7D,EAAEsF,KAAKtF,EAAEoF,MAAM,IAASlG,EAAEE,YAAEY,EAAE6D,kBAAkB7D,EAAEoF,MAAMlG,EAAEc,EAAEsF,MAAMpG,GAAKc,EAAEuF,KAAKvF,EAAEqF,MAAM,IAASnG,EAAEE,YAAEY,EAAE6D,kBAAkB7D,EAAEqF,MAAMnG,EAAEc,EAAEuF,MAAMrG,GAAKG,KAAKsE,MAAM,MAAM3D,EAAE8G,MAAM,MAAM9G,EAAE+G,MAAM/G,EAAE+G,KAAK/G,EAAE8G,MAAM,IAAS5H,EAAEE,YAAEY,EAAE6D,kBAAkB7D,EAAE8G,MAAM5H,EAAEc,EAAE+G,MAAM7H,GAA5uB,kBAAovB,CAACkH,MAAMpB,EAAEqB,OAAOrG,IAApwB,qCAAmxB,OAAI8F,IAAvxB,0CAA+xB,CAACM,MAAM,EAAEC,OAAO,OAA/yB,6E,gIAA8zB,WAAyBnH,EAAET,GAA3B,SAAAwG,EAAA,+EAAqC5F,KAAK4H,qBAAqB/H,EAAET,GAAGyI,MAAM,SAAAhI,GAAC,OAAEW,MAAMsH,KAAKjI,OAAxF,gD,kIAA6F,WAA2BA,EAAET,GAA7B,mBAAAwG,EAAA,+EAAkD5F,KAAKuG,cAAc1G,EAAE,CAAC8G,gBAAe,EAAGC,gBAAe,EAAGC,MAAM,MAAMzH,GAAxH,cAA0CM,EAA1C,OAA2HC,EAAED,EAAE2H,MAAM1B,EAAE,IAAIoC,IAA3I,SAA4J/H,KAAKgI,aAAa,WAAI,oBAAgBrI,GAAhB,IAAC,gCAAUE,EAAV,QAAiB8F,EAAEsC,IAAIvI,EAAEmG,eAAeqC,YAAYrI,KAArD,iCAA2DT,GAA7O,gCAAgPuG,GAAhP,qCAA8P,OAAIc,IAAlQ,0CAA2Q,IAAIsB,KAA/Q,6E,qIAA4R,WAA8BlI,EAAET,GAAhC,QAAAwG,EAAA,sCAAAA,EAAA,yDAA+ClG,EAAsBG,EAA5BsI,MAAiBxI,EAAWE,EAApBuI,SAAoBvI,EAATwI,QAAkBC,IAAEC,KAAhF,yCAA2F,CAACC,WAAW,KAAvG,uBAAyHxI,KAAKgI,aAAa,kBAAI,EAAKS,mBAAmB5I,EAAEqE,SAAQ9E,GAAjL,UAAiHwG,EAAjH,OAAoLnG,GAAGiJ,YAAEhJ,EAAE8E,iBAAiBxE,KAAKwE,kBAAjN,KAAmO/E,GAAnO,uCAA4OkJ,YAAEjJ,EAAE8E,iBAAiBxE,KAAKwE,kBAAtQ,WAA8RV,EAAE,iBAAiBnE,EAAEA,EAAEA,EAAEiJ,EAAEzD,EAAE,iBAAiBxF,EAAEA,EAAEA,EAAEkJ,EAAE9I,EAAE,CAACgG,KAAKrG,EAAEkJ,EAAE9E,EAAEmC,KAAKvG,EAAEkJ,EAAE9E,EAAEkC,KAAKtG,EAAEmJ,EAAE1D,EAAEe,KAAKxG,EAAEmJ,EAAE1D,EAAEX,iBAAiB9E,EAAE8E,kBAAkBsE,EAAErJ,EAAEkI,YAAE5H,EAAEC,KAAKwE,kBAAkBzE,EAAvc,0CAAqd,CAACyI,WAAW,KAAje,yBAAofO,YAAEH,YAAElJ,GAAG,KAAK,CAACsJ,OAAO5J,IAAxgB,eAA2e6H,EAA3e,OAA6gB,GAA7gB,UAAyhB8B,YAAEH,YAAEE,GAAG,KAAK,CAACE,OAAO5J,IAA7iB,WAAghB+H,EAAhhB,OAAkjB,IAAMxG,YAAEsG,KAAItG,YAAEwG,GAAhkB,0CAAykB,CAACqB,WAAW,KAArlB,eAA+lBlB,EAAE,IAAIZ,IAAE1G,KAAKiJ,gBAAgBjJ,KAAKkJ,gBAAgB/B,EAAEgC,WAAWvD,EAAE5F,MAAhqB,UAA4qBA,KAAKgI,aAAa,kBAAI,EAAKoB,uBAAuB9B,KAAIlI,GAAluB,yBAA2uBY,KAAKgI,aAAa,kBAAI,EAAKqB,kBAAkB/B,KAAIlI,GAA5xB,yBAAqyBY,KAAKgI,aAAa,kBAAI,EAAKsB,wBAAwBhC,KAAIlI,GAA51B,eAAq2BQ,EAAEqH,EAAEkC,SAASN,EAAEpJ,EAAEkI,YAAE/H,EAAEI,KAAKwE,kBAAkB5E,EAAE2J,EAAE9J,EAAEyB,KAAKE,IAAI0H,EAAE7C,KAAK6C,EAAE/C,KAAK+C,EAAE5C,KAAK4C,EAAE9C,MAAM,EAAErG,EAA/7B,kBAAw8B2H,EAAEkC,uBAAF,2BAA6B3J,GAA7B,IAA+BsI,MAAMU,EAAET,SAASmB,IAAG7J,EAAE8E,mBAA7/B,iD,+IAA+gC,WAAwC3E,EAAET,GAA1C,sBAAAwG,EAAA,yDAAiD5F,KAAKgF,UAAWhF,KAAKgF,SAASyE,aAA/E,sBAAkG,IAAI/J,IAAEkE,EAAE,4CAA4C,CAACM,MAAMrE,EAAEmF,SAAShF,KAAKgF,WAA7K,gCAA0MhF,KAAKuG,cAAc1G,EAAE,GAAGT,GAAlO,cAAkMM,EAAlM,gBAAkPM,KAAKgI,aAAa,kBAAI,EAAK0B,cAAchK,KAAIN,GAA/R,gCAAkSM,EAAE8G,uBAApS,qCAAsU,OAAIC,IAA1U,6DAA2V,IAAIC,IAAE,GAAG7G,EAAEG,MAAMwG,uBAA5W,0D,8IAAmY,2BAAAZ,EAAA,qBAAAA,EAAA,6DAAuC/F,EAAvC,+BAAyC,GAAGT,EAA5C,uBAA8CM,EAA9C,uBAA6DC,EAA0CP,EAAhDuK,MAA2BhE,EAAqBvG,EAAxCwK,mBAAqChE,EAAGxG,EAAnByK,gBAApF,SAAsH7J,KAAK8J,8BAA8BjK,EAAE,CAAC8J,MAAMhK,EAAEiK,mBAAmBjE,EAAEkE,gBAAgBjE,GAAGlG,GAA5M,uCAAgNqK,gCAAgC3K,IAAhP,gD,sIAAmP,gDAAAwG,EAAA,6DAAkC/F,EAAlC,+BAAoC,GAAGT,EAAvC,uBAAyCM,EAAzC,uBAAwDC,EAAqBP,EAA3BuK,MAAwBhE,EAAGvG,EAAnByK,gBAA1D,SAA4F7J,KAAK8J,8BAA8BjK,EAAE,CAAC8J,MAAMhK,EAAEkK,gBAAgBlE,GAAGjG,GAA7J,uCAAiKsK,2BAA2B5K,IAA5L,gD,qIAA+L,2BAAAwG,EAAA,qBAAAA,EAAA,6DAAiC/F,EAAjC,+BAAmC,GAAGT,EAAtC,uBAAwCM,EAAxC,uBAAuDC,EAA0CP,EAAhDuK,MAA2BhE,EAAqBvG,EAAxCwK,mBAAqChE,EAAGxG,EAAnByK,gBAA9E,SAAgH7J,KAAK8J,8BAA8BjK,EAAE,CAAC8J,MAAMhK,EAAEiK,mBAAmBjE,EAAEkE,gBAAgBjE,GAAGlG,GAAtM,uCAA0MuK,0BAA0B7K,IAApO,gD,mIAAuO,2BAAAwG,EAAA,qBAAAA,EAAA,6DAA+B/F,EAA/B,+BAAiC,GAAGT,EAApC,uBAAsCM,EAAtC,uBAAqDC,EAA0CP,EAAhDuK,MAA2BhE,EAAqBvG,EAAxCwK,mBAAqChE,EAAGxG,EAAnByK,gBAA5E,SAA8G7J,KAAK8J,8BAA8BjK,EAAE,CAAC8J,MAAMhK,EAAEiK,mBAAmBjE,EAAEkE,gBAAgBjE,GAAGlG,GAApM,uCAAwMwK,wBAAwB9K,IAAhO,gD,oHAAmO,WAAgBS,EAAET,GAAlB,SAAAwG,EAAA,+EAA4BnG,YAAEO,KAAKyF,YAAYzF,KAAKyF,WAAW0E,SAAStK,EAAET,GAAGS,EAAEuK,MAA/E,gD,yHAAkF,WAAkBvK,EAAET,GAApB,SAAAwG,EAAA,+EAA8BnG,YAAEO,KAAKyF,YAAYzF,KAAKyF,WAAW4E,WAAWxK,EAAET,GAAGS,EAAEuK,MAAnF,gD,8EAAsF,SAAQvK,GAAG,OAAOc,YAAEX,KAAKsG,aAAatG,KAAKsG,UAAUtG,KAAK0E,aAAa4F,WAAW,IAAI5D,IAAE1G,KAAKsG,UAAUzG,EAAEG,Q,kEAAM,WAAoBH,EAAET,EAAEM,GAAxB,MAAAkG,EAAA,gBAAAA,EAAA,6DAA2B/F,EAAEF,YAAEE,GAA/B,SAA0CG,KAAKuK,WAAW,kBAAIC,YAAE3K,EAAE,EAAK4E,qBAAqB,EAAKD,oBAAmB9E,GAApH,cAAkCG,EAAlC,gBAA+HG,KAAKgI,aAAa,kBAAI,EAAKS,mBAAmB5I,KAAIH,GAAjL,cAAuHG,EAAvH,OAAoLA,EAAC,2BAAKA,GAAKT,GAA/L,UAAgNY,KAAKgI,aAAa,kBAAI,EAAKyC,yBAAyB5K,EAAEH,KAAIA,GAA1Q,eAAwMiG,EAAxM,iBAAqR3F,KAAKgI,aAAa,kBAAI,EAAK0C,sBAAsB7K,EAAE8F,EAAEjG,KAAIA,GAA9U,eAA6QkG,EAA7Q,iBAA8V5F,KAAKgI,aAAa,kBAAI,EAAK2C,0BAA0B/E,KAAIlG,GAAvZ,yBAAgaM,KAAKgI,aAAa,kBAAI,EAAKoB,uBAAuBxD,KAAIlG,GAAtd,yBAA+dM,KAAKgI,aAAa,kBAAI,EAAKqB,kBAAkBzD,KAAIlG,GAAhhB,yBAAyhBM,KAAKgI,aAAa,kBAAI,EAAKsB,wBAAwB1D,KAAIlG,GAAhlB,iCAAmlBkG,GAAnlB,iD,wIAAqlB,WAA+B/F,EAAET,GAAjC,UAAAwG,EAAA,4CAAAA,EAAA,0DAAuCjF,YAAEd,EAAE+K,aAA3C,yCAA+D,MAA/D,UAAgFlL,EAAqCG,EAA3CgH,MAAuBlH,EAAoBE,EAAnC8G,eAAgChB,EAAG9F,EAAlB+G,eAAoBhB,EAAE5F,KAAK0E,aAAamG,wBAAwBpL,EAAEI,EAAE+K,YAAYE,SAAShH,EAAEnD,YAAEiF,IAAI8C,YAAE9C,EAAEnG,EAAE+E,kBAAkB/E,EAAEkI,YAAElI,EAAEmG,GAAlO,yCAAkP,MAAlP,UAA6PT,EAAExF,GAAGgG,EAAE5F,EAAEgL,YAAErL,KAAKgJ,YAAE1I,KAAKwE,iBAAiB9E,IAAIyF,EAAnC,uCAAqC,WAAMtF,GAAN,SAAA+F,EAAA,+EAAS,EAAKoF,SAASnL,EAAEH,IAAzB,2CAArC,sDAAiE,SAAAG,GAAC,OAAEA,GAAEiJ,EAAE9I,KAAK6F,eAAeoB,EAAEjH,KAAKiJ,gBAAgBjJ,KAAKkJ,gBAAgBpF,IAAO,aAAajE,EAAE+K,YAAYK,oBAAhb,oBAAychE,EAAEnG,OAA3c,yCAAyd,MAAzd,OAAoepB,EAAE,IAAIqI,IAA1e,cAA6fd,GAA7f,IAA8e,2BAAUpH,EAAV,QAAiBH,EAAEuI,IAAIa,EAAEZ,YAAYrI,IAAnhB,+CAAqiBG,KAAKgI,aAAa,kBAAI,EAAKtD,aAAa4F,YAAWlL,GAAxlB,eAA6hBO,EAA7hB,iBAAmmBK,KAAKgI,YAAL,sBAAkB,mBAAApC,EAAA,WAAAA,EAAA,sEAAwBsF,YAAE,yBAAyBpH,EAAE,EAAKM,aAAa,EAAKE,KAAK,EAAKD,MAAtF,cAAgBsB,EAAhB,OAA4FC,EAAE,SAAA/F,GAAC,OAAGH,EAAEsB,IAAI8H,EAAEZ,YAAYrI,KAAK8F,EAAEmD,EAAEqC,YAAYtL,KAA3I,SAAuJ,EAAKuL,kBAAkBzL,EAAEiG,EAAExG,GAAlL,cAA+IuB,EAA/I,yBAA4L,IAAI+F,IAAE/F,EAAEd,EAAE,IAAtM,2CAA8MT,GAAn0B,eAA2lBuG,EAA3lB,yBAA60B5F,EAAE4F,IAA/0B,WAAs1BsB,EAAEnG,OAAx1B,0CAAs2B,IAAI4F,IAAE,GAAG7G,EAAEG,OAAj3B,YAA03BA,KAAKqL,sBAAsBvH,EAAEjE,GAAv5B,0CAAi6BE,EAAE,IAAI2G,IAAEO,EAAEpH,EAAEG,QAA76B,yBAAk8BkL,YAAE,yBAAyBpH,EAAE9D,KAAKoE,aAAapE,KAAKsE,KAAKtE,KAAKqE,MAAhgC,eAA07B8C,EAA17B,iBAA8gCnH,KAAKoL,kBAAkBnE,GAAG,SAAApH,GAAC,OAAEsH,EAAE2B,EAAEqC,YAAYtL,MAAKT,GAAhkC,eAAsgCkI,EAAtgC,yBAA0kCvH,EAAE,IAAI2G,IAAEY,EAAEzH,EAAEG,QAAtlC,iD,mIAA6lC,WAA4BN,EAAEC,EAAEgG,GAAhC,MAAAC,EAAA,8DAAAA,EAAA,0DAAsCnG,YAAEE,IAAI,IAAIA,EAAE0H,MAAMvG,OAAxD,yCAAsEnB,GAAtE,UAAwED,EAAED,YAAEE,GAAGA,EAAEuE,MAAMxE,EAAiBkG,GAAxG,EAAkKlG,GAAnEoL,SAAiBhH,EAAhH,EAA0G+C,MAAmB1B,EAA7H,EAAkHmG,WAA4BvL,EAA9I,EAA+H4G,eAAgCmC,EAA/J,EAAgJlC,eAAoBK,EAAEjH,KAAK0E,aAAamG,wBAAwB1D,GAAGvB,GAAGjF,YAAEsG,IAAIyB,YAAEzB,EAAErB,EAAEpB,kBAAkBoB,EAAE+B,YAAE/B,EAAEqB,GAAGK,EAAEvH,GAAG+I,EAAElJ,EAAEmL,YAAEjH,KAAK4E,YAAE1I,KAAKwE,iBAAiBV,GAAG+E,EAAE7I,KAAKkF,qBAAqBvE,YAAEhB,GAAGC,GAAG0H,EAAEiE,KAAKC,UAAU,CAACC,uBAAuB7F,EAAEqF,oBAAoB9F,EAAEuG,oBAAoB5H,IAAIyH,KAAKC,UAAU,CAACC,uBAAuB7F,EAAEqF,oBAAoB9F,IAAI,KAAKoE,EAAEV,EAAE7I,KAAKkF,oBAAoB7D,IAAIwH,GAAG,MAAQpJ,YAAE8J,GAAzhB,yCAAmiB,IAAI7C,IAAE6C,EAAE7J,EAAEM,OAA7iB,UAAyjB4I,EAAzjB,+BAAAhD,EAAA,MAA2jB,WAAM/F,GAAN,SAAA+F,EAAA,8DAAUhG,GAAG0H,GAAb,qCAAsB,EAAK0D,SAASnL,EAAEiE,GAAtC,cAAyC+E,GAAG,EAAK3D,oBAAoByG,IAAI9C,EAAEhJ,EAAEwH,MAAMxH,EAAEwH,MAAMvG,OAAO,GAAlG,kBAAqGjB,GAArG,2CAA3jB,sDAAuqBsH,EAAvqB,yCAAgrByB,EAAEnJ,YAAEE,GAAGA,EAAEK,KAAK4L,QAAQlM,KAAtsB,UAAgtBmM,EAAE7L,KAAK6F,eAAmBiG,EAAE9L,KAAKiJ,gBAAgBjJ,KAAKkJ,gBAAgBtD,IAAO,2BAA2BT,EAAxzB,oBAA+zB2G,EAAEhL,OAAj0B,0CAA+0B8H,EAAEnJ,YAAEE,GAAGA,EAAEK,KAAK4L,QAAQlM,KAAr2B,QAA+2BG,EAAE,IAAIkI,IAAr3B,cAAw4B+D,GAAx4B,IAAy3B,2BAAUpM,EAAV,QAAiBG,EAAEoI,IAAI4D,EAAE3D,YAAYxI,IAA95B,kCAA06BD,YAAEE,GAA56B,sBAA+6BA,EAAE0H,MAAj7B,yCAA67BrH,KAAKgI,aAAa,kBAAI,EAAKtD,aAAa4F,YAAW3E,GAAh/B,mCAAw6BvG,EAAx6B,eAA2/BY,KAAKgI,YAAL,sBAAkB,mBAAApC,EAAA,WAAAA,EAAA,sEAAwBsF,YAAE/F,EAAEgC,EAAE,EAAK/C,aAAa,EAAKE,KAAK,EAAKD,MAA/D,cAAgB1E,EAAhB,OAAqEiG,EAAE,SAAAxG,GAAC,OAAGS,EAAEmB,IAAI6K,EAAE3D,YAAY9I,KAAKO,EAAEkM,EAAEV,YAAY/L,KAApH,SAAgI,EAAKgM,kBAAkBhM,EAAEwG,EAAED,GAA3J,cAAwHhF,EAAxH,yBAAqK,IAAI+F,IAAE/F,EAAEjB,EAAE,IAA/K,2CAAuLiG,GAApsC,eAAm/BC,EAAn/B,yBAA8sCgD,EAAEhD,IAAhtC,WAAstCnG,YAAEE,KAAUD,EAAE,IAAIG,IAAEiM,EAAEA,EAAE/K,QAAQ,SAAAlB,GAAC,OAAET,YAAEO,EAAE0H,MAAMxH,EAAEF,EAAE0H,MAAMvG,OAAOpB,IAAI,MAAQoM,EAAEhL,OAAlyC,wBAAgzCjB,EAAE,IAAI6G,IAAE,GAAGhH,EAAEM,MAA7zC,mBAA00C6I,GAAG7I,KAAKkF,oBAAoByG,IAAI9C,EAAEhJ,EAAEwH,MAAM,GAAGxH,IAAv3C,YAA43CG,KAAKqL,sBAAsBlE,EAAEzH,GAAz5C,0CAAm6CkJ,EAAE,IAAIlC,IAAEoF,EAAEpM,EAAEM,QAA/6C,yBAAo8CkL,YAAE/F,EAAEgC,EAAEnH,KAAKoE,aAAapE,KAAKsE,KAAKtE,KAAKqE,MAA3+C,eAA47C0E,EAA57C,iBAAy/C/I,KAAKoL,kBAAkBU,GAAG,SAAAjM,GAAC,OAAEkJ,EAAE8C,EAAEV,YAAYtL,MAAK8F,GAA3iD,eAAi/CoG,EAAj/C,yBAAqjDnD,EAAE,IAAIlC,IAAEqF,EAAErM,EAAEM,QAAjkD,iD,kGAAwkD,SAA0BH,GAAG,GAAG,IAAIA,EAAEwH,MAAMvG,QAASjB,EAAEqE,MAAM8H,cAAenM,EAAEqE,MAAM8H,aAAalL,SAAQH,YAAEX,KAAK2E,kBAAnF,CAA4G,IAA7G,EAAmHvF,EAAE,IAAI2I,IAAzH,cAA4IlI,EAAEqE,MAAM8H,cAApJ,IAA6H,2BAAoC,KAA1BrM,EAA0B,QAACK,KAAK2E,iBAAiBsH,oBAAoBtM,GAAGe,SAAS,SAAAb,GAAC,OAAET,EAAE6I,IAAIpI,OAAjO,8BAAsO,IAAMH,EAAEM,KAAK6F,eAAeqC,YAAYrI,EAAEwH,MAAMxH,EAAEwH,MAAMtG,QAAQ,SAAAlB,GAAC,OAAET,EAAE4B,IAAItB,EAAEG,U,oCAAM,SAAuBA,GAAG,GAAG,IAAIA,EAAEwH,MAAMvG,QAASjB,EAAEqE,MAAMgI,WAAYrM,EAAEqE,MAAMgI,UAAUpL,OAA9D,CAA4E,IAAM1B,EAAE,IAAI2I,IAAIlI,EAAEqE,MAAMgI,WAAWxM,EAAEM,KAAK6F,eAAeqC,YAAYrI,EAAEwH,MAAMxH,EAAEwH,MAAMtG,QAAQ,SAAAlB,GAAC,OAAET,EAAE4B,IAAItB,EAAEG,U,+BAAM,SAAkBA,GAAG,GAAG,IAAIA,EAAEwH,MAAMvG,OAAf,CAA6B,IAAM1B,EAAE+M,YAAEnM,KAAKgF,SAASnF,EAAEqE,MAAMkI,WAAWpM,KAAK6F,gBAAgBlF,YAAEvB,KAAKS,EAAEwH,MAAMxH,EAAEwH,MAAMtG,OAAO3B,O,qCAAI,SAAwBS,GAAE,WAAC,GAAG,IAAIA,EAAEwH,MAAMvG,OAAf,CAA6B,IAAM1B,EAAEiN,YAAExM,EAAEqE,MAAMoI,MAAMtM,KAAKoF,aAAa,GAAGhG,EAAE,CAAC,IAAIA,EAAEmN,eAAe,MAAM,IAAIC,UAAU,oCAAoC3M,EAAEwH,MAAMxH,EAAEwH,MAAMtG,QAAQ,SAAAlB,GAAC,OAAET,EAAEqN,YAAY5M,EAAE,EAAKgG,uB,sEAAmB,WAAwBhG,EAAET,EAAEM,GAA5B,QAAAkG,EAAA,gBAAAA,EAAA,yDAAmCxG,EAAnC,yCAA4CS,GAA5C,WAAiDc,YAAEX,KAAKyF,YAAxD,yCAA2E5F,EAAEkB,QAAQ,SAAAlB,GAAC,OAAET,EAAES,OAA1F,cAAmGF,EAAE,EAAQgG,EAAE,IAAInF,MAAMoF,EAAzH,+BAAAA,EAAA,MAA2H,WAAMjF,GAAN,eAAAiF,EAAA,2DAAejG,EAAEE,EAAEiB,QAAnB,mBAAkCrB,EAAEI,EAAEF,KAAKP,EAAEK,KAAKkG,EAAElE,KAAKhC,GAAGkB,EAAE+L,gBAA9D,KAA8E/L,EAAEgM,MAAhF,qCAA4F,EAAK3E,aAAa,SAAAnI,GAAC,OAAE+F,EAAE/F,KAAIH,GAAvH,iEAA3H,wEAA8PM,KAAKgI,aAAa,SAAAnI,GAAC,OAAE+F,EAAE/F,KAAIH,GAAGmI,MAAM,kBAAIlC,MAAtS,gD,sFAA0S,SAAc9F,GAAG,IAAD,EAAC,EAAsDG,KAAKgF,SAAxC5F,EAAnB,EAAMqK,aAA8B/J,EAApC,EAAqBkN,eAA+CjH,EAApE,EAAsCkH,cAAmCnN,EAAEkG,EAAE,IAAIxF,IAAIO,EAAEX,KAAK6F,eAAeiH,aAA5G,cAAwIjN,EAAEwH,OAA1I,IAAyH,2BAAuB,KAAb5H,EAAa,QAAOI,EAAEc,EAAElB,EAAEL,GAAGM,EAAEiB,EAAElB,EAAEkG,GAAGhG,EAAEiG,EAAEvE,IAAIxB,KAAKF,GAAGD,EAAEiB,EAAEhB,EAAEgG,KAAKC,EAAEpE,IAAI3B,EAAEJ,IAA5M,8BAA+MI,EAAEwH,MAAM7G,MAAMsH,KAAKlC,EAAE3E,Y,mCAAU,SAAsBpB,EAAET,GAAG,IAAiBM,EAAGN,EAAdkM,WAAgB,OAAOyB,YAAElN,KAAK,qCAAqCH,GAAG,sBAAsBM,KAAKoE,eAAe,6BAA6B1E,GAAG,2BAA2BA,GAAG,yBAAyBA,M,6DAAI,WAAeG,EAAET,GAAjB,wBAAAwG,EAAA,yDAAwBxG,IAAGsJ,YAAE1I,KAAKwE,iBAAiBpF,GAAnD,yCAA6DS,GAA7D,cAAqEH,EAAEM,KAAK6F,eAA5E,SAAmGmH,YAAEnN,EAAEwH,MAAM4F,KAAK,SAAApN,GAAC,OAAEqN,YAAE,EAAK9I,aAAa,EAAKE,KAAK,EAAKD,KAAK3E,EAAEyL,YAAYtL,OAAMG,KAAKwE,iBAAiBpF,GAAvM,cAA2FO,EAA3F,0BAAiNE,EAAEwH,MAAM1H,EAAEsN,KAAK,SAAC7N,EAAEO,GAAH,OAAOD,EAAEyN,kBAAkBtN,EAAEwH,MAAM1H,GAAGoM,YAAE3M,EAAE,EAAKkF,KAAK,EAAKD,UAASxE,IAAlS,gD,sFAAoS,SAAgBA,GAAG,GAAGkN,YAAElN,GAAG,CAAC,GAAGgM,YAAEhM,GAAG,MAAM,CAACD,YAAEC,EAAEkG,KAAKlG,EAAEmG,KAAKnG,EAAEoG,KAAKpG,EAAEqG,OAAO,GAAG4F,YAAEjM,GAAG,OAAOA,EAAEuN,MAAMH,KAAK,SAAApN,GAAC,OAAED,YAAEsB,KAAKC,IAAItB,EAAE,GAAG,GAAGA,EAAE,GAAG,IAAIqB,KAAKC,IAAItB,EAAE,GAAG,GAAGA,EAAE,GAAG,IAAIqB,KAAKE,IAAIvB,EAAE,GAAG,GAAGA,EAAE,GAAG,IAAIqB,KAAKE,IAAIvB,EAAE,GAAG,GAAGA,EAAE,GAAG,QAAO,MAAM,CAAC0J,YAAEV,cAAIhJ,M,6BAAI,SAAgBA,GAAE,oBAAgBA,GAAhB,IAAC,gCAAUH,EAAV,QAAiBM,KAAK0E,aAAa2I,gBAAgB3N,GAAG,SAAAG,GAAC,OAAEyN,EAAGrF,IAAIpI,OAAjE,8BAAsE,IAAMT,EAAEoB,MAAMsH,KAAKwF,EAAGrM,UAAU,OAAOqM,EAAG1M,QAAQxB,I,4EAAE,WAA8BS,EAAET,GAAhC,SAAAwG,EAAA,2DAAsC/F,EAAEuI,SAAS,GAAG,MAAMvI,EAAE0N,mBAAmB1N,EAAE2N,kBAAkB3N,EAAE4N,WAAW5N,EAAE6N,eAAe7N,EAAE8N,MAAM9N,EAAE+N,eAAe/N,EAAEgO,4BAA4BhO,EAAEiO,QAAQjO,EAAEkO,eAApM,sBAAwN,IAAIrO,IAAEkE,EAAE,4BAA4B,CAACM,MAAMrE,IAAnQ,iCAA8QG,KAAKgO,6BAA6BnO,GAAGoO,QAAQC,IAAI,CAAClO,KAAKmO,8BAA8B/O,GAAGgP,YAAEvO,EAAEG,KAAKoE,aAAapE,KAAKwE,kBAAkBmE,YAAE3I,KAAKwE,iBAAiB3E,EAAEgH,SAASgB,MAAM,kBAAIhI,OAAhc,gD,2IAAoc,WAAoCA,GAApC,mBAAA+F,EAAA,yDAA2CxG,EAAE,IAAMS,EAAEgK,gBAArD,gCAAiGwE,cAAjG,gBAAwF3O,EAAxF,EAA4E4O,YAAyBlP,EAAEM,EAAE6O,kBAAkB1O,EAAEgK,iBAA7H,UAAiJhK,EAAE8J,OAAOvK,EAAEqC,KAAK5B,EAAE8J,OAAO9J,EAAE+J,oBAAoBxK,EAAEqC,KAAK5B,EAAE+J,oBAAqBxK,EAAE0B,OAAhO,sBAA6O,IAAIpB,IAAEkE,EAAE,yDAAyD,CAAC4K,OAAO3O,IAAtT,OAA0T4O,YAAEzO,KAAKoF,YAAYhG,EAAE,kCAA/U,iD,8HAAiX,WAAyBS,GAAzB,SAAA+F,EAAA,2DAA+B/F,EAAEuI,SAAS,GAAG,MAAMvI,EAAE0N,mBAAmB1N,EAAE2N,kBAAkB3N,EAAE4N,WAAW5N,EAAE6N,eAAe7N,EAAE8N,MAA5H,sBAAuI,IAAIjO,IAAEkE,EAAE,4BAA4B,CAACM,MAAMrE,IAAlL,iCAA6LG,KAAKgO,6BAA6BnO,GAAGG,KAAK0O,6BAA6B7O,GAAGoO,QAAQC,IAAI,CAACE,YAAEvO,EAAEG,KAAKoE,aAAapE,KAAKwE,kBAAkBmE,YAAE3I,KAAKwE,iBAAiB3E,EAAEgH,SAASgB,MAAM,kBAAIhI,OAA9W,gD,iGAAkX,SAA6BA,GAAG,IAAgBT,EAA0DS,EAApE8O,UAA0BhP,EAA0CE,EAAxDkO,cAAqCpI,EAAmB9F,EAAxC+O,qBAAqChJ,EAAG/F,EAAjB+N,cAAmBjN,EAAEiF,EAAEA,EAAEqH,KAAK,SAAApN,GAAC,OAAEA,EAAEgP,uBAAuBhP,EAAEgP,sBAAsBC,iBAAgB/N,OAAOgO,SAAS,GAAG,GAAGpP,GAAGA,EAAEmB,OAAO,EAAE,CAAC,IAAMjB,EAAE,OAAOT,EAAE,QAAQM,EAAEC,EAAEsN,KAAK,SAAAvN,GAAI,IAAMC,EAAED,EAAEoP,cAAc,OAAOnP,EAAEqP,SAASnP,GAAGF,EAAEsP,MAAMpP,GAAG,GAAGF,EAAEqP,SAAS5P,GAAGO,EAAEsP,MAAM7P,GAAG,GAAGM,KAAKqB,QAAQ,SAAAlB,GAAC,OAAGc,EAAEqO,SAASnP,MAAK4O,YAAEzO,KAAKoF,YAAY1F,EAAE,yCAAyC,GAAGN,GAAGA,EAAE0B,OAAO,EAAE2N,YAAEzO,KAAKoF,YAAYhG,EAAE,0CAA0C,GAAGuG,EAAE,MAAM,IAAIjG,IAAEkE,EAAE,yDAAyD,CAACM,MAAMrE,IAAIqP,YAAElP,KAAKoF,YAAYvF,EAAEyM,S,0CAAO,SAA6BzM,GAAG,IAAoBT,EAAyCS,EAAvD+N,cAA2CjO,EAAYE,EAAvCgO,2BAAoClI,EAAG9F,EAAViO,OAAYlI,EAAEjG,GAAGA,EAAEmB,OAAOH,EAAEvB,GAAGA,EAAE0B,OAAO,GAAG6E,EAAE,CAAC,IAAIC,IAAIjF,EAAE,MAAM,IAAIjB,IAAEkE,EAAE,+EAA+E,CAACM,MAAMrE,IAAIsP,YAAEnP,KAAKoF,YAAYO,EAAEvG,GAAG,GAAGuB,EAAE,CAAC,IAAhpa,SAAWd,GAAG,OAAOA,EAAEuP,OAAO,SAAAvP,GAAC,MAAE,iBAAiBA,EAAEwP,iBAAgmaC,CAAElQ,GAAG,OAAO,IAAMuG,EAAEvG,EAAE6N,KAAK,SAAApN,GAAC,OAAEA,EAAE0P,oBAAmBxO,OAAOgO,SAASN,YAAEzO,KAAKoF,YAAYO,EAAE,6CAA6CC,GAAG6I,YAAEzO,KAAKoF,YAAYzF,EAAE,sDAAlK,oBAAuOP,GAAvO,IAAwN,2BAAiB,KAAPO,EAAO,QAAwBP,EAAmBO,EAApC4P,iBAAiC5J,EAAGhG,EAAjB0P,cAAmB,GAAI,oBAAoB1J,GAAG,oBAAoBA,KAAI,wBAAwBhG,IAA0I,GAAG,UAAUgG,GAAGvG,GAAGoQ,YAAEpQ,EAAEY,KAAKoF,aAAa,MAAM,IAAI1F,IAAEkE,EAAE,4CAA4C,CAAC6L,WAAW9P,EAAEuE,MAAMrE,SAA/N,IAAFF,EAAvB+P,oBAA+B,MAAM,IAAIhQ,IAAEkE,EAAE,uDAAuD,CAAC6L,WAAW9P,EAAEuE,MAAMrE,KAAle,kC,kFAAwmB,WAAoCA,EAAET,EAAEM,GAAxC,wBAAAkG,EAAA,6DAA2C/F,EAAEF,YAAEE,GAA/C,kBAA8DG,KAAKuK,WAAW,kBAAIC,YAAE3K,EAAE,EAAK4E,qBAAqB,EAAKD,oBAAmB9E,GAAxI,cAAsDG,EAAtD,gBAAmJG,KAAKgI,aAAa,kBAAI,EAAK2H,wBAAwB9P,EAAET,KAAIM,GAA5M,cAA2IG,EAA3I,iBAA6NG,KAAKgI,aAAa,kBAAI,EAAKyC,yBAAyB5K,EAAEH,KAAIA,GAAvR,eAAqNC,EAArN,iBAAkSK,KAAKgI,aAAa,kBAAI,EAAK0C,sBAAsB7K,EAAEF,EAAED,KAAIA,GAA3V,eAA0RiG,EAA1R,iBAA2W3F,KAAKgI,aAAa,kBAAI,EAAK2C,0BAA0BhF,KAAIjG,GAApa,yBAA6aM,KAAKgI,aAAa,kBAAI,EAAKoB,uBAAuBzD,KAAIjG,GAAne,yBAA4eM,KAAKgI,aAAa,kBAAI,EAAKqB,kBAAkB1D,KAAIjG,GAA7hB,yBAAsiBM,KAAKgI,aAAa,kBAAI,EAAKsB,wBAAwB3D,KAAIjG,GAA7lB,iCAAgmBiG,GAAhmB,qCAA8mB,OAAIc,IAAlnB,6DAAmoB,IAAIC,IAAE,GAAG7G,EAAEG,OAA9oB,0D,kEAA4pBuH,EAAGuB,cAAI5B,EAAG4B,cAAIwE,EAAG,IAAIvF,K,iCCAhvgB,SAAS3I,EAAEA,EAAEuB,GAAG,IAAIvB,EAAE,OAAO,KAAW,IAAAS,EAAEc,EAAEkF,eAA+B/B,EAAkB1E,EAAjCwN,eAA8B9D,EAAG1J,EAAhByN,aAAsBlH,EAAEiK,OAAOC,kBAAkBnQ,EAAEkQ,OAAOE,kBAAkB,GAAGhM,GAAGgF,EAAEnI,EAAED,SAAS,SAAAtB,GAAI,IAAMuB,EAAEd,EAAEiN,aAAa1N,EAAE0E,GAAGrE,EAAEI,EAAEiN,aAAa1N,EAAE0J,GAAG,MAAMnI,GAAGoP,MAAMpP,KAAKgF,EAAEzE,KAAKC,IAAIwE,EAAEhF,IAAI,MAAMlB,GAAGsQ,MAAMtQ,KAAKC,EAAEwB,KAAKE,IAAI1B,EAAED,WAAW,CAAC,IAAML,EAAE0E,GAAGgF,EAAEnI,EAAED,SAAS,SAAAC,GAAI,IAAMmD,EAAEjE,EAAEiN,aAAanM,EAAEvB,GAAG,MAAM0E,GAAGiM,MAAMjM,KAAK6B,EAAEzE,KAAKC,IAAIwE,EAAE7B,GAAGpE,EAAEwB,KAAKE,IAAI1B,EAAEoE,OAAO,MAAM,CAACkM,MAAMrK,EAAEsK,IAAIvQ,GAAG,SAASiB,EAAEvB,EAAEuB,EAAEgF,GAAG,IAAIhF,IAAIvB,EAAE,OAAO,KAAK,IAAqBM,EAAkBN,EAAjCwN,eAA8BnN,EAAGL,EAAhByN,aAAkB,IAAInN,IAAID,EAAE,OAAO,KAAK,IAAYE,EAASgB,EAAfqP,MAAYpK,EAAGjF,EAAPsP,IAAS,OAAO,OAAOtQ,GAAG,OAAOiG,EAAE,UAAK,IAASjG,QAAG,IAASiG,EAAqiB,kBAAI,GAAniBlG,GAAGD,EAA6B,SAAWL,EAAEuB,EAAEd,EAAEiE,EAAEgF,GAAG,OAAO,MAAMhF,GAAG,MAAMgF,EAAE,SAAAnD,GAAI,IAAMjG,EAAEN,EAAE0N,aAAanH,EAAEhF,GAAGlB,EAAEL,EAAE0N,aAAanH,EAAE9F,GAAG,OAAO,MAAMH,GAAGA,GAAGoJ,KAAK,MAAMrJ,GAAGA,GAAGqE,IAAI,MAAMA,EAAE,SAAAnD,GAAI,IAAMmI,EAAE1J,EAAE0N,aAAanM,EAAEd,GAAG,OAAO,MAAMiJ,GAAGA,GAAGhF,GAAG,MAAMgF,EAAE,SAAAjJ,GAAI,IAAMiE,EAAE1E,EAAE0N,aAAajN,EAAEc,GAAG,OAAO,MAAMmD,GAAGA,GAAGgF,QAAG,EAAnSjJ,CAAE8F,EAAEjG,EAAED,EAAEE,EAAEiG,GAAgS,SAAWxG,EAAEuB,EAAEd,EAAEiE,GAAG,OAAO,MAAMjE,GAAG,MAAMiE,GAAGjE,IAAIiE,EAAE,SAAAA,GAAC,OAAE1E,EAAE0N,aAAahJ,EAAEnD,KAAKd,GAAE,MAAMA,GAAG,MAAMiE,EAAE,SAAAgF,GAAI,IAAMnD,EAAEvG,EAAE0N,aAAahE,EAAEnI,GAAG,OAAOgF,GAAG9F,GAAG8F,GAAG7B,GAAG,MAAMjE,EAAE,SAAAiE,GAAC,OAAE1E,EAAE0N,aAAahJ,EAAEnD,IAAId,GAAE,MAAMiE,EAAE,SAAAjE,GAAC,OAAET,EAAE0N,aAAajN,EAAEc,IAAImD,QAAE,EAAnfA,CAAE6B,EAAEjG,GAAGD,EAAEE,EAAEiG,GAJ/oB,qE,+NCIA,SAASjF,EAAEA,EAAEvB,GAAG,OAAOuB,EAAEvB,EAAE,EAAE,EAAEA,EAAE,EAAE,EAA0N,SAASK,EAAEL,EAAEuG,EAAElG,EAAE0F,EAAErB,GAAG,IAAI1E,EAAE,OAAM,EAAS,IAAtB,EAAsBkI,EAAE3G,EAAEgF,EAAElG,GAAWE,EAAaP,EAApB8Q,OAAiBxQ,EAAGN,EAAX+Q,QAAiBrH,GAAE,EAAGlJ,EAAE,EAAjE,cAAkFF,GAAlF,IAAmE,gCAAUiB,EAAV,QAAiBmI,EAAEjJ,EAAEiJ,EAAEnJ,EAAE2H,EAAE1H,EAAEe,EAAEwE,EAAErB,GAAGlE,GAAGe,EAAE2G,GAA5G,8BAA8G,OAAOwB,EAAE,SAASjJ,EAAEc,EAAEvB,EAAEuG,EAAElG,EAAEI,EAAEsF,EAAErB,GAAe,IAAZ,IAAIwD,EAAE3G,EAAEhB,EAAEF,EAAUC,EAAED,EAAEqJ,EAAErJ,EAAEI,EAAE8F,EAAEjG,EAAEoJ,EAAEpJ,GAAGiG,EAAE,EAAChG,EAAED,EAAEiG,KAAMmD,IAAInJ,EAAEF,GAAG,IAAMkB,EAAEvB,EAAEM,GAAGG,EAAET,EAAEM,EAAE,GAAGE,EAAER,EAAEO,GAAG4J,EAAEnK,EAAEO,EAAE,IAAIE,EAAEiE,GAAGyF,GAAGzF,GAAGyF,EAAEzF,GAAGjE,GAAGiE,IAAInD,GAAGmD,EAAEjE,IAAI0J,EAAE1J,IAAID,EAAEe,GAAGwE,IAAImC,GAAGA,GAAG,OAAOA,E,wCCAwHnC,EAAE,kCAAkC4F,EAAE,CAACqF,yBAAyB,aAAaC,uBAAuB,WAAWC,sBAAsB,UAAUC,uBAAuB,WAAWC,iCAAiC,aAAaC,8BAA8B,KAAKC,uBAAuB,WAAWC,sBAAsB,UAAUC,qBAAqB,SAASC,uBAAuB,MAAM9H,EAAuB,CAACqH,0BAAyB,EAAGC,wBAAuB,EAAGO,sBAAqB,EAAGN,uBAAsB,EAAGC,wBAAuB,EAAGI,uBAAsB,EAAGD,wBAAuB,EAAGF,kCAAiC,EAAGC,+BAA8B,EAAGI,wBAAuB,GAAxS9H,EAA0T,CAAC+H,mBAAkB,EAAGC,wBAAuB,EAAGC,sBAAqB,EAAGC,qBAAoB,EAAGC,sBAAqB,GAA9anI,EAAgc,CAAC+H,mBAAkB,EAAGC,wBAAuB,EAAGC,sBAAqB,EAAGC,qBAAoB,EAAGC,sBAAqB,GAAK,SAAS9C,EAAEvO,GAAG,OAAM,IAAKkJ,EAAsBlJ,GAAG,SAAS0J,EAAE1J,GAAG,OAAM,IAAKkJ,EAAgBpI,YAAEd,IAAI,SAAS4O,EAAE5O,GAAG,OAAM,IAAKkJ,EAAgBlJ,GAAyE,SAASyI,EAAEzI,EAAEc,EAAEmI,EAAED,EAAE1D,GAAG,GAAGxF,YAAEgB,IAAI,sBAAsBmI,IAAI,6BAA6BjJ,GAAG,2BAA2BA,GAAG,CAAC,IAAMA,EAAEoH,YAAE,IAAInD,IAAEnD,GAAE,GAAG,GAAI,OAAOsN,QAAQkD,SAAS,SAAAxL,GAAC,ODA38D,SAAWhF,EAAEvB,EAAEuG,EAAE9F,GAAG,OAAOJ,EAAEkB,EAAEvB,EAAEuG,EAAE9F,EAAEqQ,OAAO,GAAGrQ,EAAEqQ,OAAO,ICAq5DtK,CAAE/F,GAAE,GAAG,EAAG8F,MAAK,GAAGhG,YAAEgB,IAAI,2BAA2BmI,EAAE,CAAC,IAAMnD,EAAEsB,YAAE,IAAInD,IAAEnD,GAAE,GAAG,GAAI,GAAG,2BAA2Bd,EAAE,OAAOoO,QAAQkD,SAAS,SAAAtR,GAAC,ODAzhE,SAAWT,EAAEuG,EAAE9F,EAAEsF,EAAErB,EAAEwD,GAAS,IAAA3H,EAAEgB,EAAEmD,EAAEwD,GAAW5H,EAAayF,EAApB+K,OAAiBpH,EAAG3D,EAAXgL,QAAa,IAAIrH,EAAE,OAAM,EAAG,IAAI,IAAInI,EAAE,EAAEf,EAAE,EAAEe,EAAEmI,EAAEhI,OAAOH,IAAIf,GAAGD,EAAE,IAAIF,EAAEL,EAAEuG,EAAE9F,EAAEH,EAAEE,GAAGF,EAAEE,EAAE,IAAI,OAAM,EAAG,OAAM,ECAk4DuH,CAAExB,GAAE,GAAG,EAAG9F,EAAEgJ,EAAE1D,MAAK,GAAG1F,YAAEkB,IAAI,sBAAsBmI,IAAI,6BAA6BjJ,GAAG,2BAA2BA,GAAG,OAAOoO,QAAQkD,SAAS,SAAAtR,GAAC,OAAE8F,YAAEhF,EAAE2G,YAAEwB,EAAED,EAAE1D,EAAEtF,OAAM,GAAGJ,YAAEkB,IAAI,2BAA2BmI,GAAG,2BAA2BjJ,EAAE,OAAOoO,QAAQkD,SAAS,SAAAtR,GAAC,OAAET,YAAEuB,EAAE2G,YAAEwB,EAAED,EAAE1D,EAAEtF,OAAM,GAAGJ,YAAEkB,IAAI,6BAA6Bd,EAAE,CAAC,IAAMA,ECA9mE,SAAWc,GAAG,MAAM,SAASA,EAAEd,IAAET,YAAEuB,GDA6kEjB,CAAEoJ,GAAG,OAAOmF,QAAQkD,SAAS,SAAAxL,GAAC,OAAE9F,EAAEc,EAAE2G,YAAEwB,EAAED,EAAE1D,EAAEQ,OAAM,OAA7tB,qDAAwuBkC,MAAM,SAAAlC,GAAI,IAAMvG,EAAEuG,EAAEoF,EAAElL,IAAIuR,KAAK,KAAKzQ,EAAE6D,iBAAiB7D,GAAG,OAAO,SAAAd,GAAC,OAAET,EAAEkI,YAAEwB,EAAED,EAAE1D,EAAEtF,Q,SAAsBsM,E,kFAAf,WAAiBxG,EAAEvG,EAAEM,GAArB,iBAAAkG,EAAA,yDAAyCjG,EAAcgG,EAAzB2F,aAAsB7L,EAAGkG,EAAZmF,UAA3C,oBAAmEsD,EAAEzO,GAArE,sBAA8E,IAAIE,IAAEsF,EAAE,yCAAyC,CAACjB,MAAMyB,IAAtI,WAA6ImD,YAAErJ,EAAE+E,oBAAmBsE,YAAEpJ,GAAtK,oBAA8K6J,EAAE9J,GAAhL,sBAAyL,IAAII,IAAEsF,EAAE,kCAAkC,CAACjB,MAAMyB,IAA1O,UAAkP8I,EAAErP,GAApP,sBAA6P,IAAIS,IAAEsF,EAAE,kCAAkC,CAACjB,MAAMyB,IAA9S,WAAqTA,EAAEkB,MAAvT,0CAAoUgC,YAAElD,EAAEmF,UAAUnF,EAAEmF,SAAStG,iBAAiBmB,EAAEkB,QAAhX,6C,sBAAyX,SAASwF,EAAExM,GAAG,GAAGJ,YAAEI,GAAG,OAAM,EAAG,GAAGF,YAAEE,GAAG,qBAAgBA,EAAEuN,OAAlB,IAAC,2BAAuB,KAAbzH,EAAa,QAAC,GAAG,IAAIA,EAAE7E,OAAO,OAAM,EAAG,GAAG6E,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,IAAIA,EAAE,GAAG,KAAKA,EAAE,GAAG,GAAG,OAAM,GAA5K,8BAA+K,OAAM,EAAG,OAAM,I,qMEA19FjG,EAAE,CAACwI,YAAY,SAAA9I,GAAC,OAAEA,EAAEiS,UAASC,cAAc,SAAAlS,GAAC,OAAEA,EAAEmS,YAAWzE,aAAa,SAAC1N,EAAES,GAAH,OAAOT,EAAEmS,WAAW1R,IAAGsN,kBAAkB,SAAC/N,EAAES,GAAH,OAAO,IAAI8F,IAAE9F,EAAET,EAAEmS,WAAW,KAAKnS,EAAEiS,WAAUlG,YAAY,SAAA/L,GAAC,OAAEA,EAAE0L,UAAS0G,YAAY,SAAC7L,EAAEjG,GAAH,OAAQN,YAAEuG,EAAE5D,YAAY4D,EAAE5D,SAASlC,YAAE,IAAIJ,IAAEkG,EAAEmF,SAASpL,EAAE4E,KAAK5E,EAAE2E,OAAOsB,EAAE5D,WCAuD+B,E,WAAE,WAAYjE,GAAE,oBAACG,KAAKyR,aAAa5R,EAAEG,KAAK0R,aAAa,IAAI/Q,IAAEX,KAAK2R,cAAc,IAAIvR,IAAIJ,KAAK4R,WAAW,IAAI7J,IAAI/H,KAAK6E,OAAO,IAAIzF,IAAEY,KAAK6F,eAAe9F,E,8CAAE,WAAmB,OAAOC,KAAKyR,aAAarN,e,gBAAa,WAAW,OAAOpE,KAAKyR,aAAapN,O,gBAAK,WAAW,OAAOrE,KAAKyR,aAAanN,O,uBAAK,WAAkB,OAAOtE,KAAK2R,cAAclR,O,sBAAK,WAAiB,OAAOT,KAAK0R,aAAa5L,a,2BAAW,WAAsB,IAAIjG,EAAE,EAAE,OAAOG,KAAK2R,cAAcjR,SAAS,SAAAtB,GAAIO,YAAEP,EAAE0L,WAAW1L,EAAE0L,SAASoF,SAASrQ,GAAGT,EAAE0L,SAASoF,OAAOpP,WAAW,CAAC+Q,aAAa7R,KAAK2R,cAAclR,KAAKqR,YAAYjS,GAAGG,KAAKsE,KAAKtE,KAAKqE,KAAK,EAAE,EAAErE,KAAKqE,KAAK,EAAE,M,iBAAI,SAAIxE,GAAGG,KAAK+R,KAAKlS,GAAGG,KAAKgS,iB,qBAAe,SAAQnS,GAAE,oBAAgBA,GAAhB,IAAC,gCAAUT,EAAV,QAAiBY,KAAK+R,KAAK3S,IAA5B,8BAA+BY,KAAKgS,iB,mBAAe,WAAQhS,KAAK2R,cAAc/Q,QAAQZ,KAAK0R,aAAa9Q,QAAQZ,KAAKgS,iB,wBAAe,SAAWnS,GAAG,IAAMT,EAAEY,KAAK2R,cAActQ,IAAIxB,GAAG,OAAOT,GAAGY,KAAKiS,QAAQ7S,GAAGY,KAAKgS,eAAe5S,GAAG,O,4BAAK,SAAeS,GAAGG,KAAK0R,aAAaQ,kBAAnB,oBAAoDrS,GAApD,IAAqC,2BAAiB,KAAPT,EAAO,QAAOS,EAAEG,KAAK2R,cAActQ,IAAIjC,GAAGS,GAAGG,KAAKiS,QAAQpS,IAAzG,8BAA4GG,KAAKgS,iB,2BAAe,SAAcnS,EAAET,EAAEuG,GAAE,oBAAgB9F,GAAhB,IAAC,2BAAiB,KAAPF,EAAO,QAAOE,EAAEG,KAAK0R,aAAarQ,IAAI1B,EAAE0R,UAAUxR,GAAGT,EAAEM,YAAEiG,EAAE9F,KAAtE,iC,wBAA2E,SAAWA,GAAG,OAAOG,KAAK2R,cAActQ,IAAIxB,K,iBAAG,SAAIA,GAAG,OAAOG,KAAK2R,cAAc3Q,IAAInB,K,qBAAG,WAAU,OAAOW,MAAMsH,KAAK9H,KAAK2R,cAAc1Q,Y,qBAAU,SAAQpB,GAAGG,KAAK2R,cAAcjR,SAAS,SAAAtB,GAAC,OAAES,EAAET,Q,6BAAK,SAAgBS,EAAET,GAAE,WAACY,KAAK0R,aAAarE,gBAAgBxN,GAAG,SAAAA,GAAIT,EAAE,EAAKuS,cAActQ,IAAIxB,S,sCAAO,WAA2BG,KAAK0R,aAAaQ,kBAAkBlS,KAAK4R,WAAWhR,U,mBAAQ,WAAO,WAAKf,GAAE,EAAGG,KAAK2R,cAAcjR,SAAS,SAACtB,EAAEuG,GAAK,EAAKiM,WAAW5Q,IAAI2E,KAAK9F,GAAE,EAAG,EAAKoS,QAAQ7S,OAAOY,KAAK4R,WAAWhR,QAAQf,GAAGG,KAAKgS,iB,0BAAe,WAAehS,KAAK6E,OAAOsN,KAAK,eAAU,K,kBAAQ,SAAK/S,GAAG,GAAIA,EAAJ,CAAa,IAAMM,EAAEN,EAAEiS,SAAS,GAAG,MAAM3R,EAAT,CAA8J,IAAsCK,EAAhCY,EAAEX,KAAK2R,cAActQ,IAAI3B,GAAS,GAAGM,KAAK4R,WAAW3J,IAAIvI,GAAGiB,GAAGvB,EAAEgT,UAAUzR,EAAEyR,UAAUrS,EAAEC,KAAK0R,aAAarQ,IAAI3B,GAAGM,KAAK0R,aAAapQ,OAAO5B,IAAIC,YAAEK,KAAKqS,eAAerS,KAAKqS,aAAajT,GAAGK,YAAEL,EAAE0L,YAAY1L,EAAE0L,SAASoF,SAAS9Q,EAAE0L,SAASoF,OAAOpP,OAAO,OAAOd,KAAK0R,aAAalQ,IAAI9B,EAAE,WAAWM,KAAK2R,cAAcnQ,IAAI9B,EAAEN,GAAGW,EAAE6F,YAAEjG,YAAEI,GAAGA,EAAEH,cAAIR,EAAE0L,SAAS9K,KAAKyR,aAAanN,KAAKtE,KAAKyR,aAAapN,MAAM1E,YAAEI,IAAIC,KAAK0R,aAAalQ,IAAI9B,EAAEK,GAAGC,KAAK2R,cAAcnQ,IAAI9B,EAAEN,QAA7kBuG,IAAE2M,UAAU,0CAA0CC,MAAM,IAAI1S,IAAE,+BAA+B,wBAAwB,CAAC2S,QAAQpT,Q,qBAA8c,SAAQS,GAAG,OAAOF,YAAEK,KAAKyS,kBAAkBzS,KAAKyS,gBAAgB5S,GAAGG,KAAK4R,WAAWtQ,OAAOzB,EAAEwR,UAAUrR,KAAK0R,aAAapQ,OAAOzB,EAAEwR,UAAUrR,KAAK2R,cAAcrQ,OAAOzB,EAAEwR,UAAUxR,M,6JCAp0FE,E,WAAE,aAAkB,IAANX,EAAM,uDAAJ,EAAEM,EAAE,2DAACM,KAAK0S,YAAY5J,EAAE9I,KAAK2S,YAAYxN,EAAEnF,KAAK4S,QAAQ,SAAAxT,GAAC,OAAEA,GAAEY,KAAK6S,YAAY3R,KAAKE,IAAI,EAAEhC,GAAG,GAAGY,KAAK8S,YAAY5R,KAAKE,IAAI,EAAEF,KAAK6R,KAAK,GAAG/S,KAAK6S,cAAcnT,IAAI,mBAAmBA,EAAEM,KAAK4S,QAAQlT,EAAEM,KAAKgT,YAAYtT,IAAIM,KAAKY,Q,2CAAQ,WAAUZ,KAAKY,QAAQ2I,EAAE0J,QAAQ5M,EAAE4M,QAAQlP,EAAEkP,QAAQjP,EAAEiP,U,iBAAQ,SAAI7T,GAAGY,KAAKkT,KAAKlT,KAAKmT,KAAK/T,K,oBAAG,SAAOA,EAAEM,GAAG,IAAIiB,EAAEX,KAAKmT,KAAWtT,EAAEG,KAAK4S,QAAQ,GAAGzL,EAAE/H,EAAEuB,GAAG,IAAI4I,EAAE3I,QAAQD,GAAG,CAAC,IAAI,IAAIhB,EAAE,EAAEI,EAAEY,EAAEyS,SAAStS,OAAOnB,EAAEI,EAAEJ,IAAI,CAAC,IAAMI,EAAEY,EAAEyS,SAASzT,GAAGiG,EAAEjF,EAAE0S,KAAKxT,EAAEE,GAAGA,EAAEoH,EAAE/H,EAAEwG,KAAKjF,EAAE0S,KAAK3T,EAAEK,GAAGuH,EAAElI,EAAEwG,GAAG5F,KAAKkT,KAAKnT,EAAEL,GAAG6J,EAAE9H,KAAK1B,IAAIY,EAAE4I,EAAE+J,S,sBAAO,SAASlU,GAAG,IAAIM,EAAEM,KAAKmT,KAAWxS,EAAEX,KAAK4S,QAAQ,IAAIzL,EAAE/H,EAAEM,GAAG,OAAM,EAAG,IAAI6J,EAAE3I,QAAQlB,GAAG,CAAC,IAAI,IAAIG,EAAE,EAAEF,EAAED,EAAE0T,SAAStS,OAAOjB,EAAEF,EAAEE,IAAI,CAAC,IAAMF,EAAED,EAAE0T,SAASvT,GAAGE,EAAEL,EAAE2T,KAAK1S,EAAEhB,GAAGA,EAAE,GAAGwH,EAAE/H,EAAEW,GAAG,CAAC,GAAGL,EAAE2T,MAAM/L,EAAElI,EAAEW,GAAG,OAAM,EAAGwJ,EAAE9H,KAAK9B,IAAID,EAAE6J,EAAE+J,MAAM,OAAM,I,kBAAG,SAAKlU,GAAG,IAAIA,EAAE0B,OAAO,OAAOd,KAAK,GAAGZ,EAAE0B,OAAOd,KAAK8S,YAAY,CAAC,IAAI,IAAIpT,EAAE,EAAEiB,EAAEvB,EAAE0B,OAAOpB,EAAEiB,EAAEjB,IAAIM,KAAKuT,OAAOnU,EAAEM,IAAI,OAAOM,KAAK,IAAIN,EAAEM,KAAKwT,OAAOpU,EAAEqU,MAAM,EAAErU,EAAE0B,QAAQ,EAAE1B,EAAE0B,OAAO,EAAE,GAAG,GAAGd,KAAKmT,KAAKC,SAAStS,OAAO,GAAGd,KAAKmT,KAAKO,SAAShU,EAAEgU,OAAO1T,KAAK2T,WAAW3T,KAAKmT,KAAKzT,OAAO,CAAC,GAAGM,KAAKmT,KAAKO,OAAOhU,EAAEgU,OAAO,CAAC,IAAMtU,EAAEY,KAAKmT,KAAKnT,KAAKmT,KAAKzT,EAAEA,EAAEN,EAAEY,KAAK4T,QAAQlU,EAAEM,KAAKmT,KAAKO,OAAOhU,EAAEgU,OAAO,GAAE,QAAS1T,KAAKmT,KAAKzT,EAAE,OAAOM,O,oBAAK,SAAOZ,GAAG,OAAOA,GAAGY,KAAK4T,QAAQxU,EAAEY,KAAKmT,KAAKO,OAAO,GAAG1T,O,mBAAK,WAAQ,OAAOA,KAAKmT,KAAK,IAAIhE,EAAE,IAAInP,O,oBAAK,SAAON,GAAG,IAAIA,EAAE,OAAOM,KAAK,IAAIH,EAAEF,EAAEK,KAAKmT,KAAKpT,EAAE,KAAK6F,EAAE,EAAED,GAAE,EAASlG,EAAEO,KAAK4S,QAAQlT,GAAG,IAAIqE,EAAEnD,QAAQoD,EAAEpD,QAAQjB,GAAGoE,EAAEjD,OAAO,GAAG,OAAC,GAAGnB,IAAIA,EAAEgB,YAAEoD,EAAEuP,OAAOvT,EAAEgE,EAAEoP,KAAKpP,EAAEjD,OAAO,GAAG8E,EAAC,UAAC5B,EAAEsP,aAAH,QAAU,EAAE3N,GAAE,GAAIhG,EAAE0T,OAAwD,KAAjDxT,EAAET,YAAEO,EAAEyT,SAAS1T,EAAEC,EAAEyT,SAAStS,OAAOnB,EAAEkU,YAAmB,OAAOlU,EAAEyT,SAASU,OAAOjU,EAAE,GAAGkE,EAAEtC,KAAK9B,GAAGK,KAAK+T,UAAUhQ,GAAG/D,KAAK2F,GAAGhG,EAAE0T,OAAO/L,EAAE3H,EAAEF,GAAGM,GAAG6F,IAAIjG,EAAEI,EAAEqT,SAASxN,GAAGD,GAAE,GAAIhG,EAAE,MAAMoE,EAAEtC,KAAK9B,GAAGqE,EAAEvC,KAAKmE,GAAGA,EAAE,EAAE7F,EAAEJ,EAAEA,EAAEA,EAAEyT,SAAS,IAAI,OAAOpT,O,oBAAK,WAAS,OAAOA,KAAKmT,O,sBAAK,SAAS/T,GAAG,OAAOY,KAAKmT,KAAK/T,EAAEY,O,kBAAK,SAAKZ,EAAEM,GAAG,IAAIiB,EAAEvB,EAAE,IAAIiH,EAAEzF,QAAQD,GAAG,OAAC,IAAG,IAAKA,EAAE0S,KAAV,qBAA8B1S,EAAEyS,UAAhC,IAAe,4BAA0B1T,EAA1B,UAAf,oCAAmD2G,EAAE2N,UAAUrT,EAAEyS,UAAUzS,EAAC,UAAC0F,EAAEiN,aAAH,QAAU,Q,oBAAM,SAAOlU,EAAEM,EAAEiB,EAAEd,GAAG,IAAMF,EAAEgB,EAAEjB,EAAE,EAAMK,EAAEC,KAAK6S,YAAY,GAAGlT,GAAGI,EAAE,CAAC,IAAMF,EAAE,IAAIsP,EAAE/P,EAAEqU,MAAM/T,EAAEiB,EAAE,IAAI,OAAOiF,EAAE/F,EAAEG,KAAK4S,SAAS/S,EAAEA,IAAIA,EAAEqB,KAAK6R,KAAK7R,KAAK+S,IAAItU,GAAGuB,KAAK+S,IAAIlU,IAAIA,EAAEmB,KAAK6R,KAAKpT,EAAC,SAACI,EAAIF,EAAE,KAAK,IAAM8F,EAAE,IAAI8I,EAAE,IAAI9I,EAAE+N,OAAO7T,EAAE,IAAMJ,EAAEyB,KAAK6R,KAAKpT,EAAEI,GAAG+I,EAAErJ,EAAEyB,KAAK6R,KAAK7R,KAAKgT,KAAKnU,IAAI8L,EAAEzM,EAAEM,EAAEiB,EAAEmI,EAAE9I,KAAK0S,aAAa,IAAI,IAAI9M,EAAElG,EAAEkG,GAAGjF,EAAEiF,GAAGkD,EAAE,CAAC,IAAMpJ,EAAEwB,KAAKC,IAAIyE,EAAEkD,EAAE,EAAEnI,GAAGkL,EAAEzM,EAAEwG,EAAElG,EAAED,EAAEO,KAAK2S,aAAa,IAAI,IAAIhS,EAAEiF,EAAEjF,GAAGjB,EAAEiB,GAAGlB,EAAE,CAAC,IAAME,EAAEuB,KAAKC,IAAIR,EAAElB,EAAE,EAAEC,GAAGiG,EAAEyN,SAAS3R,KAAKzB,KAAKwT,OAAOpU,EAAEuB,EAAEhB,EAAEE,EAAE,KAAK,OAAO+F,EAAED,EAAE3F,KAAK4S,SAASjN,I,4BAAE,SAAevG,EAAEM,EAAEiB,EAAEd,GAAG,KAAKA,EAAE4B,KAAK/B,IAAG,IAAKA,EAAE2T,MAAMxT,EAAEiB,OAAO,IAAIH,GAAG,CAAmB,IAAlB,IAAIA,OAAC,EAACd,EAAE,IAAIF,EAAE,IAAYI,EAAE,EAAE6F,EAAElG,EAAE0T,SAAStS,OAAOf,EAAE6F,EAAE7F,IAAI,CAAC,IAAM6F,EAAElG,EAAE0T,SAASrT,GAAG4F,EAAEsB,EAAErB,GAAGnG,EAAEqE,EAAE1E,EAAEwG,GAAGD,EAAElG,EAAEE,GAAGA,EAAEF,EAAEI,EAAE8F,EAAE9F,EAAE8F,EAAE9F,EAAEc,EAAEiF,GAAGnG,IAAIE,GAAGgG,EAAE9F,IAAIA,EAAE8F,EAAEhF,EAAEiF,GAAGlG,EAAEiB,GAAGjB,EAAE0T,SAAS,GAAG,OAAO1T,I,qBAAE,SAAQN,EAAEM,EAAEiB,GAAG,IAAMd,EAAEG,KAAK4S,QAAQjT,EAAEgB,EAAEvB,EAAES,EAAET,GAAG2E,EAAEnD,QAAQ,IAAMb,EAAEC,KAAKmU,eAAexU,EAAEK,KAAKmT,KAAKzT,EAAEqE,GAAG,IAAIhE,EAAEqT,SAAS3R,KAAKrC,GAAGK,EAAEM,EAAEJ,GAAGD,GAAG,GAAGqE,EAAEoP,KAAKzT,GAAG0T,SAAStS,OAAOd,KAAK6S,aAAa7S,KAAKoU,OAAOrQ,EAAErE,GAAGA,IAAIM,KAAKqU,oBAAoB1U,EAAEoE,EAAErE,K,oBAAG,SAAON,EAAEM,GAAG,IAAMiB,EAAEvB,EAAE+T,KAAKzT,GAAGG,EAAEc,EAAEyS,SAAStS,OAAOnB,EAAEK,KAAK8S,YAAY9S,KAAKsU,iBAAiB3T,EAAEhB,EAAEE,GAAG,IAAME,EAAEC,KAAKuU,kBAAkB5T,EAAEhB,EAAEE,GAAG,GAAIE,EAAJ,CAAuG,IAAM4F,EAAEhF,EAAEyS,SAASU,OAAO/T,EAAEY,EAAEyS,SAAStS,OAAOf,GAAGN,EAAEkB,EAAE0S,KAAK,IAAIlE,EAAExJ,GAAG,IAAI8I,EAAE9I,GAAGlG,EAAEiU,OAAO/S,EAAE+S,OAAO9N,EAAEjF,EAAEX,KAAK4S,SAAShN,EAAEnG,EAAEO,KAAK4S,SAASlT,EAAEN,EAAE+T,KAAKzT,EAAE,GAAG0T,SAAS3R,KAAKhC,GAAGO,KAAK2T,WAAWhT,EAAElB,QAAxQ+U,QAAQP,IAAI,2E,wBAA+P,SAAW7U,EAAEM,GAAGM,KAAKmT,KAAK,IAAI1E,EAAE,CAACrP,EAAEM,IAAIM,KAAKmT,KAAKO,OAAOtU,EAAEsU,OAAO,EAAE9N,EAAE5F,KAAKmT,KAAKnT,KAAK4S,W,+BAAS,SAAkBxT,EAAEM,EAAEiB,GAAG,IAAId,EAAEF,EAAEI,EAAEF,EAAEF,EAAE,IAAI,IAAI,IAAIiG,EAAElG,EAAEkG,GAAGjF,EAAEjB,EAAEkG,IAAI,CAAC,IAAMlG,EAAEiG,EAAEvG,EAAE,EAAEwG,EAAE5F,KAAK4S,SAASnT,EAAEkG,EAAEvG,EAAEwG,EAAEjF,EAAEX,KAAK4S,SAAS9J,EAAEF,EAAElJ,EAAED,GAAG0F,EAAE8B,EAAEvH,GAAGuH,EAAExH,GAAGqJ,EAAEjJ,GAAGA,EAAEiJ,EAAE/I,EAAE6F,EAAEjG,EAAEwF,EAAExF,EAAEwF,EAAExF,GAAGmJ,IAAIjJ,GAAGsF,EAAExF,IAAIA,EAAEwF,EAAEpF,EAAE6F,GAAG,OAAO7F,I,8BAAE,SAAiBX,EAAEM,EAAEiB,GAAG,IAAMd,EAAET,EAAEiU,KAAKrT,KAAK0S,YAAY5J,EAAEnJ,EAAEP,EAAEiU,KAAKrT,KAAK2S,YAAYxN,EAAEnF,KAAKyU,eAAerV,EAAEM,EAAEiB,EAAEd,GAAGG,KAAKyU,eAAerV,EAAEM,EAAEiB,EAAEhB,IAAIP,EAAEgU,SAASsB,KAAK7U,K,4BAAG,SAAeT,EAAEM,EAAEiB,EAAEd,GAAGT,EAAEgU,SAASsB,KAAK7U,GAAoE,IAAjE,IAAMF,EAAEK,KAAK4S,QAAQ7S,EAAE4F,EAAEvG,EAAE,EAAEM,EAAEC,GAAGiG,EAAED,EAAEvG,EAAEuB,EAAEjB,EAAEiB,EAAEhB,GAAOmJ,EAAElJ,EAAEG,GAAGH,EAAEgG,GAAWD,EAAEjG,EAAEiG,EAAEhF,EAAEjB,EAAEiG,IAAI,CAAC,IAAMjG,EAAEN,EAAEgU,SAASzN,GAAGlG,EAAEM,EAAEX,EAAEiU,KAAK1T,EAAED,GAAGA,GAAGoJ,GAAGlJ,EAAEG,GAAG,IAAI,IAAI4F,EAAEhF,EAAEjB,EAAE,EAAEiG,GAAGjG,EAAEiG,IAAI,CAAC,IAAMjG,EAAEN,EAAEgU,SAASzN,GAAGlG,EAAEmG,EAAExG,EAAEiU,KAAK1T,EAAED,GAAGA,GAAGoJ,GAAGlJ,EAAEgG,GAAG,OAAOkD,I,iCAAE,SAAoB1J,EAAEM,EAAEiB,GAAG,IAAI,IAAId,EAAEc,EAAEd,GAAG,EAAEA,IAAIJ,EAAEC,EAAEyT,KAAKtT,GAAGT,K,uBAAG,SAAUM,GAAG,IAAI,IAAIiB,EAAEjB,EAAEoB,OAAO,EAAEH,GAAG,EAAEA,IAAI,CAAC,IAAMd,EAAEH,EAAEyT,KAAKxS,GAAG,GAAG,IAAId,EAAEuT,SAAStS,OAAO,GAAGH,EAAE,EAAE,CAAC,IAAMhB,EAAED,EAAEyT,KAAKxS,EAAE,GAAGZ,EAAEJ,EAAEyT,SAASrT,EAAE+T,OAAO1U,YAAEW,EAAEF,EAAEE,EAAEe,OAAOnB,EAAEkU,WAAW,QAAQ7T,KAAKY,aAAagF,EAAE/F,EAAEG,KAAK4S,Y,yBAAU,SAAYxT,GAAG,IAAMM,EAAE,CAAC,WAAW,OAAO,KAAKM,KAAK0S,YAAY,IAAIiC,SAAS,IAAI,IAAIjV,EAAEkV,KAAKxV,EAAE,KAAKY,KAAK2S,YAAY,IAAIgC,SAAS,IAAI,IAAIjV,EAAEkV,KAAKxV,EAAE,KAAKY,KAAK4S,QAAQ,IAAI+B,SAAS,IAAI,kBAAkBvV,EAAE,GAAG,YAAYA,EAAE,GAAG,YAAYA,EAAE,GAAG,YAAYA,EAAE,GAAG,U,KAAO,SAASwG,EAAExG,EAAEM,GAAGiG,EAAEvG,EAAE,EAAEA,EAAEgU,SAAStS,OAAOpB,EAAEN,GAAG,SAASuG,EAAEvG,EAAEM,EAAEiB,EAAEd,EAAEF,GAAGA,IAAIA,EAAE,IAAIwP,EAAE,KAAKxP,EAAEN,KAAK,IAAIM,EAAEL,KAAK,IAAIK,EAAEJ,MAAK,IAAKI,EAAEH,MAAK,IAAK,IAAI,IAAIO,EAAE6F,EAAElG,EAAEkG,EAAEjF,EAAEiF,IAAI7F,EAAEX,EAAEgU,SAASxN,GAAGnG,EAAEE,EAAEP,EAAEiU,KAAKxT,EAAEE,GAAGA,GAAG,OAAOJ,EAAE,SAASF,EAAEL,EAAEM,GAAGN,EAAEC,KAAK6B,KAAKC,IAAI/B,EAAEC,KAAKK,EAAEL,MAAMD,EAAEE,KAAK4B,KAAKC,IAAI/B,EAAEE,KAAKI,EAAEJ,MAAMF,EAAEG,KAAK2B,KAAKE,IAAIhC,EAAEG,KAAKG,EAAEH,MAAMH,EAAEI,KAAK0B,KAAKE,IAAIhC,EAAEI,KAAKE,EAAEF,MAAM,SAASsJ,EAAE1J,EAAEM,GAAG,OAAON,EAAEC,KAAKK,EAAEL,KAAK,SAAS8F,EAAE/F,EAAEM,GAAG,OAAON,EAAEE,KAAKI,EAAEJ,KAAK,SAAS2H,EAAE7H,GAAG,OAAOA,EAAEG,KAAKH,EAAEC,OAAOD,EAAEI,KAAKJ,EAAEE,MAAM,SAASM,EAAER,GAAG,OAAOA,EAAEG,KAAKH,EAAEC,MAAMD,EAAEI,KAAKJ,EAAEE,MAAM,SAASwE,EAAE1E,EAAEM,GAAG,OAAOwB,KAAKE,IAAI1B,EAAEH,KAAKH,EAAEG,MAAM2B,KAAKC,IAAIzB,EAAEL,KAAKD,EAAEC,QAAQ6B,KAAKE,IAAI1B,EAAEF,KAAKJ,EAAEI,MAAM0B,KAAKC,IAAIzB,EAAEJ,KAAKF,EAAEE,OAAO,SAASsJ,EAAExJ,EAAEM,GAAG,IAAMiB,EAAEO,KAAKE,IAAIhC,EAAEC,KAAKK,EAAEL,MAAMQ,EAAEqB,KAAKE,IAAIhC,EAAEE,KAAKI,EAAEJ,MAAMK,EAAEuB,KAAKC,IAAI/B,EAAEG,KAAKG,EAAEH,MAAMQ,EAAEmB,KAAKC,IAAI/B,EAAEI,KAAKE,EAAEF,MAAM,OAAO0B,KAAKE,IAAI,EAAEzB,EAAEgB,GAAGO,KAAKE,IAAI,EAAErB,EAAEF,GAAG,SAASyH,EAAElI,EAAEM,GAAG,OAAON,EAAEC,MAAMK,EAAEL,MAAMD,EAAEE,MAAMI,EAAEJ,MAAMI,EAAEH,MAAMH,EAAEG,MAAMG,EAAEF,MAAMJ,EAAEI,KAAK,SAAS2H,EAAE/H,EAAEM,GAAG,OAAOA,EAAEL,MAAMD,EAAEG,MAAMG,EAAEJ,MAAMF,EAAEI,MAAME,EAAEH,MAAMH,EAAEC,MAAMK,EAAEF,MAAMJ,EAAEE,KAAK,SAASuM,EAAEzM,EAAEM,EAAEG,EAAEE,EAAE6F,GAAiB,IAAd,IAAMD,EAAE,CAACjG,EAAEG,GAAQ8F,EAAE7E,QAAQ,CAAC,IAAMpB,EAAEiB,YAAEgF,EAAE2N,OAAOzT,EAAEc,YAAEgF,EAAE2N,OAAO,KAAG5T,EAAEG,GAAGE,GAAR,CAAmB,IAAMN,EAAEI,EAAEqB,KAAK6R,MAAMrT,EAAEG,GAAGE,EAAE,GAAGA,EAAEJ,YAAEP,EAAEK,EAAEI,EAAEH,EAAEkG,GAAGD,EAAElE,KAAK5B,EAAEJ,EAAEA,EAAEC,KAAI,IAAM6J,EAAE,IAAI1J,IAAEwG,EAAE,IAAIxG,IAAEkE,EAAE,IAAIlE,IAAEmE,EAAE,IAAInE,IAAE,CAACgV,iBAAY,IAAgG/I,E,kDAAY,aAAa,kCAAC,eAASgJ,YAAgBpB,OAAO,EAAE,EAAKG,UAAU,IAAInU,IAAtD,E,oCAAxG,aAAa,oBAACM,KAAKX,KAAK,IAAIW,KAAKV,KAAK,IAAIU,KAAKT,MAAK,IAAKS,KAAKR,MAAK,QAAoG2P,E,kDAAY,WAAY/P,GAAE,kCAAC,gBAAagU,SAAShU,EAAE,EAAKiU,MAAK,EAAnC,E,uBAAhBvH,GAA6D2C,E,kDAAY,WAAYrP,GAAE,kCAAC,gBAAagU,SAAShU,EAAE,EAAKiU,MAAK,EAAnC,E,uBAAhBvH","file":"static/js/9.c22bdbef.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport i from\"../../../core/has.js\";import{PooledRBush as s}from\"../../../core/libs/rbush/PooledRBush.js\";import{empty as d}from\"../../../geometry/support/aaBoundingRect.js\";const n=5e4,t={minX:0,minY:0,maxX:0,maxY:0};function e(i){t.minX=i[0],t.minY=i[1],t.maxX=i[2],t.maxY=i[3]}function o(i,s,d){e(s),i.search(t,d)}class h{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s(9,i(\"esri-csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const i=d();for(const s of this._boundsById.values())s&&(i[0]=Math.min(s[0],i[0]),i[1]=Math.min(s[1],i[1]),i[2]=Math.max(s[2],i[2]),i[3]=Math.max(s[3],i[3]));return i}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),o(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>n&&this._loadIndex()))}}export{h as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nconst t={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};export{t as queryCapabilities};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{PositionHint as e,indexOf as t}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Error.js\";import{clone as s}from\"../../../core/lang.js\";import{removeMaybe as r,destroyMaybe as a,isNone as n,isSome as o}from\"../../../core/maybe.js\";import{MemCacheStorage as u,MemCache as c}from\"../../../core/MemCache.js\";import{getMetersPerUnitForSR as h}from\"../../../core/unitUtils.js\";import{create as l,set as m,NEGATIVE_INFINITY as p,expandWithAABB as f}from\"../../../geometry/support/aaBoundingBox.js\";import{fromValues as d,create as y}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsXY as g}from\"../../../geometry/support/boundsUtils.js\";import{fromJSON as x,isExtent as _,isPolygon as w}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as S}from\"../../../geometry/support/normalizeUtils.js\";import{equals as F,isValid as R}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as Q}from\"../featureConversionUtils.js\";import{getWhereClause as I,validateFields as j,validateWhere as E,validateHaving as b,hasInvalidFieldType as A}from\"./attributeSupport.js\";import{project as T,checkProjectionSupport as k,projectMany as C}from\"./projectionSupport.js\";import{queryCapabilities as B}from\"./QueryEngineCapabilities.js\";import{QueryEngineResult as q,SnappingTypes as v}from\"./QueryEngineResult.js\";import{getSpatialQueryOperator as z,canQueryWithRBush as O,checkSpatialQuerySupport as G}from\"./spatialQuerySupport.js\";import{getTimeExtent as M,getTimeOperator as P}from\"./timeSupport.js\";import{cleanFromGeometryEngine as U,QUERY_ENGINE_EMPTY_RESULT as Z,normalizeQuery as N,getGeometry as D}from\"./utils.js\";import H from\"../../support/FieldsIndex.js\";import{loadArcade as L}from\"../../../support/arcadeOnDemand.js\";import{noBudget as J}from\"../../../views/support/Scheduler.js\";function V(e){return e.every((e=>\"exceedslimit\"!==e.statisticType))}const W=\"feature-store:unsupported-query\";class ${constructor(e,t=null,i,s,r){this.attributes=e,this.geometry=i,this.centroid=s,this.filterFlags=r,this.groupId=-1,this.displayId=t}}const K=new u(2e6);let X=0;class Y{constructor(e){this.capabilities={query:B},this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this.aggregateAdapter=e.aggregateAdapter,this._changeHandle=this.featureStore.events.on(\"changed\",(()=>this.clearCache())),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new c(X+++\"$$\",K)),this.fieldsIndex=new H(e.fields),e.scheduler&&e.priority&&(this._frameTask=e.scheduler.registerTask(e.priority))}destroy(){this._frameTask=r(this._frameTask),this.clearCache(),a(this._geometryQueryCache),this._changeHandle=r(this._changeHandle),a(this.fieldsIndex)}get featureAdapter(){return this.featureStore.featureAdapter}get fullExtent(){const e=this.featureStore.fullBounds;return n(e)?null:{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:U(this.spatialReference)}}get timeExtent(){return this.timeInfo?(this._timeExtent||(this._timeExtent=M(this.timeInfo,this.featureStore)),this._timeExtent):null}clearCache(){this._geometryQueryCache?.clear(),this._allItems=null,this._timeExtent=null}async executeQuery(e,t){try{return(await this._executeQuery(e,{},t)).createQueryResponse()}catch(i){if(i!==Z)throw i;return new q([],e,this).createQueryResponse()}}async executeQueryForCount(e={},t){try{return(await this._executeQuery(e,{returnGeometry:!1,returnCentroid:!1,outSR:null},t)).createQueryResponseForCount()}catch(i){if(i!==Z)throw i;return 0}}async executeQueryForExtent(e,t){const i=e.outSR;try{const s=await this._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},t),r=s.size;if(!r)return{count:0,extent:null};m(te,p),this.featureStore.forEachBounds(s.items,(e=>f(te,e)),ee);const a={xmin:te[0],ymin:te[1],xmax:te[3],ymax:te[4],spatialReference:U(this.spatialReference)};this.hasZ&&isFinite(te[2])&&isFinite(te[5])&&(a.zmin=te[2],a.zmax=te[5]);const n=T(a,s.spatialReference,i);if(n.spatialReference=U(i||this.spatialReference),n.xmax-n.xmin==0){const e=h(n.spatialReference);n.xmin-=e,n.xmax+=e}if(n.ymax-n.ymin==0){const e=h(n.spatialReference);n.ymin-=e,n.ymax+=e}if(this.hasZ&&null!=n.zmin&&null!=n.zmax&&n.zmax-n.zmin==0){const e=h(n.spatialReference);n.zmin-=e,n.zmax+=e}return{count:r,extent:n}}catch(s){if(s===Z)return{count:0,extent:null};throw s}}async executeQueryForIds(e,t){return this.executeQueryForIdSet(e,t).then((e=>Array.from(e)))}async executeQueryForIdSet(e,t){try{const i=await this._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},t),s=i.items,r=new Set;return await this._reschedule((()=>{for(const e of s)r.add(i.featureAdapter.getObjectId(e))}),t),r}catch(i){if(i===Z)return new Set;throw i}}async executeQueryForSnapping(e,t){const{point:i,distance:s,types:r}=e;if(r===v.NONE)return{candidates:[]};const a=await this._reschedule((()=>this._checkQuerySupport(e.query)),t),o=!F(i.spatialReference,this.spatialReference);o&&await k(i.spatialReference,this.spatialReference);const u=\"number\"==typeof s?s:s.x,c=\"number\"==typeof s?s:s.y,h={xmin:i.x-u,xmax:i.x+u,ymin:i.y-c,ymax:i.y+c,spatialReference:i.spatialReference},l=o?T(h,this.spatialReference):h;if(!l)return{candidates:[]};const m=(await S(x(i),null,{signal:t}))[0],p=(await S(x(l),null,{signal:t}))[0];if(n(m)||n(p))return{candidates:[]};const f=new q(this._searchFeatures(this._getQueryBBoxes(p.toJSON())),a,this);await this._reschedule((()=>this._executeObjectIdsQuery(f)),t),await this._reschedule((()=>this._executeTimeQuery(f)),t),await this._reschedule((()=>this._executeAttributesQuery(f)),t);const d=m.toJSON(),y=o?T(d,this.spatialReference):d,g=o?Math.max(l.xmax-l.xmin,l.ymax-l.ymin)/2:s;return f.createSnappingResponse({...e,point:y,distance:g},i.spatialReference)}async executeQueryForLatestObservations(e,t){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new i(W,\"Missing timeInfo or timeInfo.trackIdField\",{query:e,timeInfo:this.timeInfo});try{const i=await this._executeQuery(e,{},t);return await this._reschedule((()=>this._filterLatest(i)),t),i.createQueryResponse()}catch(s){if(s!==Z)throw s;return new q([],e,this).createQueryResponse()}}async executeQueryForSummaryStatistics(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createSummaryStatisticsResponse(t)}async executeQueryForUniqueValues(e={},t,i){const{field:s,valueExpression:r}=t;return(await this._getQueryEngineResultForStats(e,{field:s,valueExpression:r},i)).createUniqueValuesResponse(t)}async executeQueryForClassBreaks(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createClassBreaksResponse(t)}async executeQueryForHistogram(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createHistogramResponse(t)}async _schedule(e,t){return o(this._frameTask)?this._frameTask.schedule(e,t):e(J)}async _reschedule(e,t){return o(this._frameTask)?this._frameTask.reschedule(e,t):e(J)}_getAll(e){return n(this._allItems)&&(this._allItems=this.featureStore.toArray()),new q(this._allItems,e,this)}async _executeQuery(e,t,i){e=s(e),e=await this._schedule((()=>N(e,this.definitionExpression,this.spatialReference)),i),e=await this._reschedule((()=>this._checkQuerySupport(e)),i),e={...e,...t};const r=await this._reschedule((()=>this._executeSceneFilterQuery(e,i)),i),a=await this._reschedule((()=>this._executeGeometryQuery(e,r,i)),i);return await this._reschedule((()=>this._executeAggregateIdsQuery(a)),i),await this._reschedule((()=>this._executeObjectIdsQuery(a)),i),await this._reschedule((()=>this._executeTimeQuery(a)),i),await this._reschedule((()=>this._executeAttributesQuery(a)),i),a}async _executeSceneFilterQuery(e,t){if(n(e.sceneFilter))return null;const{outSR:i,returnGeometry:s,returnCentroid:r}=e,a=this.featureStore.featureSpatialReference,o=e.sceneFilter.geometry,u=n(a)||F(a,o.spatialReference)?o:T(o,a);if(!u)return null;const c=s||r,h=R(i)&&!F(this.spatialReference,i)&&c?async e=>this._project(e,i):e=>e,l=this.featureAdapter,m=this._searchFeatures(this._getQueryBBoxes(u));if(\"disjoint\"===e.sceneFilter.spatialRelationship){if(!m.length)return null;const i=new Set;for(const e of m)i.add(l.getObjectId(e));const s=await this._reschedule((()=>this.featureStore.toArray()),t),r=await this._reschedule((async()=>{const r=await z(\"esriSpatialRelDisjoint\",u,this.geometryType,this.hasZ,this.hasM),a=e=>!i.has(l.getObjectId(e))||r(l.getGeometry(e)),n=await this._runSpatialFilter(s,a,t);return new q(n,e,this)}),t);return h(r)}if(!m.length)return new q([],e,this);if(this._canExecuteSinglePass(u,e))return h(new q(m,e,this));const p=await z(\"esriSpatialRelContains\",u,this.geometryType,this.hasZ,this.hasM),f=await this._runSpatialFilter(m,(e=>p(l.getGeometry(e))),t);return h(new q(f,e,this))}async _executeGeometryQuery(i,s,r){if(o(s)&&0===s.items.length)return s;i=o(s)?s.query:i;const{geometry:a,outSR:u,spatialRel:c,returnGeometry:h,returnCentroid:l}=i,m=this.featureStore.featureSpatialReference,p=!a||n(m)||F(m,a.spatialReference)?a:T(a,m),f=h||l,d=R(u)&&!F(this.spatialReference,u),y=this._geometryQueryCache&&n(s)?d&&f?JSON.stringify({originalFilterGeometry:a,spatialRelationship:c,outSpatialReference:u}):JSON.stringify({originalFilterGeometry:a,spatialRelationship:c}):null,g=y?this._geometryQueryCache.get(y):null;if(o(g))return new q(g,i,this);const x=async e=>(d&&f&&await this._project(e,u),y&&this._geometryQueryCache.put(y,e.items,e.items.length+1),e);if(!p)return x(o(s)?s:this._getAll(i));const _=this.featureAdapter;let w=this._searchFeatures(this._getQueryBBoxes(a));if(\"esriSpatialRelDisjoint\"===c){if(!w.length)return x(o(s)?s:this._getAll(i));const e=new Set;for(const i of w)e.add(_.getObjectId(i));const t=o(s)?s.items:await this._reschedule((()=>this.featureStore.toArray()),r),a=await this._reschedule((async()=>{const s=await z(c,p,this.geometryType,this.hasZ,this.hasM),a=t=>!e.has(_.getObjectId(t))||s(_.getGeometry(t)),n=await this._runSpatialFilter(t,a,r);return new q(n,i,this)}),r);return x(a)}if(o(s)){const i=new e;w=w.filter((e=>t(s.items,e,s.items.length,i)>=0))}if(!w.length){const e=new q([],i,this);return y&&this._geometryQueryCache.put(y,e.items,1),e}if(this._canExecuteSinglePass(p,i))return x(new q(w,i,this));const S=await z(c,p,this.geometryType,this.hasZ,this.hasM),Q=await this._runSpatialFilter(w,(e=>S(_.getGeometry(e))),r);return x(new q(Q,i,this))}_executeAggregateIdsQuery(e){if(0===e.items.length||!e.query.aggregateIds||!e.query.aggregateIds.length||n(this.aggregateAdapter))return;const t=new Set;for(const s of e.query.aggregateIds){this.aggregateAdapter.getFeatureObjectIds(s).forEach((e=>t.add(e)))}const i=this.featureAdapter.getObjectId;e.items=e.items.filter((e=>t.has(i(e))))}_executeObjectIdsQuery(e){if(0===e.items.length||!e.query.objectIds||!e.query.objectIds.length)return;const t=new Set(e.query.objectIds),i=this.featureAdapter.getObjectId;e.items=e.items.filter((e=>t.has(i(e))))}_executeTimeQuery(e){if(0===e.items.length)return;const t=P(this.timeInfo,e.query.timeExtent,this.featureAdapter);n(t)||(e.items=e.items.filter(t))}_executeAttributesQuery(e){if(0===e.items.length)return;const t=I(e.query.where,this.fieldsIndex);if(t){if(!t.isStandardized)throw new TypeError(\"Where clause is not standardized\");e.items=e.items.filter((e=>t.testFeature(e,this.featureAdapter)))}}async _runSpatialFilter(e,t,i){if(!t)return e;if(n(this._frameTask))return e.filter((e=>t(e)));let s=0;const r=new Array,a=async n=>{for(;s<e.length;){const o=e[s++];t(o)&&(r.push(o),n.madeProgress()),n.done&&await this._reschedule((e=>a(e)),i)}};return this._reschedule((e=>a(e)),i).then((()=>r))}_filterLatest(e){const{trackIdField:t,startTimeField:i,endTimeField:s}=this.timeInfo,r=s||i,a=new Map,n=this.featureAdapter.getAttribute;for(const o of e.items){const e=n(o,t),i=n(o,r),s=a.get(e);(!s||i>n(s,r))&&a.set(e,o)}e.items=Array.from(a.values())}_canExecuteSinglePass(e,t){const{spatialRel:i}=t;return O(e)&&(\"esriSpatialRelEnvelopeIntersects\"===i||\"esriGeometryPoint\"===this.geometryType&&(\"esriSpatialRelIntersects\"===i||\"esriSpatialRelContains\"===i||\"esriSpatialRelWithin\"===i))}async _project(e,t){if(!t||F(this.spatialReference,t))return e;const i=this.featureAdapter,s=await C(e.items.map((e=>D(this.geometryType,this.hasZ,this.hasM,i.getGeometry(e)))),this.spatialReference,t);return e.items=s.map(((t,s)=>i.cloneWithGeometry(e.items[s],Q(t,this.hasZ,this.hasM)))),e}_getQueryBBoxes(e){if(O(e)){if(_(e))return[d(e.xmin,e.ymin,e.xmax,e.ymax)];if(w(e))return e.rings.map((e=>d(Math.min(e[0][0],e[2][0]),Math.min(e[0][1],e[2][1]),Math.max(e[0][0],e[2][0]),Math.max(e[0][1],e[2][1]))))}return[g(y(),e)]}_searchFeatures(e){for(const i of e)this.featureStore.forEachInBounds(i,(e=>ie.add(e)));const t=Array.from(ie.values());return ie.clear(),t}async _checkStatisticsSupport(e,t){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text||e.outStatistics||e.groupByFieldsForStatistics||e.having||e.orderByFields)throw new i(W,\"Unsupported query options\",{query:e});return this._checkAttributesQuerySupport(e),Promise.all([this._checkStatisticsParamsSupport(t),G(e,this.geometryType,this.spatialReference),k(this.spatialReference,e.outSR)]).then((()=>e))}async _checkStatisticsParamsSupport(e){let t=[];if(e.valueExpression){const{arcadeUtils:i}=await L();t=i.extractFieldNames(e.valueExpression)}if(e.field&&t.push(e.field),e.normalizationField&&t.push(e.normalizationField),!t.length)throw new i(W,\"params should have at least a field or valueExpression\",{params:e});j(this.fieldsIndex,t,\"params contains missing fields\")}async _checkQuerySupport(e){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new i(W,\"Unsupported query options\",{query:e});return this._checkAttributesQuerySupport(e),this._checkStatisticsQuerySupport(e),Promise.all([G(e,this.geometryType,this.spatialReference),k(this.spatialReference,e.outSR)]).then((()=>e))}_checkAttributesQuerySupport(e){const{outFields:t,orderByFields:s,returnDistinctValues:r,outStatistics:a}=e,n=a?a.map((e=>e.outStatisticFieldName&&e.outStatisticFieldName.toLowerCase())).filter(Boolean):[];if(s&&s.length>0){const e=\" asc\",t=\" desc\",i=s.map((i=>{const s=i.toLowerCase();return s.includes(e)?s.split(e)[0]:s.includes(t)?s.split(t)[0]:i})).filter((e=>!n.includes(e)));j(this.fieldsIndex,i,\"orderByFields contains missing fields\")}if(t&&t.length>0)j(this.fieldsIndex,t,\"outFields contains missing fields\");else if(r)throw new i(W,\"outFields should be specified for returnDistinctValues\",{query:e});E(this.fieldsIndex,e.where)}_checkStatisticsQuerySupport(e){const{outStatistics:t,groupByFieldsForStatistics:s,having:r}=e,a=s&&s.length,n=t&&t.length;if(r){if(!a||!n)throw new i(W,\"outStatistics and groupByFieldsForStatistics should be specified with having\",{query:e});b(this.fieldsIndex,r,t)}if(n){if(!V(t))return;const r=t.map((e=>e.onStatisticField)).filter(Boolean);j(this.fieldsIndex,r,\"onStatisticFields contains missing fields\"),a&&j(this.fieldsIndex,s,\"groupByFieldsForStatistics contains missing fields\");for(const s of t){const{onStatisticField:t,statisticType:r}=s;if((\"percentile_disc\"===r||\"percentile_cont\"===r)&&\"statisticParameters\"in s){const{statisticParameters:t}=s;if(!t)throw new i(W,\"statisticParamters should be set for percentile type\",{definition:s,query:e})}else if(\"count\"!==r&&t&&A(t,this.fieldsIndex))throw new i(W,\"outStatistics contains non-numeric fields\",{definition:s,query:e})}}}async _getQueryEngineResultForStats(e,t,i){e=s(e);try{e=await this._schedule((()=>N(e,this.definitionExpression,this.spatialReference)),i),e=await this._reschedule((()=>this._checkStatisticsSupport(e,t)),i);const s=await this._reschedule((()=>this._executeSceneFilterQuery(e,i)),i),r=await this._reschedule((()=>this._executeGeometryQuery(e,s,i)),i);return await this._reschedule((()=>this._executeAggregateIdsQuery(r)),i),await this._reschedule((()=>this._executeObjectIdsQuery(r)),i),await this._reschedule((()=>this._executeTimeQuery(r)),i),await this._reschedule((()=>this._executeAttributesQuery(r)),i),r}catch(r){if(r!==Z)throw r;return new q([],e,this)}}}const ee=l(),te=l(),ie=new Set;export{$ as Feature,Y as QueryEngine};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nfunction t(t,n){if(!t)return null;const e=n.featureAdapter,{startTimeField:u,endTimeField:l}=t;let r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;if(u&&l)n.forEach((t=>{const n=e.getAttribute(t,u),o=e.getAttribute(t,l);null==n||isNaN(n)||(r=Math.min(r,n)),null==o||isNaN(o)||(i=Math.max(i,o))}));else{const t=u||l;n.forEach((n=>{const u=e.getAttribute(n,t);null==u||isNaN(u)||(r=Math.min(r,u),i=Math.max(i,u))}))}return{start:r,end:i}}function n(t,n,r){if(!n||!t)return null;const{startTimeField:i,endTimeField:o}=t;if(!i&&!o)return null;const{start:s,end:a}=n;return null===s&&null===a?null:void 0===s&&void 0===a?l():i&&o?e(r,i,o,s,a):u(r,i||o,s,a)}function e(t,n,e,u,l){return null!=u&&null!=l?r=>{const i=t.getAttribute(r,n),o=t.getAttribute(r,e);return(null==i||i<=l)&&(null==o||o>=u)}:null!=u?n=>{const l=t.getAttribute(n,e);return null==l||l>=u}:null!=l?e=>{const u=t.getAttribute(e,n);return null==u||u<=l}:void 0}function u(t,n,e,u){return null!=e&&null!=u&&e===u?u=>t.getAttribute(u,n)===e:null!=e&&null!=u?l=>{const r=t.getAttribute(l,n);return r>=e&&r<=u}:null!=e?u=>t.getAttribute(u,n)>=e:null!=u?e=>t.getAttribute(e,n)<=u:void 0}function l(){return()=>!1}export{t as getTimeExtent,n as getTimeOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nfunction n(n,t){return n?t?4:3:t?3:2}function t(n,t,r,e){return o(n,t,r,e.coords[0],e.coords[1])}function r(t,r,e,c,u,f){const s=n(u,f),{coords:i,lengths:l}=c;if(!l)return!1;for(let n=0,d=0;n<l.length;n++,d+=s)if(!o(t,r,e,i[d],i[d+1]))return!1;return!0}function o(t,r,o,c,u){if(!t)return!1;const f=n(r,o),{coords:s,lengths:i}=t;let l=!1,d=0;for(const n of i)l=e(l,s,f,d,n,c,u),d+=n*f;return l}function e(n,t,r,o,e,c,u){let f=n,s=o;for(let i=o,l=o+e*r;i<l;i+=r){s=i+r,s===l&&(s=o);const n=t[i],e=t[i+1],d=t[s],g=t[s+1];(e<u&&g>=u||g<u&&e>=u)&&n+(u-e)/(g-e)*(d-n)<c&&(f=!f)}return f}export{o as polygonContainsCoords,r as polygonContainsMultipoint,t as polygonContainsPoint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{extentContainsPoint as r,extentContainsMultipoint as t}from\"../../../geometry/support/contains.js\";import{getExtentIntersector as i}from\"../../../geometry/support/intersects.js\";import{isPolygon as s,isExtent as o,getJsonType as n}from\"../../../geometry/support/jsonUtils.js\";import{isValid as l}from\"../../../geometry/support/spatialReferenceUtils.js\";import{polygonContainsPoint as a,polygonContainsMultipoint as p}from\"../contains.js\";import{convertFromPolygon as m}from\"../featureConversionUtils.js\";import u from\"../OptimizedGeometry.js\";import{checkProjectionSupport as y}from\"./projectionSupport.js\";import{getGeometry as f}from\"./utils.js\";const c=\"feature-store:unsupported-query\",R={esriSpatialRelIntersects:\"intersects\",esriSpatialRelContains:\"contains\",esriSpatialRelCrosses:\"crosses\",esriSpatialRelDisjoint:\"disjoint\",esriSpatialRelEnvelopeIntersects:\"intersects\",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:\"overlaps\",esriSpatialRelTouches:\"touches\",esriSpatialRelWithin:\"within\",esriSpatialRelRelation:null},S={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function G(e){return!0===S.spatialRelationship[e]}function g(e){return!0===S.queryGeometry[n(e)]}function j(e){return!0===S.layerGeometry[e]}function h(){return import(\"../../../geometry/geometryEngineJSON.js\")}function v(e,n,l,y,c){if(s(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e)){const e=m(new u,n,!1,!1);return Promise.resolve((r=>a(e,!1,!1,r)))}if(s(n)&&\"esriGeometryMultipoint\"===l){const r=m(new u,n,!1,!1);if(\"esriSpatialRelContains\"===e)return Promise.resolve((e=>p(r,!1,!1,e,y,c)))}if(o(n)&&\"esriGeometryPoint\"===l&&(\"esriSpatialRelIntersects\"===e||\"esriSpatialRelContains\"===e))return Promise.resolve((e=>r(n,f(l,y,c,e))));if(o(n)&&\"esriGeometryMultipoint\"===l&&\"esriSpatialRelContains\"===e)return Promise.resolve((e=>t(n,f(l,y,c,e))));if(o(n)&&\"esriSpatialRelIntersects\"===e){const e=i(l);return Promise.resolve((r=>e(n,f(l,y,c,r))))}return h().then((r=>{const t=r[R[e]].bind(null,n.spatialReference,n);return e=>t(f(l,y,c,e))}))}async function P(r,t,i){const{spatialRel:s,geometry:o}=r;if(o){if(!G(s))throw new e(c,\"Unsupported query spatial relationship\",{query:r});if(l(o.spatialReference)&&l(i)){if(!g(o))throw new e(c,\"Unsupported query geometry type\",{query:r});if(!j(t))throw new e(c,\"Unsupported layer geometry type\",{query:r});if(r.outSR)return y(r.geometry&&r.geometry.spatialReference,r.outSR)}}}function I(e){if(o(e))return!0;if(s(e)){for(const r of e.rings){if(5!==r.length)return!1;if(r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==r[4][1]||r[1][1]!==r[2][1])return!1}return!0}return!1}export{I as canQueryWithRBush,P as checkSpatialQuerySupport,v as getSpatialQueryOperator};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{extentIntersectsExtent as e,getFeatureExtentIntersector as t}from\"./intersectsBase.js\";export{extentIntersectsExtent,extentIntersectsMultipoint,extentIntersectsPoint,extentIntersectsPolygon,extentIntersectsPolyline,extentIntersectsRings,getFeatureExtentIntersector,isSelfIntersecting,segmentIntersects}from\"./intersectsBase.js\";function n(n){return\"mesh\"===n?e:t(n)}export{n as getExtentIntersector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../core/maybe.js\";import{getCentroidOptimizedGeometry as e}from\"../centroid.js\";import{OptimizedFeature as r}from\"../OptimizedFeature.js\";import o from\"../OptimizedGeometry.js\";const i={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,e)=>new r(e,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(r,i)=>(t(r.centroid)&&(r.centroid=e(new o,r.geometry,i.hasZ,i.hasM)),r.centroid)};export{i as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/Evented.js\";import r from\"../../../core/Logger.js\";import{isSome as s,isNone as o}from\"../../../core/maybe.js\";import{fromRect as i}from\"../../../geometry/support/aaBoundingBox.js\";import{create as d}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as a}from\"../featureConversionUtils.js\";import{BoundsStore as n}from\"./BoundsStore.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";class u{constructor(e){this.geometryInfo=e,this._boundsStore=new n,this._featuresById=new Map,this._markedIds=new Set,this.events=new t,this.featureAdapter=h}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{s(t.geometry)&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const s of e){const e=this._boundsStore.get(s.objectId);e&&t(i(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}toArray(){return Array.from(this._featuresById.values())}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(t){if(!t)return;const i=t.objectId;if(null==i)return void r.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new e(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:t}));const n=this._featuresById.get(i);let h;if(this._markedIds.add(i),n?(t.displayId=n.displayId,h=this._boundsStore.get(i),this._boundsStore.delete(i)):s(this.onFeatureAdd)&&this.onFeatureAdd(t),o(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)return this._boundsStore.set(i,null),void this._featuresById.set(i,t);h=a(s(h)?h:d(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),s(h)&&this._boundsStore.set(i,h),this._featuresById.set(i,t)}_remove(e){return s(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{indexOf as t,PositionHint as i}from\"../../arrayUtils.js\";import{assumeNonNull as n}from\"../../maybe.js\";import e from\"../../PooledArray.js\";import{q as s}from\"../../../chunks/quickselect.js\";class h{constructor(t=9,i){this.compareMinX=l,this.compareMinY=c,this._toBBox=t=>t,this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&(\"function\"==typeof i?this._toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),g.prune(),M.prune(),X.prune(),Y.prune()}all(t){this._all(this.data,t)}search(t,i){let n=this.data;const e=this._toBBox;if(p(t,n))for(g.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;p(t,a)&&(n.leaf?i(h):f(t,a)?this._all(h,i):g.push(h))}n=g.pop()}}collides(t){let i=this.data;const n=this._toBBox;if(!p(t,i))return!1;for(g.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(p(t,h)){if(i.leaf||f(t,h))return!0;g.push(s)}}i=g.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const t=this.data;this.data=i,i=t}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new b([]),this}remove(i){if(!i)return this;let e,s=this.data,h=null,a=0,r=!1;const o=this._toBBox(i);for(X.clear(),Y.clear();s||X.length>0;){if(s||(s=n(X.pop()),h=X.data[X.length-1],a=Y.pop()??0,r=!0),s.leaf&&(e=t(s.children,i,s.children.length,s.indexHint),-1!==e))return s.children.splice(e,1),X.push(s),this._condense(X),this;r||s.leaf||!f(s,o)?h?(a++,s=h.children[a],r=!1):s=null:(X.push(s),Y.push(a),a=0,h=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,i){let n=t;for(M.clear();n;){if(!0===n.leaf)for(const t of n.children)i(t);else M.pushArray(n.children);n=M.pop()??null}}_build(t,i,n,e){const s=n-i+1;let h=this._maxEntries;if(s<=h){const e=new b(t.slice(i,n+1));return a(e,this._toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(h)),h=Math.ceil(s/h**(e-1)));const r=new j([]);r.height=e;const o=Math.ceil(s/h),l=o*Math.ceil(Math.sqrt(h));_(t,i,n,l,this.compareMinX);for(let a=i;a<=n;a+=l){const i=Math.min(a+l-1,n);_(t,a,i,o,this.compareMinY);for(let n=a;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return a(r,this._toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=m(a),o=u(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this._toBBox,s=n?t:e(t);X.clear();const h=this._chooseSubtree(s,this.data,i,X);for(h.children.push(t),o(h,s);i>=0&&X.data[i].children.length>this._maxEntries;)this._split(X,i),i--;this._adjustParentBBoxes(s,X,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const h=this._chooseSplitIndex(n,s,e);if(!h)return void console.log(\"  Error: assertion failed at PooledRBush._split: no valid split index\");const r=n.children.splice(h,n.children.length-h),o=n.leaf?new b(r):new j(r);o.height=n.height,a(n,this._toBBox),a(o,this._toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this.data=new j([t,i]),this.data.height=t.height+1,a(this.data,this._toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let a=i;a<=n-i;a++){const i=r(t,0,a,this._toBBox),o=r(t,a,n,this._toBBox),l=x(i,o),c=m(i)+m(o);l<e?(e=l,h=a,s=c<s?c:s):l===e&&c<s&&(s=c,h=a)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this.compareMinX:l,s=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this._toBBox,h=r(t,0,i,s),a=r(t,n-i,n,s);let l=d(h)+d(a);for(let r=i;r<n-i;r++){const i=t.children[r];o(h,t.leaf?s(i):i),l+=d(h)}for(let r=n-i-1;r>=i;r--){const i=t.children[r];o(a,t.leaf?s(i):i),l+=d(a)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)o(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice(t(h,e,h.length,s.indexHint),1)}else this.clear();else a(e,this._toBBox)}}_initFormat(t){const i=[\"return a\",\" - b\",\";\"];this.compareMinX=new Function(\"a\",\"b\",i.join(t[0])),this.compareMinY=new Function(\"a\",\"b\",i.join(t[1])),this._toBBox=new Function(\"a\",\"return {minX: a\"+t[0]+\", minY: a\"+t[1]+\", maxX: a\"+t[2]+\", maxY: a\"+t[3]+\"};\")}}function a(t,i){r(t,0,t.children.length,i,t)}function r(t,i,n,e,s){s||(s=new b([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],o(s,t.leaf?e(h):h);return s}function o(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function x(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function f(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function p(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function _(t,i,e,h,a){const r=[i,e];for(;r.length;){const i=n(r.pop()),e=n(r.pop());if(i-e<=h)continue;const o=e+Math.ceil((i-e)/h/2)*h;s(t,o,e,i,a),r.push(e,o,o,i)}}const g=new e,M=new e,X=new e,Y=new e({deallocator:void 0});class B{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class w extends B{constructor(){super(...arguments),this.height=1,this.indexHint=new i}}class b extends w{constructor(t){super(),this.children=t,this.leaf=!0}}class j extends w{constructor(t){super(),this.children=t,this.leaf=!1}}export{B as BBox,h as PooledRBush};\n"],"sourceRoot":""}