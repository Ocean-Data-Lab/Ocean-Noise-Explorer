(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[68,82],{1225:function(e,t,n){"use strict";n.r(t),n.d(t,"SceneLayerSnappingSourceWorker",(function(){return ce})),n.d(t,"default",(function(){return ae}));var r=n(60),i=n(155),o=n(142),u=n(143),c=n(154),a=n.n(c),s=n(148),_=n(146),f=n(162),E=(n(156),n(150),n(152),n(147),n(234),n(149)),O=n(222),T=n(210),d=n(858),l=n(559),A=n(773),R=n(360),h=n(457),N=n(491),b=(n(375),n(385),n(373)),v=n(556);n(425);function I(e){return e?{ray:Object(v.c)(e.ray),c0:e.c0,c1:e.c1}:{ray:Object(v.c)(),c0:0,c1:Number.MAX_VALUE}}new N.a((function(){return{c0:0,c1:0,ray:null}})),n(188),n(591);Object(T.e)(),Object(T.e)(),Object(T.e)(),Object(T.e)(),Object(T.e)();Object(T.e)(),Object(T.e)(),Object(T.e)(),Object(T.e)(),Object(T.e)();var S,C;(C=S||(S={}))[C.NONE=0]="NONE",C[C.CLAMP=1]="CLAMP",C[C.INFINITE_MIN=4]="INFINITE_MIN",C[C.INFINITE_MAX=8]="INFINITE_MAX";var g,j,p;S.INFINITE_MIN,S.INFINITE_MAX,S.INFINITE_MAX;function M(e,t){for(var n=0;n<L.NUM;n++){var r=e[n];if(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]>=t[3])return!1}return!0}(p=g||(g={}))[p.LEFT=0]="LEFT",p[p.RIGHT=1]="RIGHT",p[p.BOTTOM=2]="BOTTOM",p[p.TOP=3]="TOP",p[p.NEAR=4]="NEAR",p[p.FAR=5]="FAR",function(e){e[e.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",e[e.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",e[e.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",e[e.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",e[e.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",e[e.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",e[e.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",e[e.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(j||(j={}));var L,P;j.FAR_BOTTOM_RIGHT,j.NEAR_BOTTOM_RIGHT,j.NEAR_BOTTOM_LEFT,j.FAR_BOTTOM_LEFT,j.NEAR_BOTTOM_LEFT,j.NEAR_BOTTOM_RIGHT,j.NEAR_TOP_RIGHT,j.NEAR_TOP_LEFT,j.FAR_BOTTOM_RIGHT,j.FAR_BOTTOM_LEFT,j.FAR_TOP_LEFT,j.FAR_TOP_RIGHT,j.NEAR_BOTTOM_RIGHT,j.FAR_BOTTOM_RIGHT,j.FAR_TOP_RIGHT,j.NEAR_TOP_RIGHT,j.FAR_BOTTOM_LEFT,j.NEAR_BOTTOM_LEFT,j.NEAR_TOP_LEFT,j.FAR_TOP_LEFT,j.FAR_TOP_LEFT,j.NEAR_TOP_LEFT,j.NEAR_TOP_RIGHT,j.FAR_TOP_RIGHT;!function(e){e[e.NUM=6]="NUM"}(L||(L={})),function(e){e[e.NUM=8]="NUM"}(P||(P={}));Object(b.c)(-1,-1,-1,1),Object(b.c)(1,-1,-1,1),Object(b.c)(1,1,-1,1),Object(b.c)(-1,1,-1,1),Object(b.c)(-1,-1,1,1),Object(b.c)(1,-1,1,1),Object(b.c)(1,1,1,1),Object(b.c)(-1,1,1,1),new N.a(I),Object(T.e)(),Object(T.e)(),Object(T.e)(),Object(T.e)(),Object(T.e)(),Object(T.e)(),Object(T.e)(),Object(T.e)();var m=n(525),D=function(){function e(t,n){Object(o.a)(this,e),this._objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new F,this._objectCount=0,n&&(void 0!==n.maximumObjectsPerNode&&(this._maximumObjectsPerNode=n.maximumObjectsPerNode),void 0!==n.maximumDepth&&(this._maximumDepth=n.maximumDepth))}return Object(u.a)(e,[{key:"bounds",get:function(){return this._root.bounds}},{key:"halfSize",get:function(){return this._root.halfSize}},{key:"root",get:function(){return this._root.node}},{key:"maximumObjectsPerNode",get:function(){return this._maximumObjectsPerNode}},{key:"maximumDepth",get:function(){return this._maximumDepth}},{key:"objectCount",get:function(){return this._objectCount}},{key:"destroy",value:function(){this._degenerateObjects.clear(),F.clearPool(),W[0]=null,Q.prune(),re.prune()}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;this._objectCount+=t,this._grow(e,t);for(var n=F.acquire(),r=0;r<t;r++){var i=e[r];this._isDegenerate(i)?this._degenerateObjects.add(i):(n.init(this._root),this._add(i,n))}F.release(n)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._objectCount-=e.length;var n,i=F.acquire(),o=Object(r.a)(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,c=Object(_.k)(t)?t:Object(l.a)(this._objectToBoundingSphere(u),J);V(c[3])?(i.init(this._root),this._remove(u,c,i)):this._degenerateObjects.delete(u)}}catch(a){o.e(a)}finally{o.f()}F.release(i),this._shrink()}},{key:"update",value:function(e,t){if(V(t[3])||!this._isDegenerate(e)){var n=function(e){return W[0]=e,W}(e);this.remove(n,t),this.add(n)}}},{key:"forEachAlongRay",value:function(e,t,n){var r=this,i=Object(v.e)(e,t);this._forEachNode(this._root,(function(e){if(!r._intersectsNode(i,e))return!1;var t=e.node;return t.terminals.forAll((function(e){r._intersectsObject(i,e)&&n(e)})),null!==t.residents&&t.residents.forAll((function(e){r._intersectsObject(i,e)&&n(e)})),!0}))}},{key:"forEachAlongRayWithVerticalOffset",value:function(e,t,n,r){var i=this,o=Object(v.e)(e,t);this._forEachNode(this._root,(function(e){if(!i._intersectsNodeWithOffset(o,e,r))return!1;var t=e.node;return t.terminals.forAll((function(e){i._intersectsObjectWithOffset(o,e,r)&&n(e)})),null!==t.residents&&t.residents.forAll((function(e){i._intersectsObjectWithOffset(o,e,r)&&n(e)})),!0}))}},{key:"forEach",value:function(e){this._forEachNode(this._root,(function(t){var n=t.node;return n.terminals.forAll(e),null!==n.residents&&n.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}},{key:"forEachDegenerateObject",value:function(e){this._degenerateObjects.forEach(e)}},{key:"findClosest",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,u=1/0,c=1/0,a=null,s=H(e,t),_=function(s){if(--o,i(s)){var _=r._objectToBoundingSphere(s);if(M(n,_)){var f=w(e,t,Object(l.e)(_)),E=f-_[3],O=f+_[3];E<u&&(u=E,c=O,a=s)}}};return this._forEachNodeDepthOrdered(this._root,(function(r){if(o<=0||!M(n,r.bounds))return!1;if(Object(O.i)(K,s,r.halfSize),Object(O.c)(K,K,r.bounds),w(e,t,K)>c)return!1;var i=r.node;return i.terminals.forAll((function(e){return _(e)})),null!==i.residents&&i.residents.forAll((function(e){return _(e)})),!0}),e,t),a}},{key:"forEachInDepthRange",value:function(t,n,r,i,o,u,c){var a=this,s=-1/0,_=1/0,f={setRange:function(t){r===e.DepthOrder.FRONT_TO_BACK?(s=Math.max(s,t.near),_=Math.min(_,t.far)):(s=Math.max(s,-t.far),_=Math.min(_,-t.near))}};f.setRange(i);var E=w(n,r,t),T=H(n,r),d=H(n,-r),A=function(e){if(c(e)){var t=a._objectToBoundingSphere(e),i=Object(l.e)(t),O=w(n,r,i)-E,T=O-t[3],d=O+t[3];T>_||d<s||!M(u,t)||o(e,f)}};this._forEachNodeDepthOrdered(this._root,(function(e){if(!M(u,e.bounds))return!1;if(Object(O.i)(K,T,e.halfSize),Object(O.c)(K,K,e.bounds),w(n,r,K)-E>_)return!1;if(Object(O.i)(K,d,e.halfSize),Object(O.c)(K,K,e.bounds),w(n,r,K)-E<s)return!1;var t=e.node;return t.terminals.forAll((function(e){return A(e)})),null!==t.residents&&t.residents.forAll((function(e){return A(e)})),!0}),n,r)}},{key:"forEachNode",value:function(e){this._forEachNode(this._root,(function(t){return e(t.node,t.bounds,t.halfSize)}))}},{key:"forEachNeighbor",value:function(e,t){var n=this,r=Object(l.c)(t),i=Object(l.e)(t),o=function(t){var o=n._objectToBoundingSphere(t),u=Object(l.c)(o),c=r+u;Object(O.f)(Object(l.e)(o),i)-c*c<=0&&e(t)};this._forEachNode(this._root,(function(e){var t=Object(l.c)(e.bounds),n=r+t;if(Object(O.f)(Object(l.e)(e.bounds),i)-n*n>0)return!1;var u=e.node;return u.terminals.forAll((function(e){return o(e)})),null!==u.residents&&u.residents.forAll((function(e){return o(e)})),!0})),this.forEachDegenerateObject(o)}},{key:"_intersectsNode",value:function(e,t){return y(t.bounds,2*-t.halfSize,q),y(t.bounds,2*t.halfSize,Z),Object(m.b)(e.origin,e.direction,q,Z)}},{key:"_intersectsNodeWithOffset",value:function(e,t,n){return y(t.bounds,2*-t.halfSize,q),y(t.bounds,2*t.halfSize,Z),n.applyToMinMax(q,Z),Object(m.b)(e.origin,e.direction,q,Z)}},{key:"_intersectsObject",value:function(e,t){var n=this._objectToBoundingSphere(t);return!(n[3]>0)||Object(l.f)(n,e)}},{key:"_intersectsObjectWithOffset",value:function(e,t,n){var r=this._objectToBoundingSphere(t);return!(r[3]>0)||Object(l.f)(n.applyToBoundingSphere(r),e)}},{key:"_forEachNode",value:function(e,t){for(var n=F.acquire().init(e),r=[n];0!==r.length;){if(t(n=r.pop())&&!n.isLeaf())for(var i=0;i<n.node.children.length;i++)n.node.children[i]&&r.push(F.acquire().init(n).advance(i));F.release(n)}}},{key:"_forEachNodeDepthOrdered",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DepthOrder.FRONT_TO_BACK,o=F.acquire().init(t),u=[o];for(k(r,i,ie);0!==u.length;){if(n(o=u.pop())&&!o.isLeaf())for(var c=7;c>=0;--c){var a=ie[c];o.node.children[a]&&u.push(F.acquire().init(o).advance(a))}F.release(o)}}},{key:"_remove",value:function(e,t,n){Q.clear();var r=n.advanceTo(t,(function(e,t){Q.push(e.node),Q.push(t)}))?n.node.terminals:n.node.residents;if(r.removeUnordered(e),0===r.length)for(var i=Q.length-2;i>=0;i-=2){var o=Q.data[i],u=Q.data[i+1];if(!this._purge(o,u))break}}},{key:"_nodeIsEmpty",value:function(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(var t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}},{key:"_purge",value:function(e,t){return t>=0&&(e.children[t]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new h.a({shrink:!0})),!0)}},{key:"_add",value:function(e,t){t.advanceTo(this._objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}},{key:"_split",value:function(e){var t=e.node.residents;e.node.residents=null;for(var n=0;n<t.length;n++){var r=F.acquire().init(e);this._add(t.getItemAt(n),r),F.release(r)}}},{key:"_grow",value:function(e,t){var n=this;if(0!==t&&(G(e,t,(function(e){return n._objectToBoundingSphere(e)}),$),V($[3])&&!this._fitsInsideTree($)))if(this._nodeIsEmpty(this._root.node))Object(l.a)($,this._root.bounds),this._root.halfSize=1.25*$[3];else{var r=this._rootBoundsForRootAsSubNode($);this._placingRootViolatesMaxDepth(r)?this._rebuildTree($,r):this._growRootAsSubNode(r),F.release(r)}}},{key:"_rebuildTree",value:function(e,t){var n=this;Object(O.e)(ee,t.bounds),ee[3]=t.halfSize,G([e,ee],2,(function(e){return e}),te);var r=F.acquire().init(this._root);this._root.initFrom(null,te,1.25*te[3]),this._forEachNode(r,(function(e){return n.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&n.add(e.node.residents.data,e.node.residents.length),!0})),F.release(r)}},{key:"_placingRootViolatesMaxDepth",value:function(e){var t=this,n=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E,r=0;return this._forEachNode(this._root,(function(e){return(r=Math.max(r,e.depth))+n<=t._maximumDepth})),r+n>this._maximumDepth}},{key:"_rootBoundsForRootAsSubNode",value:function(e){for(var t=e[3],n=e,r=-1/0,i=this._root.bounds,o=this._root.halfSize,u=0;u<3;u++){var c=i[u]-o-(n[u]-t),a=n[u]+t-(i[u]+o),s=Math.max(0,Math.ceil(c/(2*o))),_=Math.max(0,Math.ceil(a/(2*o)))+1,f=Math.pow(2,Math.ceil(Math.log(s+_)*Math.LOG2E));r=Math.max(r,f),ne[u].min=s,ne[u].max=_}for(var E=0;E<3;E++){var O=ne[E].min,T=ne[E].max,d=(r-(O+T))/2;O+=Math.ceil(d),T+=Math.floor(d);var l=i[E]-o-O*o*2;z[E]=l+(T+O)*o}return z[3]=r*o*Y,F.acquire().initFrom(null,z,r*o,0)}},{key:"_growRootAsSubNode",value:function(e){var t=this._root.node;Object(O.e)($,this._root.bounds),$[3]=this._root.halfSize,this._root.init(e),e.advanceTo($,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}},{key:"_shrink",value:function(){for(;;){var e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}},{key:"_findShrinkIndex",value:function(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;for(var e=null,t=this._root.node.children,n=0,r=0;r<t.length&&null==e;)e=t[n=r++];for(;r<t.length;)if(t[r++])return-1;return n}},{key:"_isDegenerate",value:function(e){return!V(this._objectToBoundingSphere(e)[3])}},{key:"_fitsInsideTree",value:function(e){var t=this._root.bounds,n=this._root.halfSize;return e[3]<=n&&e[0]>=t[0]-n&&e[0]<=t[0]+n&&e[1]>=t[1]-n&&e[1]<=t[1]+n&&e[2]>=t[2]-n&&e[2]<=t[2]+n}}]),e}(),F=function(){function e(){Object(o.a)(this,e),this.bounds=Object(l.b)(),this.halfSize=0,this.initFrom(null,null,0,0)}return Object(u.a)(e,[{key:"init",value:function(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}},{key:"initFrom",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.depth;return this.node=Object(_.k)(t)?t:e.createEmptyNode(),Object(_.k)(n)&&Object(l.a)(n,this.bounds),this.halfSize=r,this.depth=i,this}},{key:"advance",value:function(t){var n=this.node.children[t];n||(n=e.createEmptyNode(),this.node.children[t]=n),this.node=n,this.halfSize/=2,this.depth++;var r=x[t];return this.bounds[0]+=r[0]*this.halfSize,this.bounds[1]+=r[1]*this.halfSize,this.bounds[2]+=r[2]*this.halfSize,this.bounds[3]=this.halfSize*Y,this}},{key:"advanceTo",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!n)return t&&t(this,-1),!1;this.node.residents=null}var r=this._childIndex(e);t&&t(this,r),this.advance(r)}}},{key:"isLeaf",value:function(){return null!=this.node.residents}},{key:"isTerminalFor",value:function(e){return e[3]>this.halfSize/2}},{key:"_childIndex",value:function(e){var t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}}],[{key:"createEmptyNode",value:function(){return{children:[null,null,null,null,null,null,null,null],terminals:new h.a({shrink:!0}),residents:new h.a({shrink:!0})}}},{key:"acquire",value:function(){return e._pool.acquire()}},{key:"release",value:function(t){e._pool.release(t)}},{key:"clearPool",value:function(){e._pool.prune()}}]),e}();function B(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function U(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function y(e,t,n){n[0]=e[0]+t,n[1]=e[1]+t,n[2]=e[2]+t}function G(e,t,n,r){if(1===t){var i=n(e[0]);Object(l.a)(i,r)}else{q[0]=1/0,q[1]=1/0,q[2]=1/0,Z[0]=-1/0,Z[1]=-1/0,Z[2]=-1/0;for(var o=0;o<t;o++){var u=n(e[o]);V(u[3])&&(B(q,u),U(Z,u))}Object(O.j)(r,q,Z,.5),r[3]=Math.max(Z[0]-q[0],Z[1]-q[1],Z[2]-q[2])/2}}function k(e,t,n){if(!re.length)for(var r=0;r<8;++r)re.push({index:0,distance:0});for(var i=0;i<8;++i){var o=x[i];re.data[i].index=i,re.data[i].distance=w(e,t,o)}re.sort((function(e,t){return e.distance-t.distance}));for(var u=0;u<8;++u)n[u]=re.data[u].index}function H(e,t){for(var n=1/0,r=null,i=0;i<8;++i){var o=w(e,t,X[i]);o<n&&(n=o,r=X[i])}return r}function w(e,t,n){return t*(e[0]*n[0]+e[1]*n[1]+e[2]*n[2])}function V(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}F._pool=new R.a(F),function(e){var t;(t=e.DepthOrder||(e.DepthOrder={}))[t.FRONT_TO_BACK=1]="FRONT_TO_BACK",t[t.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(D||(D={}));var x=[Object(T.g)(-1,-1,-1),Object(T.g)(1,-1,-1),Object(T.g)(-1,1,-1),Object(T.g)(1,1,-1),Object(T.g)(-1,-1,1),Object(T.g)(1,-1,1),Object(T.g)(-1,1,1),Object(T.g)(1,1,1)],X=[Object(T.g)(-1,-1,-1),Object(T.g)(-1,-1,1),Object(T.g)(-1,1,-1),Object(T.g)(-1,1,1),Object(T.g)(1,-1,-1),Object(T.g)(1,-1,1),Object(T.g)(1,1,-1),Object(T.g)(1,1,1)],Y=Math.sqrt(3),W=[null];var z=Object(l.b)(),K=Object(T.e)(),q=Object(T.e)(),Z=Object(T.e)(),Q=new h.a,J=Object(l.b)(),$=Object(l.b)(),ee=Object(l.b)(),te=Object(l.b)(),ne=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],re=new h.a,ie=[0,0,0,0,0,0,0,0],oe=D,ue=n(902),ce=function(){function e(){Object(o.a)(this,e),this._idToComponent=new Map,this._components=new oe((function(e){return e.bounds})),this._edges=new oe((function(e){return e.bounds})),this._tmpLineSegment=Object(d.a)(),this._tmpP1=Object(T.e)(),this._tmpP2=Object(T.e)(),this._tmpP3=Object(T.e)(),this.remoteClient=null}return Object(u.a)(e,[{key:"fetchCandidates",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:return Object(f.p)(n),e.next=5,this._ensureEdgeLocations(t,n);case 5:return r=[],e.abrupt("return",(this._edges.forEachNeighbor((function(e){return i._addCandidates(t,e,r)}),t.bounds),{result:{candidates:r}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_ensureEdgeLocations",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var i,o,u,c,s,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],this._components.forEachNeighbor((function(e){if(Object(_.j)(e.info)){var t=e.id,n=e.uid;i.push({id:t,uid:n})}}),t.bounds),i.length){e.next=3;break}return e.abrupt("return");case 3:return o={components:i},e.next=6,this.remoteClient.invoke("fetchAllEdgeLocations",o,Object(_.r)(n,{}));case 6:u=e.sent,c=Object(r.a)(u.components);try{for(c.s();!(s=c.n()).done;)f=s.value,this._setFetchEdgeLocations(f)}catch(a){c.e(a)}finally{c.f()}case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new se(t.id,t.bounds),e.abrupt("return",(this._idToComponent.set(n.id,n),this._components.add([n]),{result:{}}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this._idToComponent.get(t.id))&&(r=[],this._edges.forEachNeighbor((function(e){e.component===n&&r.push(e)}),n.bounds),this._edges.remove(r),this._components.remove([n]),this._idToComponent.delete(n.id)),e.abrupt("return",{result:{}});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setFetchEdgeLocations",value:function(e){var t=this._idToComponent.get(e.id);if(!Object(_.j)(t)&&e.uid===t.uid){for(var n=ue.extractComponentsEdgeLocationsLayout.createView(e.locations),r=new Array(n.count),i=Object(T.e)(),o=Object(T.e)(),u=0;u<n.count;u++){var c=Object(l.b)(),a=Object(l.e)(c);n.position0.getVec(u,i),n.position1.getVec(u,o),Object(O.a)(a,a,i,.5),Object(O.a)(a,a,o,.5),Object(O.c)(a,a,e.origin),c[3]=Object(O.k)(a,i);var s=new _e(t,u,c);r[u]=s}this._edges.add(r);var f=e.objectIds,E=e.origin;t.info={locations:n,objectIds:f,origin:E}}}},{key:"_addCandidates",value:function(e,t,n){var r=t.component.info,i=r.locations,o=r.origin,u=r.objectIds,c=i.position0.getVec(t.index,this._tmpP1),a=i.position1.getVec(t.index,this._tmpP2);Object(O.c)(c,c,o),Object(O.c)(a,a,o);var s=u[i.componentIndex.get(t.index)];this._addEdgeCandidate(e,s,c,a,n),this._addVertexCandidate(e,s,c,n),this._addVertexCandidate(e,s,a,n)}},{key:"_addEdgeCandidate",value:function(e,t,n,r,i){if(e.types&A.b.EDGE){var o=Object(l.e)(e.bounds),u=Object(d.c)(n,r,this._tmpLineSegment),c=Object(d.e)(u,o,this._tmpP3);if(!Object(l.g)(e.bounds,c))return null;i.push({type:"edge",objectId:t,target:Object(T.c)(c),distance:Object(O.k)(o,c),start:Object(T.c)(n),end:Object(T.c)(r)})}}},{key:"_addVertexCandidate",value:function(e,t,n,r){if(e.types&A.b.VERTEX){var i=Object(l.e)(e.bounds);if(!Object(l.g)(e.bounds,n))return null;r.push({type:"vertex",objectId:t,target:Object(T.c)(n),distance:Object(O.k)(i,n)})}}}]),e}();function ae(){return new ce}ce=Object(s.a)([Object(E.a)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],ce);var se=Object(u.a)((function e(t,n){Object(o.a)(this,e),this.id=t,this.bounds=n,this.info=null,this.uid=++e.uid}));se.uid=0;var _e=Object(u.a)((function e(t,n,r){Object(o.a)(this,e),this.component=t,this.index=n,this.bounds=r}))},153:function(e,t,n){"use strict";var r,i,o,u,c,a,s,_,f,E,O,T,d,l,A,R,h,N,b,v,I,S;n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return s})),n.d(t,"k",(function(){return _})),n.d(t,"l",(function(){return B})),n.d(t,"m",(function(){return S})),n.d(t,"n",(function(){return a})),n.d(t,"o",(function(){return v})),n.d(t,"p",(function(){return l})),n.d(t,"q",(function(){return R})),n.d(t,"r",(function(){return i})),n.d(t,"s",(function(){return h})),n.d(t,"t",(function(){return C})),n.d(t,"u",(function(){return b})),n.d(t,"v",(function(){return A})),n.d(t,"w",(function(){return E})),n.d(t,"x",(function(){return D})),n.d(t,"y",(function(){return I})),n.d(t,"z",(function(){return O})),n.d(t,"A",(function(){return d})),n.d(t,"B",(function(){return T})),n.d(t,"C",(function(){return M})),n.d(t,"D",(function(){return N})),function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"}(r||(r={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(i||(i={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(o||(o={})),function(e){e[e.ADD=32774]="ADD",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(u||(u={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER"}(c||(c={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(a||(a={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(s||(s={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT"}(_||(_={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(f||(f={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(E||(E={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(O||(O={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(T||(T={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(d||(d={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(l||(l={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(A||(A={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(R||(R={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(h||(h={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(N||(N={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(b||(b={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(v||(v={})),function(e){e[e.TEXTURE=0]="TEXTURE",e[e.RENDER_BUFFER=1]="RENDER_BUFFER",e[e.CUBEMAP=2]="CUBEMAP"}(I||(I={})),function(e){e[e.NONE=0]="NONE",e[e.DEPTH_RENDER_BUFFER=1]="DEPTH_RENDER_BUFFER",e[e.STENCIL_RENDER_BUFFER=2]="STENCIL_RENDER_BUFFER",e[e.DEPTH_STENCIL_RENDER_BUFFER=3]="DEPTH_STENCIL_RENDER_BUFFER",e[e.DEPTH_STENCIL_TEXTURE=4]="DEPTH_STENCIL_TEXTURE"}(S||(S={}));var C,g,j=33984;!function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.Sync=7]="Sync",e[e.COUNT=8]="COUNT"}(C||(C={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(g||(g={}));var p,M,L,P,m,D,F,B=33306;!function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"}(p||(p={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(M||(M={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(L||(L={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(P||(P={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(m||(m={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(D||(D={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(F||(F={}))},213:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(143),i=n(142),o=Object(r.a)((function e(t,n,r,o,u){var c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;Object(i.a)(this,e),this.name=t,this.count=n,this.type=r,this.offset=o,this.stride=u,this.normalized=c,this.divisor=a}))},310:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.POSITION="position",e.NORMAL="normal",e.UV0="uv0",e.AUXPOS1="auxpos1",e.AUXPOS2="auxpos2",e.MAPPOS="mapPos",e.COLOR="color",e.SYMBOLCOLOR="symbolColor",e.SIZE="size",e.TANGENT="tangent",e.OFFSET="offset",e.SUBDIVISIONFACTOR="subdivisionFactor",e.COLORFEATUREATTRIBUTE="colorFeatureAttribute",e.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",e.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",e.DISTANCETOSTART="distanceToStart",e.UVMAPSPACE="uvMapSpace",e.BOUNDINGRECT="boundingRect",e.UVREGION="uvRegion",e.NORMALCOMPRESSED="normalCompressed",e.PROFILERIGHT="profileRight",e.PROFILEUP="profileUp",e.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",e.FEATUREVALUE="featureValue",e.MODELORIGINHI="modelOriginHi",e.MODELORIGINLO="modelOriginLo",e.MODEL="model",e.MODELNORMAL="modelNormal",e.INSTANCECOLOR="instanceColor",e.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",e.LOCALTRANSFORM="localTransform",e.GLOBALTRANSFORM="globalTransform",e.BOUNDINGSPHERE="boundingSphere",e.MODELORIGIN="modelOrigin",e.MODELSCALEFACTORS="modelScaleFactors",e.FEATUREATTRIBUTE="featureAttribute",e.STATE="state",e.LODLEVEL="lodLevel",e.POSITION0="position0",e.POSITION1="position1",e.NORMALA="normalA",e.NORMALB="normalB",e.COMPONENTINDEX="componentIndex",e.VARIANTOFFSET="variantOffset",e.VARIANTSTROKE="variantStroke",e.VARIANTEXTENSION="variantExtension",e.U8PADDING="u8padding",e.U16PADDING="u16padding",e.SIDENESS="sideness",e.START="start",e.END="end",e.UP="up",e.EXTRUDE="extrude"}(r||(r={}))},319:function(e,t,n){"use strict";function r(){return[1,0,0,0,1,0,0,0,1]}function i(e,t){return new Float64Array(e,t,9)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function(e,t,n,r,i,o,u,c,a){return[e,t,n,r,i,o,u,c,a]},createView:i},Symbol.toStringTag,{value:"Module"}))},332:function(e,t,n){"use strict";function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function o(e,t){return new Float64Array(e,t,16)}n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r}));var u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:function(e,t,n,r,i,o,u,c,a,s,_,f,E,O,T,d){return[e,t,n,r,i,o,u,c,a,s,_,f,E,O,T,d]},createView:o,IDENTITY:u},Symbol.toStringTag,{value:"Module"}))},377:function(e,t,n){"use strict";function r(){return[0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3]]}function o(e,t){return new Float64Array(e,t,4)}n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return o}));var u=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:function(e,t,n,r){return[e,t,n,r]},createView:o,IDENTITY:u},Symbol.toStringTag,{value:"Module"}))},425:function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l}));var r=n(142),i=n(143),o=n(483),u=n(515),c=n(319),a=n(332),s=n(377),_=n(236),f=n(210),E=n(373),O=function(){function e(t,n,i){Object(r.a)(this,e),this.itemByteSize=t,this.itemCreate=n,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(i/this.itemByteSize)}return Object(i.a)(e,[{key:"get",value:function(){var e=this;0===this._itemsPtr&&Object(u.a)((function(){return e._reset()}));for(var t=Math.floor(this._itemsPtr/this._itemsPerBuffer);this._buffers.length<=t;){for(var n=new ArrayBuffer(this._itemsPerBuffer*this.itemByteSize),r=0;r<this._itemsPerBuffer;++r)this._items.push(this.itemCreate(n,r*this.itemByteSize));this._buffers.push(n)}return this._items[this._itemsPtr++]}},{key:"_reset",value:function(){for(var e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}},{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this.itemByteSize}}}],[{key:"createVec2f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return new e(16,_.c,t)}},{key:"createVec3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return new e(24,f.d,t)}},{key:"createVec4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return new e(32,E.a,t)}},{key:"createMat3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return new e(72,c.a,t)}},{key:"createMat4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return new e(128,a.b,t)}},{key:"createQuatf64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return new e(32,s.d,t)}}]),e}(),T=4*o.a.KILOBYTES,d=(O.createVec2f64(),O.createVec3f64()),l=O.createVec4f64(),A=(O.createMat3f64(),O.createMat4f64());O.createQuatf64()},491:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(142),i=n(143),o=n(515),u=function(){function e(t){Object(r.a)(this,e),this.allocator=t,this._items=[],this._itemsPtr=0,this._grow()}return Object(i.a)(e,[{key:"get",value:function(){var e=this;return 0===this._itemsPtr&&Object(o.a)((function(){return e._reset()})),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}},{key:"_reset",value:function(){var e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*c);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}},{key:"_grow",value:function(){for(var e=0;e<Math.max(8,Math.min(this._items.length,c));e++)this._items.push(this.allocator())}}]),e}(),c=1024},500:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(60),i=n(142),o=n(143),u=n(414),c=n(552),a=function(){function e(t,n){Object(i.a)(this,e),this.layout=t,this.buffer="number"==typeof n?new ArrayBuffer(n*t.stride):n;var o,u=Object(r.a)(t.fieldNames);try{for(u.s();!(o=u.n()).done;){var c=o.value,a=t.fields.get(c);this[c]=new a.constructor(this.buffer,a.offset,this.stride)}}catch(s){u.e(s)}finally{u.f()}}return Object(o.a)(e,[{key:"stride",get:function(){return this.layout.stride}},{key:"count",get:function(){return this.buffer.byteLength/this.stride}},{key:"byteLength",get:function(){return this.buffer.byteLength}},{key:"getField",value:function(e,t){var n=this[e];return n&&n.elementCount===t.ElementCount&&n.elementType===t.ElementType?n:null}},{key:"slice",value:function(t,n){return new e(this.layout,this.buffer.slice(t*this.stride,n*this.stride))}},{key:"copyFrom",value:function(e,t,n,r){var i=this.stride;if(i%4==0){var o=new Uint32Array(e.buffer,t*i,r*i/4);new Uint32Array(this.buffer,n*i,r*i/4).set(o)}else{var u=new Uint8Array(e.buffer,t*i,r*i);new Uint8Array(this.buffer,n*i,r*i).set(u)}}}]),e}(),s=function(){function e(){Object(i.a)(this,e),this.stride=0,this.fields=new Map,this.fieldNames=[]}return Object(o.a)(e,[{key:"vec2f",value:function(e,t){return this._appendField(e,u.m,t),this}},{key:"vec2f64",value:function(e,t){return this._appendField(e,u.n,t),this}},{key:"vec3f",value:function(e,t){return this._appendField(e,u.u,t),this}},{key:"vec3f64",value:function(e,t){return this._appendField(e,u.v,t),this}},{key:"vec4f",value:function(e,t){return this._appendField(e,u.C,t),this}},{key:"vec4f64",value:function(e,t){return this._appendField(e,u.D,t),this}},{key:"mat3f",value:function(e,t){return this._appendField(e,u.f,t),this}},{key:"mat3f64",value:function(e,t){return this._appendField(e,u.g,t),this}},{key:"mat4f",value:function(e,t){return this._appendField(e,u.h,t),this}},{key:"mat4f64",value:function(e,t){return this._appendField(e,u.i,t),this}},{key:"vec4u8",value:function(e,t){return this._appendField(e,u.J,t),this}},{key:"f32",value:function(e,t){return this._appendField(e,u.a,t),this}},{key:"f64",value:function(e,t){return this._appendField(e,u.b,t),this}},{key:"u8",value:function(e,t){return this._appendField(e,u.l,t),this}},{key:"u16",value:function(e,t){return this._appendField(e,u.j,t),this}},{key:"i8",value:function(e,t){return this._appendField(e,u.e,t),this}},{key:"vec2i8",value:function(e,t){return this._appendField(e,u.q,t),this}},{key:"vec2i16",value:function(e,t){return this._appendField(e,u.o,t),this}},{key:"vec2u8",value:function(e,t){return this._appendField(e,u.t,t),this}},{key:"vec4u16",value:function(e,t){return this._appendField(e,u.H,t),this}},{key:"u32",value:function(e,t){return this._appendField(e,u.k,t),this}},{key:"_appendField",value:function(e,t,n){var r=t.ElementCount*Object(c.a)(t.ElementType),i=this.stride;this.fields.set(e,{size:r,constructor:t,offset:i,optional:n}),this.stride+=r,this.fieldNames.push(e)}},{key:"alignTo",value:function(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}},{key:"hasField",value:function(e){return this.fieldNames.includes(e)}},{key:"createBuffer",value:function(e){return new a(this,e)}},{key:"createView",value:function(e){return new a(this,e)}},{key:"clone",value:function(){var t=new e;return t.stride=this.stride,t.fields=new Map,this.fields.forEach((function(e,n){return t.fields.set(n,e)})),t.fieldNames=this.fieldNames.slice(),t.BufferType=this.BufferType,t}}]),e}();function _(){return new s}},525:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s}));var r=n(142),i=n(143),o=(n(236),n(385),n(373)),u=(Object(o.b)(),function(){function e(t){Object(r.a)(this,e),this.message=t}return Object(i.a)(e,[{key:"toString",value:function(){return"AssertException: ".concat(this.message)}}]),e}());function c(e,t){if(!e)throw t=t||"assert",console.log(new Error(t).stack),new u(t)}function a(e,t,n,r){var i,o=(n[0]-e[0])/t[0],u=(r[0]-e[0])/t[0];o>u&&(i=o,o=u,u=i);var c=(n[1]-e[1])/t[1],a=(r[1]-e[1])/t[1];if(c>a&&(i=c,c=a,a=i),o>a||c>u)return!1;c>o&&(o=c),a<u&&(u=a);var s=(n[2]-e[2])/t[2],_=(r[2]-e[2])/t[2];return s>_&&(i=s,s=_,_=i),!(o>_||s>u)&&(_<u&&(u=_),!(u<0))}function s(e,t,n,r){e[12]=t,e[13]=n,e[14]=r}},552:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return u}));n(147);function r(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function i(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function o(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function u(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}},556:function(e,t,n){"use strict";n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c}));n(152);var r=n(491),i=n(222),o=n(210);n(425);function u(e){return e?{origin:Object(o.c)(e.origin),direction:Object(o.c)(e.direction)}:{origin:Object(o.e)(),direction:Object(o.e)()}}function c(e,t){var n=f.get();return n.origin=e,n.direction=t,n}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u();return s(e.origin,e.direction,t)}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u();return Object(i.e)(n.origin,e),Object(i.e)(n.direction,t),n}function _(e,t,n){var r=Object(i.g)(e.direction,Object(i.d)(n,t,e.origin));return Object(i.c)(n,e.origin,Object(i.i)(n,e.direction,r)),n}var f=new r.a((function(){return{origin:null,direction:null}}))},559:function(e,t,n){"use strict";n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return A})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return N})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return P}));n(147);var r,i,o=n(156),u=n(188),c=n(146),a=n(375),s=n(222),_=n(210),f=n(385),E=n(373);(i=r||(r={}))[i.X=0]="X",i[i.Y=1]="Y",i[i.Z=2]="Z";var O=n(556),T=n(591),d=n(425),l=o.a.getLogger("esri.geometry.support.sphere");function A(){return Object(E.b)()}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A();return Object(f.c)(t,e)}function h(e){return e[3]}function N(e){return e}function b(e,t,n,r){return Object(E.c)(e,t,n,r)}function v(e,t,n){if(Object(c.j)(t))return!1;var r=t.origin,i=t.direction,o=I;o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2];var u=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],a=2*(i[0]*o[0]+i[1]*o[1]+i[2]*o[2]),s=a*a-4*u*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-e[3]*e[3]);if(s<0)return!1;var _=Math.sqrt(s),f=(-a-_)/(2*u),E=(-a+_)/(2*u);return(f<0||E<f&&E>0)&&(f=E),!(f<0)&&(n&&(n[0]=r[0]+i[0]*f,n[1]=r[1]+i[1]*f,n[2]=r[2]+i[2]*f),!0)}var I=Object(_.e)();function S(e,t){return v(e,t,null)}function C(e,t,n){var r=d.b.get(),i=d.a.get();Object(s.h)(r,t.origin,t.direction);var o=h(e);Object(s.h)(n,r,t.origin),Object(s.i)(n,n,1/Object(s.n)(n)*o);var u=j(e,t.origin),c=Object(T.a)(t.origin,n);return Object(a.c)(i,c+u,r),Object(s.o)(n,n,i),n}function g(e,t,n){var r=Object(s.d)(d.b.get(),t,e),i=Object(s.i)(d.b.get(),r,e[3]/Object(s.n)(r));return Object(s.c)(n,i,e)}function j(e,t){var n=Object(s.d)(d.b.get(),t,e),r=Object(s.n)(n),i=h(e),o=i+Math.abs(i-r);return Object(u.a)(i/o)}var p=Object(_.e)();function M(e,t,n,i){var o=Object(s.d)(p,t,e);switch(n){case r.X:var c=Object(u.c)(o,p)[2];return Object(s.u)(i,-Math.sin(c),Math.cos(c),0);case r.Y:var a=Object(u.c)(o,p),_=a[1],f=a[2],E=Math.sin(_);return Object(s.u)(i,-E*Math.cos(f),-E*Math.sin(f),Math.cos(_));case r.Z:return Object(s.p)(i,o);default:return}}function L(e,t){var n=Object(s.d)(m,t,e);return Object(s.n)(n)-e[3]}function P(e,t){var n=Object(s.f)(e,t),r=h(e);return n<=r*r}var m=Object(_.e)(),D=A();Object.freeze(Object.defineProperty({__proto__:null,create:A,copy:R,fromCenterAndRadius:function(e,t){return Object(E.c)(e[0],e[1],e[2],t)},wrap:function(e){return e},clear:function(e){e[0]=e[1]=e[2]=e[3]=0},fromRadius:function(e,t){return e[0]=e[1]=e[2]=0,e[3]=t,e},getRadius:h,getCenter:N,fromValues:b,elevate:function(e,t,n){return e!==n&&Object(s.e)(n,e),n[3]=e[3]+t,n},setExtent:function(e,t,n){return l.error("sphere.setExtent is not yet supported"),e===n?n:R(e,n)},intersectRay:v,intersectsRay:S,intersectRayClosestSilhouette:function(e,t,n){if(v(e,t,n))return n;var r=C(e,t,d.b.get());return Object(s.c)(n,t.origin,Object(s.i)(d.b.get(),t.direction,Object(s.k)(t.origin,r)/Object(s.n)(t.direction))),n},closestPointOnSilhouette:C,closestPoint:function(e,t,n){return v(e,t,n)?n:(Object(O.a)(t,e,n),g(e,n,n))},projectPoint:g,distanceToSilhouette:function(e,t){var n=Object(s.d)(d.b.get(),t,e),r=Object(s.r)(n),i=e[3]*e[3];return Math.sqrt(Math.abs(r-i))},angleToSilhouette:j,axisAt:M,altitudeAt:L,setAltitudeAt:function(e,t,n,i){var o=L(e,t),u=M(e,t,r.Z,m),c=Object(s.i)(m,u,n-o);return Object(s.c)(i,t,c)},containsPoint:P,tmpSphere:D},Symbol.toStringTag,{value:"Module"}))},591:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n(188),i=n(222),o=n(210);function u(e,t){return Object(i.g)(e,t)/Object(i.n)(e)}function c(e,t){var n=Object(i.g)(e,t)/(Object(i.n)(e)*Object(i.n)(t));return-Object(r.a)(n)}Object(o.e)(),Object(o.e)()},640:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(188);function i(e,t,n){var i,s=e.byteLength/(4*t),_=new Uint32Array(e,0,s*t),f=new Uint32Array(s),E=null!==(i=null===n||void 0===n?void 0:n.minReduction)&&void 0!==i?i:0,O=(null===n||void 0===n?void 0:n.originalIndices)||null,T=O?O.length:0,d=(null===n||void 0===n?void 0:n.componentOffsets)||null,l=0;if(d)for(var A=0;A<d.length-1;A++){var R=d[A+1]-d[A];R>l&&(l=R)}else l=s;var h=Math.floor(1.1*l)+1;(null==a||a.length<2*h)&&(a=new Uint32Array(Object(r.j)(2*h)));for(var N=0;N<2*h;N++)a[N]=0;for(var b=0,v=!!d&&!!O,I=v?T:s,S=v?new Uint32Array(T):null,C=1.96,g=0!==E?Math.ceil(4*C*C/(E*E)*E*(1-E)):I,j=1,p=d?d[1]:I,M=0;M<I;M++){if(M===g){var L=1-b/M;if(L+C*Math.sqrt(L*(1-L)/M)<E)return null;g*=2}if(M===p){for(var P=0;P<2*h;P++)a[P]=0;if(O)for(var m=d[j-1];m<d[j];m++)S[m]=f[O[m]];p=d[++j]}for(var D=v?O[M]:M,F=D*t,B=c(_,F,t),U=B%h,y=b;0!==a[2*U+1];){if(a[2*U]===B){var G=a[2*U+1]-1;if(o(_,F,G*t,t)){y=f[G];break}}++U>=h&&(U-=h)}y===b&&(a[2*U]=B,a[2*U+1]=D+1,b++),f[D]=y}if(0!==E&&1-b/s<E)return null;if(v){for(var k=d[j-1];k<S.length;k++)S[k]=f[O[k]];f=S}var H=new Uint32Array(t*b);b=0;for(var w=0;w<I;w++)f[w]===b&&(u(_,(v?O[w]:w)*t,H,b*t,t),b++);if(O&&!v){for(var V=new Uint32Array(T),x=0;x<V.length;x++)V[x]=f[O[x]];f=V}return{buffer:H.buffer,indices:f,uniqueCount:b}}function o(e,t,n,r){for(var i=0;i<r;i++)if(e[t+i]!==e[n+i])return!1;return!0}function u(e,t,n,r,i){for(var o=0;o<i;o++)n[r+o]=e[t+o]}function c(e,t,n){for(var r=0,i=0;i<n;i++)r=(r=e[t+i]+r|0)+(r<<11)+(r>>>2)|0;return r>>>0}var a=null},858:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return E}));var r=n(188),i=n(491),o=n(222),u=n(210),c=n(425);function a(e){return e?{origin:Object(u.c)(e.origin),vector:Object(u.c)(e.vector)}:{origin:Object(u.e)(),vector:Object(u.e)()}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a();return Object(o.e)(n.origin,e),Object(o.e)(n.vector,t),n}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a();return Object(o.e)(n.origin,e),Object(o.d)(n.vector,t,e),n}function f(e,t){var n=Object(o.d)(c.b.get(),t,e.origin),i=Object(o.g)(e.vector,n),u=Object(o.g)(e.vector,e.vector),a=Object(r.d)(i/u,0,1),s=Object(o.d)(c.b.get(),Object(o.i)(c.b.get(),e.vector,a),n);return Object(o.g)(s,s)}function E(e,t,n){return function(e,t,n,i,u){var a=e.vector,s=e.origin,_=Object(o.d)(c.b.get(),t,s),f=Object(o.g)(a,_)/Object(o.r)(a);return Object(o.i)(u,a,Object(r.d)(f,n,i)),Object(o.c)(u,u,e.origin)}(e,t,0,1,n)}Object(u.e)(),Object(u.e)(),new i.a((function(){return{origin:null,vector:null}}))},902:function(e,t,n){"use strict";n.r(t),n.d(t,"EdgeProcessingWorker",(function(){return re})),n.d(t,"default",(function(){return Ae})),n.d(t,"extract",(function(){return ie})),n.d(t,"extractComponentsEdgeLocationsLayout",(function(){return le})),n.d(t,"extractEdgeLocationsLayout",(function(){return de}));var r=n(155),i=n(142),o=n(143),u=n(154),c=n.n(u),a=n(640);function s(e,t,n){for(var r=t/3,i=new Uint32Array(n+1),o=new Uint32Array(n+1),u=function(e,t){e<t?i[e+1]++:o[t+1]++},c=0;c<r;c++){var a=e[3*c],s=e[3*c+1],_=e[3*c+2];u(a,s),u(s,_),u(_,a)}for(var f=0,E=0,O=0;O<n;O++){var T=i[O+1],d=o[O+1];i[O+1]=f,o[O+1]=E,f+=T,E+=d}for(var l=new Uint32Array(6*r),A=i[n],R=function(e,t,n){if(e<t){var r=i[e+1]++;l[2*r]=t,l[2*r+1]=n}else{var u=o[t+1]++;l[2*A+2*u]=e,l[2*A+2*u+1]=n}},h=0;h<r;h++){var N=e[3*h],b=e[3*h+1],v=e[3*h+2];R(N,b,h),R(b,v,h),R(v,N,h)}for(var I=function(e,t){for(var n=2*e,r=t-e,i=1;i<r;i++){for(var o=l[n+2*i],u=l[n+2*i+1],c=i-1;c>=0&&l[n+2*c]>o;c--)l[n+2*c+2]=l[n+2*c],l[n+2*c+3]=l[n+2*c+1];l[n+2*c+2]=o,l[n+2*c+3]=u}},S=0;S<n;S++)I(i[S],i[S+1]),I(A+o[S],A+o[S+1]);for(var C=new Int32Array(3*r),g=function(t,n){return t===e[3*n]?0:t===e[3*n+1]?1:t===e[3*n+2]?2:-1},j=function(e,t){var n=g(e,t);C[3*t+n]=-1},p=function(e,t,n,r){var i=g(e,t);C[3*t+i]=r;var o=g(n,r);C[3*r+o]=t},M=0;M<n;M++){for(var L=i[M],P=i[M+1],m=o[M],D=o[M+1];L<P&&m<D;){var F=l[2*L],B=l[2*A+2*m];F===B?(p(M,l[2*L+1],B,l[2*A+2*m+1]),L++,m++):F<B?(j(M,l[2*L+1]),L++):(j(B,l[2*A+2*m+1]),m++)}for(;L<P;)j(M,l[2*L+1]),L++;for(;m<D;)j(l[2*A+2*m],l[2*A+2*m+1]),m++}return C}var _=n(500),f=n(5),E=n(414);function O(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:T(e.layout)}}function T(e){var t=new Array;return e.fields.forEach((function(e,n){var r=Object(f.a)(Object(f.a)({},e),{},{constructor:l(e.constructor)});t.push([n,r])})),{stride:e.stride,fields:t,fieldNames:e.fieldNames}}var d=[E.a,E.m,E.u,E.C,E.f,E.h,E.b,E.n,E.v,E.D,E.g,E.i,E.l,E.t,E.B,E.J,E.j,E.r,E.z,E.H,E.k,E.s,E.A,E.I,E.e,E.q,E.y,E.G,E.c,E.o,E.w,E.E,E.d,E.p,E.x,E.F];function l(e){return"".concat(e.ElementType,"_").concat(e.ElementCount)}var A=new Map;d.forEach((function(e){return A.set(l(e),e)}));var R=n(310),h=n(153),N=n(213);function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.stride;return e.fieldNames.filter((function(t){var n=e.fields.get(t).optional;return!(n&&n.glPadding)})).map((function(r){var i=e.fields.get(r),o=i.constructor.ElementCount,u=v(i.constructor.ElementType),c=i.offset,a=!(!i.optional||!i.optional.glNormalized);return new N.a(r,o,u,c,n,a,t)}))}function v(e){var t=I[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}var I={u8:h.k.UNSIGNED_BYTE,u16:h.k.UNSIGNED_SHORT,u32:h.k.UNSIGNED_INT,i8:h.k.BYTE,i16:h.k.SHORT,i32:h.k.INT,f32:h.k.FLOAT},S=Object(_.a)().vec3f(R.a.POSITION).u16(R.a.COMPONENTINDEX).u16(R.a.U16PADDING),C=(b(Object(_.a)().vec2u8(R.a.SIDENESS)),Object(_.a)().vec3f(R.a.POSITION0).vec3f(R.a.POSITION1).u16(R.a.COMPONENTINDEX).u8(R.a.VARIANTOFFSET,{glNormalized:!0}).u8(R.a.VARIANTSTROKE).u8(R.a.VARIANTEXTENSION,{glNormalized:!0}).u8(R.a.U8PADDING,{glPadding:!0}).u16(R.a.U16PADDING,{glPadding:!0})),g=C.clone().vec3f(R.a.NORMAL),j=C.clone().vec3f(R.a.NORMALA).vec3f(R.a.NORMALB),p=(new Map([[R.a.POSITION0,0],[R.a.POSITION1,1],[R.a.COMPONENTINDEX,2],[R.a.VARIANTOFFSET,3],[R.a.VARIANTSTROKE,4],[R.a.VARIANTEXTENSION,5],[R.a.NORMAL,6],[R.a.NORMALA,6],[R.a.NORMALB,7],[R.a.SIDENESS,8]]),n(247)),M=n(222),L=n(210),P=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"updateSettings",value:function(e){this.settings=e,this.edgeHashFunction=e.reducedPrecision?U:B}},{key:"write",value:function(e,t,n){var r=this.edgeHashFunction(n);x.seed=r;var i=x.getIntRange(0,255),o=x.getIntRange(0,this.settings.variants-1),u=x.getFloat(),c=255*(.5*function(e,t){var n=e<0?-1:1;return Math.pow(Math.abs(e),t)*n}(-(1-Math.min(u/.7,1))+Math.max(0,u-.7)/(1-.7),1.2)+.5);e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex),e.variantOffset.set(t,i),e.variantStroke.set(t,o),e.variantExtension.set(t,c)}},{key:"trim",value:function(e,t){return e.slice(0,t)}}]),e}(),m=new Float32Array(6),D=new Uint32Array(m.buffer),F=new Uint32Array(1);function B(e){var t=m;t[0]=e.position0[0],t[1]=e.position0[1],t[2]=e.position0[2],t[3]=e.position1[0],t[4]=e.position1[1],t[5]=e.position1[2],F[0]=5381;for(var n=0;n<D.length;n++)F[0]=31*F[0]+D[n];return F[0]}function U(e){var t=m;t[0]=y(e.position0[0]),t[1]=y(e.position0[1]),t[2]=y(e.position0[2]),t[3]=y(e.position1[0]),t[4]=y(e.position1[1]),t[5]=y(e.position1[2]),F[0]=5381;for(var n=0;n<D.length;n++)F[0]=31*F[0]+D[n];return F[0]}function y(e){return Math.round(1e4*e)/1e4}var G=function(){function e(){Object(i.a)(this,e),this.commonWriter=new P}return Object(o.a)(e,[{key:"updateSettings",value:function(e){this.commonWriter.updateSettings(e)}},{key:"allocate",value:function(e){return g.createBuffer(e)}},{key:"write",value:function(e,t,n){this.commonWriter.write(e,t,n),Object(M.c)(V,n.faceNormal0,n.faceNormal1),Object(M.p)(V,V),e.normal.setVec(t,V)}},{key:"trim",value:function(e,t){return this.commonWriter.trim(e,t)}}]),e}();G.Layout=g,G.glLayout=b(g,1);var k=function(){function e(){Object(i.a)(this,e),this.commonWriter=new P}return Object(o.a)(e,[{key:"updateSettings",value:function(e){this.commonWriter.updateSettings(e)}},{key:"allocate",value:function(e){return j.createBuffer(e)}},{key:"write",value:function(e,t,n){this.commonWriter.write(e,t,n),e.normalA.setVec(t,n.faceNormal0),e.normalB.setVec(t,n.faceNormal1)}},{key:"trim",value:function(e,t){return this.commonWriter.trim(e,t)}}]),e}();k.Layout=j,k.glLayout=b(j,1);var H,w,V=Object(L.e)(),x=new p.a,X=n(152),Y=n(188),W=n(329),z=-1;function K(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ne,i=e.vertices.position,o=e.vertices.componentIndex,u=Object(Y.f)(r.anglePlanar),c=Object(Y.f)(r.angleSignificantEdge),a=Math.cos(c),s=Math.cos(u),_=ee.edge,f=_.position0,E=_.position1,O=_.faceNormal0,T=_.faceNormal1,d=$(e),l=J(e),A=l.length/4,R=t.allocate(A),h=0,N=A,b=n.allocate(N),v=0,I=0,S=0,C=Object(X.h)(0,A),g=new Float32Array(A);Object(W.b)(g,(function(e,t,n){i.getVec(l[4*t+0],f),i.getVec(l[4*t+1],E),n[t]=Object(M.k)(f,E)})),C.sort((function(e,t){return g[t]-g[e]}));for(var j=new Array,p=new Array,L=0;L<A;L++){var P=C[L],m=g[P],D=l[4*P+0],F=l[4*P+1],B=l[4*P+2],U=l[4*P+3],y=U===z;if(i.getVec(D,f),i.getVec(F,E),y)Object(M.u)(O,d[3*B+0],d[3*B+1],d[3*B+2]),Object(M.e)(T,O),_.componentIndex=o.get(D),_.cosAngle=Object(M.g)(O,T);else{if(Object(M.u)(O,d[3*B+0],d[3*B+1],d[3*B+2]),Object(M.u)(T,d[3*U+0],d[3*U+1],d[3*U+2]),_.componentIndex=o.get(D),_.cosAngle=Object(M.g)(O,T),Z(_,s))continue;_.cosAngle<-.9999&&Object(M.e)(T,O)}I+=m,S++,y||q(_,a)?(t.write(R,h++,_),j.push(m)):Q(_,u)&&(n.write(b,v++,_),p.push(m))}var G=new Float32Array(j.reverse()),k=new Float32Array(p.reverse());return{regular:{instancesData:t.trim(R,h),lodInfo:{lengths:G}},silhouette:{instancesData:n.trim(b,v),lodInfo:{lengths:k}},averageEdgeLength:I/S}}function q(e,t){return e.cosAngle<t}function Z(e,t){return e.cosAngle>t}function Q(e,t){var n=Object(Y.a)(e.cosAngle),r=ee.fwd,i=ee.ortho;return Object(M.t)(r,e.position1,e.position0),n*(Object(M.g)(Object(M.h)(i,e.faceNormal0,e.faceNormal1),r)>0?-1:1)>t}function J(e){for(var t=e.faces.length/3,n=e.faces,r=e.neighbors,i=0,o=0;o<t;o++){var u=r[3*o+0],c=r[3*o+1],a=r[3*o+2],s=n[3*o+0],_=n[3*o+1],f=n[3*o+2];i+=u===z||s<_?1:0,i+=c===z||_<f?1:0,i+=a===z||f<s?1:0}for(var E=new Int32Array(4*i),O=0,T=0;T<t;T++){var d=r[3*T+0],l=r[3*T+1],A=r[3*T+2],R=n[3*T+0],h=n[3*T+1],N=n[3*T+2];(d===z||R<h)&&(E[O++]=R,E[O++]=h,E[O++]=T,E[O++]=d),(l===z||h<N)&&(E[O++]=h,E[O++]=N,E[O++]=T,E[O++]=l),(A===z||N<R)&&(E[O++]=N,E[O++]=R,E[O++]=T,E[O++]=A)}return E}function $(e){for(var t=e.faces.length/3,n=e.vertices.position,r=e.faces,i=te.v0,o=te.v1,u=te.v2,c=new Float32Array(3*t),a=0;a<t;a++){var s=r[3*a+0],_=r[3*a+1],f=r[3*a+2];n.getVec(s,i),n.getVec(_,o),n.getVec(f,u),Object(M.d)(o,o,i),Object(M.d)(u,u,i),Object(M.h)(i,o,u),Object(M.p)(i,i),c[3*a+0]=i[0],c[3*a+1]=i[1],c[3*a+2]=i[2]}return c}(w=H||(H={}))[w.SOLID=0]="SOLID",w[w.SKETCH=1]="SKETCH";var ee={edge:{position0:Object(L.e)(),position1:Object(L.e)(),faceNormal0:Object(L.e)(),faceNormal1:Object(L.e)(),componentIndex:0,cosAngle:0},ortho:Object(L.e)(),fwd:Object(L.e)()},te={v0:Object(L.e)(),v1:Object(L.e)(),v2:Object(L.e)()},ne={anglePlanar:4,angleSignificantEdge:35},re=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"extract",value:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe(t),r=ie(n),i=[n.data.buffer],e.abrupt("return",{result:ue(r,i),transferList:i});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractComponentsEdgeLocations",value:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe(t),r=ce(n.data,n.skipDeduplicate,n.indices,n.indicesLength),i=K(r,Oe,Te),o=[],e.abrupt("return",{result:O(i.regular.instancesData,o),transferList:o});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractEdgeLocations",value:function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oe(t),r=ce(n.data,n.skipDeduplicate,n.indices,n.indicesLength),i=K(r,Ee,Te),o=[],e.abrupt("return",{result:O(i.regular.instancesData,o),transferList:o});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ie(e){var t=ce(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return ae.updateSettings(e.writerSettings),se.updateSettings(e.writerSettings),K(t,ae,se)}function oe(e){return{data:S.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indicesBuffer):"Uint16Array"===e.indicesType?new Uint16Array(e.indicesBuffer):void 0,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function ue(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:O(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:O(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}function ce(e,t,n,r){if(t)return{faces:n,facesLength:r,neighbors:s(n,r,e.count),vertices:e};var i=Object(a.a)(e.buffer,e.stride/4,{originalIndices:n,originalIndicesLength:r}),o=s(i.indices,r,i.uniqueCount);return{faces:i.indices,facesLength:i.indices.length,neighbors:o,vertices:S.createView(i.buffer)}}var ae=new G,se=new k,_e=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"allocate",value:function(e){return de.createBuffer(e)}},{key:"trim",value:function(e,t){return e.slice(0,t)}},{key:"write",value:function(e,t,n){e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1)}}]),e}(),fe=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"allocate",value:function(e){return le.createBuffer(e)}},{key:"trim",value:function(e,t){return e.slice(0,t)}},{key:"write",value:function(e,t,n){e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex)}}]),e}(),Ee=new _e,Oe=new fe,Te={allocate:function(){return null},write:function(){},trim:function(){return null}},de=Object(_.a)().vec3f(R.a.POSITION0).vec3f(R.a.POSITION1),le=Object(_.a)().vec3f(R.a.POSITION0).vec3f(R.a.POSITION1).u16(R.a.COMPONENTINDEX).u16(R.a.U16PADDING,{glPadding:!0});function Ae(){return new re}}}]);